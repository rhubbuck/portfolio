(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[179],{8255:ze=>{function Ce(U){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+U+"'");throw f.code="MODULE_NOT_FOUND",f})}Ce.keys=()=>[],Ce.resolve=Ce,Ce.id=8255,ze.exports=Ce},7716:(ze,Ce,U)=>{"use strict";U.d(Ce,{deG:()=>Rl,tb:()=>cA,AFp:()=>Sv,ip1:()=>Av,CZH:()=>rp,hGG:()=>zN,z2F:()=>Fv,sBO:()=>mR,Sil:()=>Pm,_Vd:()=>kf,EJc:()=>kC,SBq:()=>Jo,qLn:()=>tt,vpe:()=>Ya,gxx:()=>Lu,tBr:()=>ka,XFs:()=>Ge,OlP:()=>$t,zs3:()=>Un,ZZ4:()=>Vf,aQg:()=>ev,soG:()=>ac,YKP:()=>tv,v3s:()=>Tk,h0i:()=>Td,PXZ:()=>wk,R0b:()=>Ji,FiY:()=>Ss,Lbi:()=>lA,g9A:()=>uA,Qsj:()=>R0,FYo:()=>Yy,JOm:()=>y,Tiy:()=>pm,q3G:()=>Fn,tp0:()=>us,EAV:()=>Nk,Rgc:()=>Id,dDg:()=>EA,DyG:()=>yi,q4F:()=>P0,GfV:()=>Qy,s_b:()=>nv,ifc:()=>Oe,eFA:()=>Ov,G48:()=>bA,Gpc:()=>j,X6Q:()=>kv,_c5:()=>OA,VLi:()=>SN,c2e:()=>dA,zSh:()=>nf,wAp:()=>et,vHH:()=>Ee,EiD:()=>IE,mCW:()=>Vl,qzn:()=>Fa,JVY:()=>Qp,pB0:()=>gE,eBb:()=>pE,L6k:()=>x_,LAX:()=>Jp,cg1:()=>ky,Tjo:()=>PA,kL8:()=>OT,yhl:()=>Th,dqk:()=>ct,sIi:()=>Lg,CqO:()=>xy,QGY:()=>xw,F4k:()=>Rw,RDi:()=>So,AaK:()=>Q,z3N:()=>Lo,qOj:()=>_y,TTD:()=>Oi,_Bn:()=>A0,xp6:()=>yg,uIk:()=>dw,ekj:()=>Hw,Suo:()=>yC,Xpm:()=>br,lG2:()=>gc,Yz7:()=>un,cJS:()=>vn,oAB:()=>Io,Yjl:()=>pi,Y36:()=>Kg,_UZ:()=>Yg,qZA:()=>Dw,TgZ:()=>on,EpF:()=>Sw,n5z:()=>Bi,Ikx:()=>$u,LFG:()=>On,$8M:()=>Yn,NdJ:()=>Nw,CRH:()=>vC,oxw:()=>kr,Q6J:()=>Tw,s9C:()=>fo,iGM:()=>Sm,CHM:()=>El,LSH:()=>ig,kYT:()=>cl,Udp:()=>qo,YNc:()=>fd,_uU:()=>If,Oqu:()=>Bu});var f=U(9765),ne=U(5319),L=U(7574),ce=U(6682),ie=U(8819);function Y(i){for(let s in i)if(i[s]===Y)return s;throw Error("Could not find renamed property on target object.")}function ge(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Q(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Q).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function X(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const V=Y({__forward_ref__:Y});function j(i){return i.__forward_ref__=j,i.toString=function(){return Q(this())},i}function G(i){return ae(i)?i():i}function ae(i){return"function"==typeof i&&i.hasOwnProperty(V)&&i.__forward_ref__===j}class Ee extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function re(i){return"string"==typeof i?i:null==i?"":String(i)}function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():re(i)}function Ct(i,s){const a=s?` in ${s}`:"";throw new Ee("201",`No provider for ${he(i)} found${a}`)}function Vt(i,s){null==i&&function(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function un(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vn(i){return{providers:i.providers||[],imports:i.imports||[]}}function zn(i){return Pt(i,ns)||Pt(i,er)}function Pt(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ri(i){return i&&(i.hasOwnProperty(De)||i.hasOwnProperty(Hn))?i[De]:null}const ns=Y({\u0275prov:Y}),De=Y({\u0275inj:Y}),er=Y({ngInjectableDef:Y}),Hn=Y({ngInjectorDef:Y});var Ge=(()=>((Ge=Ge||{})[Ge.Default=0]="Default",Ge[Ge.Host=1]="Host",Ge[Ge.Self=2]="Self",Ge[Ge.SkipSelf=4]="SkipSelf",Ge[Ge.Optional=8]="Optional",Ge))();let Bt;function Ur(i){const s=Bt;return Bt=i,s}function Ye(i,s,a){const u=zn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Ge.Optional?null:void 0!==s?s:void Ct(Q(i),"Injector")}function Tt(i){return{toString:i}.toString()}var Dt=(()=>((Dt=Dt||{})[Dt.OnPush=0]="OnPush",Dt[Dt.Default=1]="Default",Dt))(),Oe=(()=>((Oe=Oe||{})[Oe.Emulated=0]="Emulated",Oe[Oe.None=2]="None",Oe[Oe.ShadowDom=3]="ShadowDom",Oe))();const Qe="undefined"!=typeof globalThis&&globalThis,fc="undefined"!=typeof window&&window,$s="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ct=Qe||"undefined"!=typeof global&&global||fc||$s,z={},$=[],K=Y({\u0275cmp:Y}),we=Y({\u0275dir:Y}),oe=Y({\u0275pipe:Y}),Be=Y({\u0275mod:Y}),dt=Y({\u0275loc:Y}),kt=Y({\u0275fac:Y}),xn=Y({__NG_ELEMENT_ID__:Y});let Rn=0;function br(i){return Tt(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||$,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Oe.Emulated,id:"c",styles:i.styles||$,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,_=i.pipes;return u.id+=Rn++,u.inputs=To(i.inputs,a),u.outputs=To(i.outputs),h&&h.forEach(v=>v(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(lr):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(bo):null,u})}function lr(i){return Zn(i)||function(i){return i[we]||null}(i)}function bo(i){return function(i){return i[oe]||null}(i)}const ll={};function Io(i){return Tt(()=>{const s={type:i.type,bootstrap:i.bootstrap||$,declarations:i.declarations||$,imports:i.imports||$,exports:i.exports||$,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ll[i.id]=i.type),s})}function cl(i,s){return Tt(()=>{const a=gi(i,!0);a.declarations=s.declarations||$,a.imports=s.imports||$,a.exports=s.exports||$})}function To(i,s){if(null==i)return z;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=u,s&&(s[c]=h)}return a}const gc=br;function pi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zn(i){return i[K]||null}function gi(i,s){const a=i[Be]||null;if(!a&&!0===s)throw new Error(`Type ${Q(i)} does not have '\u0275mod' property.`);return a}function hn(i){return Array.isArray(i)&&"object"==typeof i[1]}function hr(i){return Array.isArray(i)&&!0===i[1]}function Kd(i){return 0!=(8&i.flags)}function su(i){return 2==(2&i.flags)}function dl(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function ki(i){return 0!=(512&i[2])}function is(i,s){return i.hasOwnProperty(kt)?i[kt]:null}class cu{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Oi(){return du}function du(i){return i.type.prototype.ngOnChanges&&(i.setInput=Dr),p_}function p_(){const i=Ec(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===z)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Dr(i,s,a,u){const c=Ec(i)||function(i,s){return i[ss]=s}(i,{previous:z,current:null}),h=c.current||(c.current={}),_=c.previous,v=this.declaredInputs[a],C=_[v];h[v]=new cu(C&&C.currentValue,s,_===z),i[u]=s}Oi.ngInherit=!0;const ss="__ngSimpleChanges__";function Ec(i){return i[ss]||null}let ha;function So(i){ha=i}function en(i){return!!i.listen}const os={createRenderer:(i,s)=>void 0!==ha?ha:"undefined"!=typeof document?document:void 0};function qt(i){for(;Array.isArray(i);)i=i[0];return i}function xo(i,s){return qt(s[i])}function ni(i,s){return qt(s[i.index])}function zs(i,s){return i.data[s]}function fr(i,s){const a=s[i];return hn(a)?a:a[0]}function ml(i){return 4==(4&i[2])}function _l(i){return 128==(128&i[2])}function Mn(i,s){return null==s?null:i[s]}function fu(i){i[18]=0}function pu(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const nt={lFrame:Dc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gu(){return nt.bindingsEnabled}function be(){return nt.lFrame.lView}function yt(){return nt.lFrame.tView}function El(i){return nt.lFrame.contextLView=i,i[8]}function rn(){let i=wl();for(;null!==i&&64===i.type;)i=i.parent;return i}function wl(){return nt.lFrame.currentTNode}function Ar(i,s){const a=nt.lFrame;a.currentTNode=i,a.isParent=s}function pa(){return nt.lFrame.isParent}function ga(){return nt.isInCheckNoChangesMode}function ma(i){nt.isInCheckNoChangesMode=i}function Li(){return nt.lFrame.bindingIndex++}function yu(i,s){const a=nt.lFrame;a.bindingIndex=a.bindingRootIndex=i,vu(s)}function vu(i){nt.lFrame.currentDirectiveIndex=i}function bl(){return nt.lFrame.currentQueryIndex}function _a(i){nt.lFrame.currentQueryIndex=i}function ya(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Tc(i,s,a){if(a&Ge.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&Ge.Host||(c=ya(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const u=nt.lFrame=lh();return u.currentTNode=s,u.lView=i,!0}function Ro(i){const s=lh(),a=i[1];nt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function lh(){const i=nt.lFrame,s=null===i?null:i.child;return null===s?Dc(i):s}function Dc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ch(){const i=nt.lFrame;return nt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const dh=ch;function Es(){const i=ch();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return nt.lFrame.selectedIndex}function va(i){nt.lFrame.selectedIndex=i}function wn(){const i=nt.lFrame;return zs(i.tView,i.selectedIndex)}function Il(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:S}=h;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ys(i,s,a){Sc(i,s,3,a)}function wu(i,s,a,u){(3&i[2])===a&&Sc(i,s,a,u)}function Tn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Sc(i,s,a,u){const h=null!=u?u:-1,_=s.length-1;let v=0;for(let C=void 0!==u?65535&i[18]:0;C<_;C++)if("number"==typeof s[C+1]){if(v=s[C],null!=u&&v>=u)break}else s[C]<0&&(i[18]+=65536),(v<h||-1==h)&&(Mp(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Mp(i,s,a,u){const c=a[u]<0,h=a[u+1],v=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class Ca{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ph(i,s,a){const u=en(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const _=a[c++],v=a[c++],C=a[c++];u?i.setAttribute(s,v,C,_):s.setAttributeNS(_,v,C)}else{const _=h,v=a[++c];Cs(_)?u&&i.setProperty(s,_,v):u?i.setAttribute(s,_,v):s.setAttribute(_,v),c++}}return c}function kp(i){return 3===i||4===i||6===i}function Cs(i){return 64===i.charCodeAt(0)}function Tl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Op(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Op(i,s,a,u,c){let h=0,_=i.length;if(-1===s)_=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){_=-1;break}if(v>s){_=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===u)return void(null!==c&&(i[h+1]=c));if(u===i[h+1])return void(i[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==_&&(i.splice(_,0,s),h=_+1),i.splice(h++,0,a),null!==u&&i.splice(h++,0,u),null!==c&&i.splice(h++,0,c)}function Rc(i){return-1!==i}function Js(i){return 32767&i}function ri(i,s){let a=function(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Cu=!0;function Ia(i){const s=Cu;return Cu=i,s}let _h=0;function bu(i,s){const a=fn(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,No(u.data,i),No(s,null),No(u.blueprint,null));const c=_n(i,s),h=i.injectorIndex;if(Rc(c)){const _=Js(c),v=ri(c,s),C=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[_+T]|C[_+T]}return s[h+8]=c,h}function No(i,s){i.push(0,0,0,0,0,0,0,0,s)}function fn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function _n(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const h=c[1],_=h.type;if(u=2===_?h.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Mo(i,s,a){!function(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(xn)&&(u=a[xn]),null==u&&(u=a[xn]=_h++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Al(i,s,a){if(a&Ge.Optional)return i;Ct(s,"NodeInjector")}function Ta(i,s,a,u){if(a&Ge.Optional&&void 0===u&&(u=null),0==(a&(Ge.Self|Ge.Host))){const c=i[9],h=Ur(void 0);try{return c?c.get(s,u,a&Ge.Optional):Ye(s,u,a&Ge.Optional)}finally{Ur(h)}}return Al(u,s,a)}function Iu(i,s,a,u=Ge.Default,c){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xn)?i[xn]:void 0;return"number"==typeof s?s>=0?255&s:bs:s}(a);if("function"==typeof h){if(!Tc(s,i,u))return u&Ge.Host?Al(c,a,u):Ta(s,a,u,c);try{const _=h(u);if(null!=_||u&Ge.Optional)return _;Ct(a)}finally{dh()}}else if("number"==typeof h){let _=null,v=fn(i,s),C=-1,T=u&Ge.Host?s[16][6]:null;for((-1===v||u&Ge.SkipSelf)&&(C=-1===v?_n(i,s):s[v+8],-1!==C&&xl(u,!1)?(_=s[1],v=Js(C),s=ri(C,s)):v=-1);-1!==v;){const S=s[1];if(Sl(h,v,S.data)){const P=Is(v,s,a,_,u,T);if(P!==Gr)return P}C=s[v+8],-1!==C&&xl(u,s[1].data[v+8]===T)&&Sl(h,v,s)?(_=S,v=Js(C),s=ri(C,s)):v=-1}}}return Ta(s,a,u,c)}const Gr={};function bs(){return new Ui(rn(),be())}function Is(i,s,a,u,c,h){const _=s[1],v=_.data[i+8],S=Xs(v,_,a,null==u?su(v)&&Cu:u!=_&&0!=(3&v.type),c&Ge.Host&&h===v);return null!==S?Da(s,_,S,v):Gr}function Xs(i,s,a,u,c){const h=i.providerIndexes,_=s.data,v=1048575&h,C=i.directiveStart,S=h>>20,O=c?v+S:i.directiveEnd;for(let H=u?v:v+S;H<O;H++){const Z=_[H];if(H<C&&a===Z||H>=C&&Z.type===a)return H}if(c){const H=_[C];if(H&&Pi(H)&&H.type===a)return C}return null}function Da(i,s,a,u){let c=i[a];const h=s.data;if(function(i){return i instanceof Ca}(c)){const _=c;_.resolving&&function(i,s){throw new Ee("200",`Circular dependency in DI detected for ${i}`)}(he(h[a]));const v=Ia(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?Ur(_.injectImpl):null;Tc(i,u,Ge.Default);try{c=i[a]=_.factory(void 0,h,i,u),s.firstCreatePass&&a>=u.directiveStart&&function(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(u){const _=du(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==C&&Ur(C),Ia(v),_.resolving=!1,dh()}}return c}function Sl(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function xl(i,s){return!(i&Ge.Self||i&Ge.Host&&s)}class Ui{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Iu(this._tNode,this._lView,s,u,a)}}function Bi(i){return Tt(()=>{const s=i.prototype.constructor,a=s[kt]||Aa(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const h=c[kt]||Aa(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Aa(i){return ae(i)?()=>{const s=Aa(G(i));return s&&s()}:is(i)}function Yn(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const h=a[c];if(kp(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(rn(),i)}const Sa="__parameters__";function ji(i,s,a){return Tt(()=>{const u=function(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...h){if(this instanceof c)return u.apply(this,h),this;const _=new c(...h);return v.annotation=_,v;function v(C,T,S){const P=C.hasOwnProperty(Sa)?C[Sa]:Object.defineProperty(C,Sa,{value:[]})[Sa];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),C}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class $t{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=un({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rl=new $t("AnalyzeForEntryComponents"),yi=Function;function sn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),sn(u,s)):s!==i&&s.push(u)}return s}function nr(i,s){i.forEach(a=>Array.isArray(a)?nr(a,s):s(a))}function Tu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Hi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function vi(i,s,a){let u=Su(i,s);return u>=0?i[1|u]=a:(u=~u,function(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Au(i,s){const a=Su(i,s);if(a>=0)return i[1|a]}function Su(i,s){return function(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const h=u+(c-u>>1),_=i[h<<a];if(s===_)return h<<a;_>s?c=h:u=h+1}return~(c<<a)}(i,s,1)}const wt={},tn="__NG_DI_FLAG__",kn="ngTempTokenPath",rr=/\n/gm,ko="__source",$i=Y({provide:String,useValue:Y});let Ei;function Ds(i){const s=Ei;return Ei=i,s}function Ch(i,s=Ge.Default){if(void 0===Ei)throw new Error("inject() must be called from an injection context");return null===Ei?Ye(i,void 0,s):Ei.get(i,s&Ge.Optional?null:void 0,s)}function On(i,s=Ge.Default){return(Bt||Ch)(G(i),s)}function As(i){const s=[];for(let a=0;a<i.length;a++){const u=G(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,h=Ge.Default;for(let _=0;_<u.length;_++){const v=u[_],C=Ma(v);"number"==typeof C?-1===C?c=v.token:h|=C:c=v}s.push(On(c,h))}else s.push(On(u))}return s}function ro(i,s){return i[tn]=s,i.prototype[tn]=s,i}function Ma(i){return i[tn]}function Pa(i,s,a,u){const c=i[kn];throw s[ko]&&c.unshift(s[ko]),i.message=function(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=Q(s);if(Array.isArray(s))c=s.map(Q).join(" -> ");else if("object"==typeof s){let h=[];for(let _ in s)if(s.hasOwnProperty(_)){let v=s[_];h.push(_+":"+("string"==typeof v?JSON.stringify(v):Q(v)))}c=`{${h.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(rr,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[kn]=null,i}const ka=ro(ji("Inject",i=>({token:i})),-1),Ss=ro(ji("Optional"),8),us=ro(ji("SkipSelf"),4);let Ol;function Ll(i){var s;return(null===(s=function(){if(void 0===Ol&&(Ol=null,ct.trustedTypes))try{Ol=ct.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Ol}())||void 0===s?void 0:s.createHTML(i))||i}class Oa{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Yp extends Oa{getTypeName(){return"HTML"}}class hE extends Oa{getTypeName(){return"Style"}}class S_ extends Oa{getTypeName(){return"Script"}}class fE extends Oa{getTypeName(){return"URL"}}class Ih extends Oa{getTypeName(){return"ResourceURL"}}function Lo(i){return i instanceof Oa?i.changingThisBreaksApplicationSecurity:i}function Fa(i,s){const a=Th(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Th(i){return i instanceof Oa&&i.getTypeName()||null}function Qp(i){return new Yp(i)}function x_(i){return new hE(i)}function pE(i){return new S_(i)}function Jp(i){return new fE(i)}function gE(i){return new Ih(i)}class mE{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ll(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Xp{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ll(s),a;const u=this.inertDocument.createElement("body");return u.innerHTML=Ll(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const _=a.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const yE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,vE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vl(i){return(i=String(i)).match(yE)||i.match(vE)?i:"unsafe:"+i}function xs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Ul(...i){const s={};for(const a of i)for(const u in a)a.hasOwnProperty(u)&&(s[u]=!0);return s}const Hc=xs("area,br,col,hr,img,wbr"),R_=xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sh=xs("rp,rt"),tg=Ul(Hc,Ul(R_,xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ul(Sh,xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ul(Sh,R_)),$c=xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),so=xs("srcset"),xh=Ul($c,so,xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),N_=xs("script,style,template");class ng{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!tg.hasOwnProperty(a))return this.sanitizedSomething=!0,!N_.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=s.attributes;for(let c=0;c<u.length;c++){const h=u.item(c),_=h.name,v=_.toLowerCase();if(!xh.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=h.value;$c[v]&&(C=Vl(C)),so[v]&&(i=C,C=(i=String(i)).split(",").map(s=>Vl(s.trim())).join(", ")),this.buf.push(" ",_,'="',Gc(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();tg.hasOwnProperty(a)&&!Hc.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Gc(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const M_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bE=/([^\#-~ |!])/g;function Gc(i){return i.replace(/&/g,"&amp;").replace(M_,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(bE,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rg;function IE(i,s){let a=null;try{rg=rg||function(i){const s=new Xp(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ll(""),"text/html")}catch(i){return!1}}()?new mE(s):s}(i);let u=s?String(s):"";a=rg.getInertBodyElement(u);let c=5,h=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=h,h=a.innerHTML,a=rg.getInertBodyElement(u)}while(u!==h);return Ll((new ng).sanitizeChildren(Rh(a)||a))}finally{if(a){const u=Rh(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Rh(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function ig(i){const s=function(){const i=be();return i&&i[12]}();return s?s.sanitize(Fn.URL,i)||"":Fa(i,"URL")?Lo(i):Vl(re(i))}const qc="__ngContext__";function zr(i,s){i[qc]=s}function Vo(i){const s=function(i){return i[qc]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Wi(i){return i.ngOriginalError}function zc(i,...s){i.error(...s)}class tt{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=this._findContext(s),c=(i=s)&&i.ngErrorLogger||zc;var i;c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(Wi(s)):null}_findOriginalError(s){let a=s&&Wi(s);for(;a&&Wi(a);)a=Wi(a);return a||null}}const j_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ct))();function zi(i){return i instanceof Function?i():i}var y=(()=>((y=y||{})[y.Important=1]="Important",y[y.DashCase=2]="DashCase",y))();function g(i,s){return undefined(i,s)}function N(i){const s=i[3];return hr(s)?s[3]:s}function Me(i){return $e(i[13])}function Re(i){return $e(i[4])}function $e(i){for(;null!==i&&!hr(i);)i=i[4];return i}function vt(i,s,a,u,c){if(null!=u){let h,_=!1;hr(u)?h=u:hn(u)&&(_=!0,u=u[0]);const v=qt(u);0===i&&null!==a?null==c?Zb(s,a,v):Jc(s,a,v,c||null,!0):1===i&&null!==a?Jc(s,a,v,c||null,!0):2===i?function(i,s,a){const u=Gh(i,s);u&&function(i,s,a,u){en(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,v,_):3===i&&s.destroyNode(v),null!=h&&function(i,s,a,u,c){const h=a[7];h!==qt(a)&&vt(s,i,u,h,c);for(let v=10;v<a.length;v++){const C=a[v];Xc(C[1],C,i,s,u,h)}}(s,i,h,a,c)}}function $l(i,s,a){return en(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function Qc(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,pu(c,-1)),a.splice(u,1)}function jh(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&Qc(c,u),s>0&&(i[a-1][4]=u[4]);const h=Hi(i,10+s);!function(i,s){Xc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=h[19];null!==_&&_.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Hh(i,s){if(!(256&s[2])){const a=s[11];en(a)&&a.destroyNode&&Xc(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return dg(i[1],i);for(;s;){let a=null;if(hn(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)hn(s)&&dg(s[1],s),s=s[3];null===s&&(s=i),hn(s)&&dg(s[1],s),a=s&&s[4]}s=a}}(s)}}function dg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof Ca)){const h=a[u+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const v=c[h[_]],C=h[_+1];try{C.call(v)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const _=a[h+1],v="function"==typeof _?_(s):qt(s[_]),C=u[c=a[h+2]],T=a[h+3];"boolean"==typeof T?v.removeEventListener(a[h],C,T):T>=0?u[c=T]():u[c=-T].unsubscribe(),h+=2}else{const _=u[c=a[h+1]];a[h].call(_)}if(null!==u){for(let h=c+1;h<u.length;h++)u[h]();s[7]=null}}(i,s),1===s[1].type&&en(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&hr(s[3])){a!==s[3]&&Qc(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function zb(i,s,a){return function(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Oe.None||c===Oe.Emulated)return null}return ni(u,a)}(i,s.parent,a)}function Jc(i,s,a,u,c){en(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function Zb(i,s,a){en(i)?i.appendChild(s,a):s.appendChild(a)}function fg(i,s,a,u,c){null!==u?Jc(i,s,a,u,c):Zb(i,s,a)}function Gh(i,s){return en(i)?i.parentNode(s):s.parentNode}let RE=function(i,s,a){return 40&i.type?ni(i,a):null};function pg(i,s,a,u){const c=zb(i,u,s),h=s[11],v=function(i,s,a){return RE(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let C=0;C<a.length;C++)fg(h,c,a[C],v,!1);else fg(h,c,a,v,!1)}function gg(i,s){if(null!==s){const a=s.type;if(3&a)return ni(s,i);if(4&a)return K_(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return gg(i,u);{const c=i[s.index];return hr(c)?K_(-1,c):qt(c)}}if(32&a)return g(s,i)()||qt(i[s.index]);{const u=Z_(i,s);return null!==u?Array.isArray(u)?u[0]:gg(N(i[16]),u):gg(i,s.next)}}return null}function Z_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function K_(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return gg(u,c)}return s[7]}function mg(i,s,a,u,c,h,_){for(;null!=a;){const v=u[a.index],C=a.type;if(_&&0===s&&(v&&zr(qt(v),u),a.flags|=4),64!=(64&a.flags))if(8&C)mg(i,s,a.child,u,c,h,!1),vt(s,i,c,v,h);else if(32&C){const T=g(a,u);let S;for(;S=T();)vt(s,i,c,S,h);vt(s,i,c,v,h)}else 16&C?Rr(i,s,u,a,c,h):vt(s,i,c,v,h);a=_?a.projectionNext:a.next}}function Xc(i,s,a,u,c,h){mg(a,u,i.firstChild,s,c,h,!1)}function Rr(i,s,a,u,c,h){const _=a[16],C=_[6].projection[u.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)vt(s,i,c,C[T],h);else mg(i,s,C,_[3],c,h,!0)}function Q_(i,s,a){en(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ME(i,s,a){en(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Qb(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===u||i.charCodeAt(c+h)<=32)return c}a=c+1}}const Jb="ng-template";function ux(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==Qb(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function J_(i){return 4===i.type&&i.value!==Jb}function PE(i,s,a){return s===(4!==i.type||a?i.value:Jb)}function lx(i,s,a){let u=4;const c=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(kp(i[s]))return s;return i.length}(c);let _=!1;for(let v=0;v<s.length;v++){const C=s[v];if("number"!=typeof C){if(!_)if(4&u){if(u=2|1&u,""!==C&&!PE(i,C,a)||""===C&&1===s.length){if(Rs(u))return!1;_=!0}}else{const T=8&u?C:s[++v];if(8&u&&null!==i.attrs){if(!ux(i.attrs,T,a)){if(Rs(u))return!1;_=!0}continue}const P=Xb(8&u?"class":C,c,J_(i),a);if(-1===P){if(Rs(u))return!1;_=!0;continue}if(""!==T){let O;O=P>h?"":c[P+1].toLowerCase();const H=8&u?O:null;if(H&&-1!==Qb(H,T,0)||2&u&&T!==O){if(Rs(u))return!1;_=!0}}}}else{if(!_&&!Rs(u)&&!Rs(C))return!1;if(_&&Rs(C))continue;_=!1,u=C|1&u}}return Rs(u)||_}function Rs(i){return 0==(1&i)}function Xb(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let h=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)h=!0;else{if(1===_||2===_){let v=s[++c];for(;"string"==typeof v;)v=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function eI(i,s,a=!1){for(let u=0;u<s.length;u++)if(lx(i,s[u],a))return!0;return!1}function nI(i,s){return i?":not("+s.trim()+")":s}function _g(i){let s=i[0],a=1,u=2,c="",h=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const v=i[++a];c+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Rs(_)&&(s+=nI(h,c),c=""),u=_,h=h||!Rs(u);a++}return""!==c&&(s+=nI(h,c)),s}const pt={};function yg(i){sI(yt(),be(),Kn()+i,ga())}function sI(i,s,a,u){if(!u)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Ys(s,h,a)}else{const h=i.preOrderHooks;null!==h&&wu(s,h,0,a)}va(a)}function ey(i,s){return i<<17|s<<2}function Ii(i){return i>>17&32767}function Mu(i){return 2|i}function Va(i){return(131068&i)>>2}function qh(i,s){return-131069&i|s<<2}function ed(i){return 1|i}function HE(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],h=a[u+1];if(-1!==h){const _=i.data[h];_a(c),_.contentQueries(2,s[h],h)}}}function bg(i,s,a,u,c,h,_,v,C,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,fu(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=v||i&&i[11],S[12]=C||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=h,S[16]=2==s.type?i[16]:S,S}function Kh(i,s,a,u,c){let h=i.data[s];if(null===h)h=function(i,s,a,u,c){const h=wl(),_=pa(),C=i.data[s]=function(i,s,a,u,c,h){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=C),null!==h&&(_?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,a,u,c),nt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=u,h.attrs=c;const _=function(){const i=nt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return Ar(h,!0),h}function Ua(i,s,a,u){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Ig(i,s,a){Ro(s);try{const u=i.viewQuery;null!==u&&ly(1,u,a);const c=i.template;null!==c&&pI(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&HE(i,s),i.staticViewQueries&&ly(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)xg(i,s[a])}(s,h)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Es()}}function rd(i,s,a,u){const c=s[2];if(256==(256&c))return;Ro(s);const h=ga();try{fu(s),function(i){nt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&pI(i,s,a,2,u);const _=3==(3&c);if(!h)if(_){const T=i.preOrderCheckHooks;null!==T&&Ys(s,T,null)}else{const T=i.preOrderHooks;null!==T&&wu(s,T,0,null),Tn(s,0)}if(function(i){for(let s=Me(i);null!==s;s=Re(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],h=c[3];0==(1024&c[2])&&pu(h,1),c[2]|=1024}}}(s),function(i){for(let s=Me(i);null!==s;s=Re(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];_l(u)&&rd(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&HE(i,s),!h)if(_){const T=i.contentCheckHooks;null!==T&&Ys(s,T)}else{const T=i.contentHooks;null!==T&&wu(s,T,1),Tn(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)va(~c);else{const h=c,_=a[++u],v=a[++u];yu(_,h),v(2,s[h])}}}finally{va(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let a=0;a<s.length;a++)bx(i,s[a])}(s,v);const C=i.viewQuery;if(null!==C&&ly(2,C,u),!h)if(_){const T=i.viewCheckHooks;null!==T&&Ys(s,T)}else{const T=i.viewHooks;null!==T&&wu(s,T,2),Tn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,pu(s[3],-1))}finally{Es()}}function vx(i,s,a,u){const c=s[10],h=!ga(),_=ml(s);try{h&&!_&&c.begin&&c.begin(),_&&Ig(i,s,u),rd(i,s,a,u)}finally{h&&!_&&c.end&&c.end()}}function pI(i,s,a,u,c){const h=Kn(),_=2&u;try{va(-1),_&&s.length>20&&sI(i,s,20,ga()),a(u,c)}finally{va(h)}}function $E(i,s,a){!gu()||(function(i,s,a,u){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||bu(a,s),zr(u,s);const _=a.initialInputs;for(let v=c;v<h;v++){const C=i.data[v],T=Pi(C);T&&Cx(s,a,C);const S=Da(s,i,v,a);zr(S,s),null!==_&&NI(0,v-c,S,C,0,_),T&&(fr(a.index,s)[8]=S)}}(i,s,a,ni(a,s)),128==(128&a.flags)&&function(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,v=nt.lFrame.currentDirectiveIndex;try{va(_);for(let C=u;C<c;C++){const T=i.data[C],S=s[C];vu(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Jh(T,S)}}finally{va(-1),vu(v)}}(i,s,a))}function id(i,s,a=ni){const u=s.localNames;if(null!==u){let c=s.index+1;for(let h=0;h<u.length;h+=2){const _=u[h+1],v=-1===_?a(s,i):i[_];i[c++]=v}}}function Ou(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Tg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Tg(i,s,a,u,c,h,_,v,C,T){const S=20+u,P=S+c,O=function(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:pt);return a}(S,P),H="function"==typeof T?T():T;return O[1]={type:i,blueprint:O,template:a,queries:null,viewQuery:v,declTNode:s,data:O.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:H,incompleteFirstPass:!1}}function yI(i,s,a,u){const c=cy(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&YE(i).push(u,c.length-1))}function EI(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Zi(i,s,a,u,c,h,_,v){const C=ni(s,a);let S,T=s.inputs;!v&&null!=T&&(S=T[u])?(JE(i,a,S,u,c),su(s)&&function(i,s){const a=fr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,en(h)?h.setProperty(C,u,c):Cs(u)||(C.setProperty?C.setProperty(u,c):C[u]=c))}function Yh(i,s,a,u){let c=!1;if(gu()){const h=function(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let h=0;h<u.length;h++){const _=u[h];eI(a,_.selectors,!1)&&(c||(c=[]),Mo(bu(a,s),i,_.type),Pi(_)?(AI(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==h){c=!0,xI(a,i.data.length,h.length);for(let S=0;S<h.length;S++){const P=h[S];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,T=Ua(i,s,h.length,null);for(let S=0;S<h.length;S++){const P=h[S];a.mergedAttrs=Tl(a.mergedAttrs,P.hostAttrs),RI(i,a,s,T,P),SI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const O=P.type.prototype;!v&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!C&&(O.ngOnChanges||O.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const u=s.directiveEnd,c=i.data,h=s.attrs,_=[];let v=null,C=null;for(let T=s.directiveStart;T<u;T++){const S=c[T],P=S.inputs,O=null===h||J_(s)?null:MI(P,h);_.push(O),v=EI(P,T,v),C=EI(S.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=v,s.outputs=C}(i,a)}_&&function(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new Ee("301",`Export of name '${s[c+1]}' not found!`);u.push(s[c],h)}}}(a,u,_)}return a.mergedAttrs=Tl(a.mergedAttrs,a.attrs),c}function Qh(i,s,a,u,c,h){const _=h.hostBindings;if(_){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=C&&v.push(C),v.push(u,c,_)}}function Jh(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function AI(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function SI(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Pi(s)&&(a[""]=i)}}function xI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function RI(i,s,a,u,c){i.data[u]=c;const h=c.factory||(c.factory=is(c.type)),_=new Ca(h,Pi(c),null);i.blueprint[u]=_,a[u]=_,Qh(i,s,0,u,Ua(i,a,c.hostVars,pt),c)}function Cx(i,s,a){const u=ni(s,i),c=Ou(a),h=i[10],_=Xh(i,bg(i,c,null,a.onPush?64:16,u,s,h,h.createRenderer(u,a),null,null));i[s.index]=_}function Ba(i,s,a,u,c,h){const _=ni(i,s);!function(i,s,a,u,c,h,_){if(null==h)en(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const v=null==_?re(h):_(h,u||"",c);en(i)?i.setAttribute(s,c,v,a):a?s.setAttributeNS(a,c,v):s.setAttribute(c,v)}}(s[11],_,h,i.value,a,u,c)}function NI(i,s,a,u,c,h){const _=h[s];if(null!==_){const v=u.setInput;for(let C=0;C<_.length;){const T=_[C++],S=_[C++],P=_[C++];null!==v?u.setInput(a,P,T,S):a[S]=P}}}function MI(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function ZE(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function bx(i,s){const a=fr(s,i);if(_l(a)){const u=a[1];80&a[2]?rd(u,a,u.template,a[8]):a[5]>0&&Sg(a)}}function Sg(i){for(let u=Me(i);null!==u;u=Re(u))for(let c=10;c<u.length;c++){const h=u[c];if(1024&h[2]){const _=h[1];rd(_,h,_.template,h[8])}else h[5]>0&&Sg(h)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=fr(a[u],i);_l(c)&&c[5]>0&&Sg(c)}}function xg(i,s){const a=fr(s,i),u=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Ig(u,a,a[8])}function Xh(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ef(i){for(;i;){i[2]|=64;const s=N(i);if(ki(i)&&!s)return i;i=s}return null}function tf(i,s,a){const u=s[10];u.begin&&u.begin();try{rd(i,s,i.template,a)}catch(c){throw QE(s,c),c}finally{u.end&&u.end()}}function FI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Vo(a),c=u[1];vx(c,u,c.template,a)}}(i[8])}function ly(i,s,a){_a(0),s(i,a)}const KE=(()=>Promise.resolve(null))();function cy(i){return i[7]||(i[7]=[])}function YE(i){return i.cleanup||(i.cleanup=[])}function QE(i,s){const a=i[9],u=a?a.get(tt,null):null;u&&u.handleError(s)}function JE(i,s,a,u,c){for(let h=0;h<a.length;){const _=a[h++],v=a[h++],C=s[_],T=i.data[_];null!==T.setInput?T.setInput(C,c,u,v):C[v]=c}}function Ki(i,s,a){const u=xo(s,i);!function(i,s,a){en(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Pg(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let _=0;_<s.length;_++){const v=s[_];"number"==typeof v?h=v:1==h?c=X(c,v):2==h&&(u=X(u,v+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const Lu=new $t("INJECTOR",-1);class ds{get(s,a=wt){if(a===wt){const u=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw u.name="NullInjectorError",u}return a}}const nf=new $t("Set Injector scope."),rf={},sf={};let XE;function BI(){return void 0===XE&&(XE=new ds),XE}function jI(i,s=null,a=null,u){return new Dx(i,a,s||BI(),u)}class Dx{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&nr(a,v=>this.processProvider(v,s,a)),nr([s],v=>this.processInjectorType(v,[],h)),this.records.set(Lu,sd(void 0,this));const _=this.records.get(nf);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:Q(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=wt,u=Ge.Default){this.assertNotDestroyed();const c=Ds(this),h=Ur(void 0);try{if(!(u&Ge.SkipSelf)){let v=this.records.get(s);if(void 0===v){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof $t)&&zn(s);v=C&&this.injectableDefInScope(C)?sd(dy(s),rf):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Ge.Self?BI():this.parent).get(s,a=u&Ge.Optional&&a===wt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[kn]=_[kn]||[]).unshift(Q(s)),c)throw _;return Pa(_,s,"R3InjectorError",this.source)}throw _}finally{Ur(h),Ds(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(Q(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,u){if(!(s=G(s)))return!1;let c=Ri(s);const h=null==c&&s.ngModule||void 0,_=void 0===h?s:h,v=-1!==u.indexOf(_);if(void 0!==h&&(c=Ri(h)),null==c)return!1;if(null!=c.imports&&!v){let S;u.push(_);try{nr(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:O,providers:H}=S[P];nr(H,Z=>this.processProvider(Z,O,H||$))}}this.injectorDefTypes.add(_);const C=is(_)||(()=>new _);this.records.set(_,sd(C,rf));const T=c.providers;if(null!=T&&!v){const S=s;nr(T,P=>this.processProvider(P,S,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,u){let c=Zl(s=G(s))?s:G(s&&s.provide);const h=Zr(i=s)?sd(void 0,i.useValue):sd(HI(i),rf);var i;if(Zl(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=sd(void 0,rf,!0),_.factory=()=>As(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===rf&&(a.value=sf,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=G(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function dy(i){const s=zn(i),a=null!==s?s.factory:is(i);if(null!==a)return a;if(i instanceof $t)throw new Error(`Token ${Q(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${Q(i)}: (${u.join(", ")}).`)}const a=function(i){const s=i&&(i[ns]||i[er]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function HI(i,s,a){let u;if(Zl(i)){const c=G(i);return is(c)||dy(c)}if(Zr(i))u=()=>G(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...As(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>On(G(i.useExisting));else{const c=G(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return is(c)||dy(c);u=()=>new c(...As(i.deps))}return u}function sd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Zr(i){return null!==i&&"object"==typeof i&&$i in i}function Zl(i){return"function"==typeof i}const ot=function(i,s,a){return function(i,s=null,a=null,u){const c=jI(i,s,a,u);return c._resolveInjectorDefTypes(),c}({name:a},s,i,a)};let Un=(()=>{class i{static create(a,u){return Array.isArray(a)?ot(a,u,""):ot(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=wt,i.NULL=new ds,i.\u0275prov=un({token:i,providedIn:"any",factory:()=>On(Lu)}),i.__NG_ELEMENT_ID__=-1,i})();function ja(i,s){Il(Vo(i)[1],rn())}function _y(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(Pi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Fg(i.inputs),_.declaredInputs=Fg(i.declaredInputs),_.outputs=Fg(i.outputs);const v=c.hostBindings;v&&uw(i,v);const C=c.viewQuery,T=c.contentQueries;if(C&&yy(i,C),T&&aw(i,T),ge(i.inputs,c.inputs),ge(i.declaredInputs,c.declaredInputs),ge(i.outputs,c.outputs),Pi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let _=0;_<h.length;_++){const v=h[_];v&&v.ngInherit&&v(i),v===_y&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=Tl(c.hostAttrs,a=Tl(a,c.hostAttrs))}}(u)}function Fg(i){return i===z?{}:i===$?[]:i}function yy(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function aw(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,h)=>{s(u,c,h),a(u,c,h)}:s}function uw(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Ql=null;function sr(){if(!Ql){const i=ct.Symbol;if(i&&i.iterator)Ql=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ql=u)}}}return Ql}function Lg(i){return!!cw(i)&&(Array.isArray(i)||!(i instanceof Map)&&sr()in i)}function cw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function cn(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function dw(i,s,a,u){const c=be();return cn(c,Li(),s)&&(yt(),Ba(wn(),c,i,s,a,u)),dw}function cf(i,s,a,u){return cn(i,Li(),a)?s+re(a)+u:pt}function fd(i,s,a,u,c,h,_,v){const C=be(),T=yt(),S=i+20,P=T.firstCreatePass?function(i,s,a,u,c,h,_,v,C){const T=s.consts,S=Kh(s,i,4,_||null,Mn(T,v));Yh(s,a,S,Mn(T,C)),Il(s,S);const P=S.tViews=Tg(2,S,u,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,T,C,s,a,u,c,h,_):T.data[S];Ar(P,!1);const O=C[11].createComment("");pg(T,C,O,P),zr(O,C),Xh(C,C[S]=ZE(O,C,O,P)),dl(P)&&$E(T,C,P),null!=_&&id(C,P,v)}function Kg(i,s=Ge.Default){const a=be();return null===a?On(i,s):Iu(rn(),a,G(i),s)}function Tw(i,s,a){const u=be();return cn(u,Li(),s)&&Zi(yt(),wn(),u,i,s,u[11],a,!1),Tw}function Ay(i,s,a,u,c){const _=c?"class":"style";JE(i,a,s.inputs[_],_,u)}function on(i,s,a,u){const c=be(),h=yt(),_=20+i,v=c[11],C=c[_]=$l(v,s,nt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,u,c,h,_){const v=s.consts,T=Kh(s,i,2,c,Mn(v,h));return Yh(s,a,T,Mn(v,_)),null!==T.attrs&&Pg(T,T.attrs,!1),null!==T.mergedAttrs&&Pg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,h,c,0,s,a,u):h.data[_];Ar(T,!0);const S=T.mergedAttrs;null!==S&&ph(v,C,S);const P=T.classes;null!==P&&ME(v,C,P);const O=T.styles;null!==O&&Q_(v,C,O),64!=(64&T.flags)&&pg(h,c,C,T),0===nt.lFrame.elementDepthCount&&zr(C,c),nt.lFrame.elementDepthCount++,dl(T)&&($E(h,c,T),function(i,s,a){if(Kd(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const _=i.data[h];_.contentQueries&&_.contentQueries(1,a[h],h)}}}(h,T,c)),null!==u&&id(c,T)}function Dw(){let i=rn();pa()?nt.lFrame.isParent=!1:(i=i.parent,Ar(i,!1));const s=i;nt.lFrame.elementDepthCount--;const a=yt();a.firstCreatePass&&(Il(a,i),Kd(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ay(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ay(a,s,be(),s.stylesWithoutHost,!1)}function Yg(i,s,a,u){on(i,s,a,u),Dw()}function Sw(){return be()}function xw(i){return!!i&&"function"==typeof i.then}function Rw(i){return!!i&&"function"==typeof i.subscribe}const xy=Rw;function Nw(i,s,a,u){const c=be(),h=yt(),_=rn();return function(i,s,a,u,c,h,_,v){const C=dl(u),S=i.firstCreatePass&&YE(i),P=s[8],O=cy(s);let H=!0;if(3&u.type||v){const te=ni(u,s),Ne=v?v(te):te,ve=O.length,Ke=v?at=>v(qt(at[u.index])):u.index;if(en(a)){let at=null;if(!v&&C&&(at=function(i,s,a,u){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const _=c[h];if(_===a&&c[h+1]===u){const v=s[7],C=c[h+2];return v.length>C?v[C]:null}"string"==typeof _&&(h+=2)}return null}(i,s,c,u.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=h,at.__ngLastListenerFn__=h,H=!1;else{h=Pw(u,s,P,h,!1);const Ft=a.listen(Ne,c,h);O.push(h,Ft),S&&S.push(c,Ke,ve,ve+1)}}else h=Pw(u,s,P,h,!0),Ne.addEventListener(c,h,_),O.push(h),S&&S.push(c,Ke,ve,_)}else h=Pw(u,s,P,h,!1);const Z=u.outputs;let ue;if(H&&null!==Z&&(ue=Z[c])){const te=ue.length;if(te)for(let Ne=0;Ne<te;Ne+=2){const Cr=s[ue[Ne]][ue[Ne+1]].subscribe(h),Qr=O.length;O.push(h,Cr),S&&S.push(c,u.index,Qr,-(Qr+1))}}}(h,c,c[11],_,i,s,!!a,u),Nw}function Mw(i,s,a,u){try{return!1!==a(u)}catch(c){return QE(i,c),!1}}function Pw(i,s,a,u,c){return function h(_){if(_===Function)return u;const v=2&i.flags?fr(i.index,s):s;0==(32&s[2])&&ef(v);let C=Mw(s,0,u,_),T=h.__ngNextListenerFn__;for(;T;)C=Mw(s,0,T,_)&&C,T=T.__ngNextListenerFn__;return c&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function kr(i=1){return function(i){return(nt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,nt.lFrame.contextLView))[8]}(i)}function fo(i,s,a){return em(i,"",s,"",a),fo}function em(i,s,a,u,c){const h=be(),_=cf(h,s,a,u);return _!==pt&&Zi(yt(),wn(),h,i,_,h[11],c,!1),em}function Uw(i,s,a,u,c){const h=i[a+1],_=null===s;let v=u?Ii(h):Va(h),C=!1;for(;0!==v&&(!1===C||_);){const S=i[v+1];_T(i[v],s)&&(C=!0,i[v+1]=u?ed(S):Mu(S)),v=u?Ii(S):Va(S)}C&&(i[a+1]=u?Mu(h):ed(h))}function _T(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Su(i,s)>=0}function qo(i,s,a){return Wo(i,s,a,!1),qo}function Hw(i,s){return Wo(i,s,null,!0),Hw}function Wo(i,s,a,u){const c=be(),h=yt(),_=function(i){const s=nt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function(i,s,a,u){const c=i.data;if(null===c[a+1]){const h=c[Kn()],_=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,u)&&null===s&&!_&&(s=!1),s=function(i,s,a,u){const c=function(i){const s=nt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Ga(a=Ko(null,i,s,a,u),s.attrs,u),h=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Ko(c,i,s,a,u),null===h){let C=function(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Va(u))return i[Ii(u)]}(i,s,u);void 0!==C&&Array.isArray(C)&&(C=Ko(null,i,s,C[1],u),C=Ga(C,s.attrs,u),function(i,s,a,u){i[Ii(a?s.classBindings:s.styleBindings)]=u}(i,s,u,C))}else h=function(i,s,a){let u;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)u=Ga(u,i[h].hostAttrs,a);return Ga(u,s.attrs,a)}(i,s,u)}return void 0!==h&&(u?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,u),function(i,s,a,u,c,h){let _=h?s.classBindings:s.styleBindings,v=Ii(_),C=Va(_);i[u]=a;let S,T=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Su(P,S)>0)&&(T=!0)}else S=a;if(c)if(0!==C){const O=Ii(i[v+1]);i[u+1]=ey(O,v),0!==O&&(i[O+1]=qh(i[O+1],u)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],u)}else i[u+1]=ey(v,0),0!==v&&(i[v+1]=qh(i[v+1],u)),v=u;else i[u+1]=ey(C,0),0===v?v=u:i[C+1]=qh(i[C+1],u),C=u;T&&(i[u+1]=Mu(i[u+1])),Uw(i,S,u,!0),Uw(i,S,u,!1),function(i,s,a,u,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Su(h,s)>=0&&(a[u+1]=ed(a[u+1]))}(s,S,i,u,h),_=ey(v,C),h?s.classBindings=_:s.styleBindings=_}(c,h,s,a,_,u)}}(h,i,_,u),s!==pt&&cn(c,_,s)&&function(i,s,a,u,c,h,_,v){if(!(3&s.type))return;const C=i.data,T=C[v+1];_d(function(i){return 1==(1&i)}(T)?Se(C,s,a,c,Va(T),_):void 0)||(_d(h)||function(i){return 2==(2&i)}(T)&&(h=Se(C,null,a,c,v,_)),function(i,s,a,u,c){const h=en(i);if(s)c?h?i.addClass(a,u):a.classList.add(u):h?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:y.DashCase;if(null==c)h?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const v="string"==typeof c&&c.endsWith("!important");v&&(c=c.slice(0,-10),_|=y.Important),h?i.setStyle(a,u,c,_):a.style.setProperty(u,c,v?"important":"")}}}(u,_,xo(Kn(),a),c,h))}(h,h.data[Kn()],c,c[11],i,c[_+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Q(Lo(i)))),i}(s,a),u,_)}function Ko(i,s,a,u,c){let h=null;const _=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<_&&(h=s[v],u=Ga(u,h.hostAttrs,c),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),u}function Ga(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const _=s[h];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),vi(i,_,!!a||s[++h]))}return void 0===i?null:i}function Se(i,s,a,u,c,h){const _=null===s;let v;for(;c>0;){const C=i[c],T=Array.isArray(C),S=T?C[1]:C,P=null===S;let O=a[c+1];O===pt&&(O=P?$:void 0);let H=P?Au(O,u):S===u?O:void 0;if(T&&!_d(H)&&(H=Au(C,u)),_d(H)&&(v=H,_))return v;const Z=i[c+1];c=_?Ii(Z):Va(Z)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(v=Au(C,u))}return v}function _d(i){return void 0!==i}function If(i,s=""){const a=be(),u=yt(),c=i+20,h=u.firstCreatePass?Kh(u,c,1,s,null):u.data[c],_=a[c]=function(i,s){return en(i)?i.createText(s):i.createTextNode(s)}(a[11],s);pg(u,a,_,h),Ar(h,!1)}function Bu(i){return Gw("",i,""),Bu}function Gw(i,s,a){const u=be(),c=cf(u,i,s,a);return c!==pt&&Ki(u,Kn(),c),Gw}function $u(i,s,a){const u=be();return cn(u,Li(),s)&&Zi(yt(),wn(),u,i,s,u[11],a,!0),$u}const po=void 0;var tc=["en",[["a","p"],["AM","PM"],po],[["AM","PM"],po,po],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],po,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],po,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",po,"{1} 'at' {0}",po],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let go={};function ky(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=FT(s);if(a)return a;const u=s.split("-")[0];if(a=FT(u),a)return a;if("en"===u)return tc;throw new Error(`Missing locale data for the locale "${i}".`)}function OT(i){return ky(i)[et.PluralCase]}function FT(i){return i in go||(go[i]=ct.ng&&ct.ng.common&&ct.ng.common.locales&&ct.ng.common.locales[i]),go[i]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const Oy="en-US";let Fy=Oy;function im(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(Fy=i.toLowerCase().replace(/_/g,"-"))}function Pf(i,s,a,u,c){if(i=G(i),Array.isArray(i))for(let h=0;h<i.length;h++)Pf(i[h],s,a,u,c);else{const h=yt(),_=be();let v=Zl(i)?i:G(i.provide),C=HI(i);const T=rn(),S=1048575&T.providerIndexes,P=T.directiveStart,O=T.providerIndexes>>20;if(Zl(i)||!i.multi){const H=new Ca(C,c,Kg),Z=nc(v,s,c?S:S+O,P);-1===Z?(Mo(bu(T,_),h,v),dm(h,i,s.length),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(H),_.push(H)):(a[Z]=H,_[Z]=H)}else{const H=nc(v,s,S+O,P),Z=nc(v,s,S,S+O),ue=H>=0&&a[H],te=Z>=0&&a[Z];if(c&&!te||!c&&!ue){Mo(bu(T,_),h,v);const Ne=function(i,s,a,u,c){const h=new Ca(i,a,Kg);return h.multi=[],h.index=s,h.componentProviders=0,I0(h,c,u&&!a),h}(c?uR:T0,a.length,c,u,C);!c&&te&&(a[Z].providerFactory=Ne),dm(h,i,s.length,0),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Ne),_.push(Ne)}else dm(h,i,H>-1?H:Z,I0(a[c?Z:H],C,!c&&u));!c&&u&&te&&a[Z].componentProviders++}}}function dm(i,s,a,u){const c=Zl(s);if(c||function(i){return!!i.useClass}(s)){const _=(s.useClass||s).prototype.ngOnDestroy;if(_){const v=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const C=v.indexOf(a);-1===C?v.push(a,[u,_]):v[C+1].push(u,_)}else v.push(a,_)}}}function I0(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function nc(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function T0(i,s,a,u){return D0(this.multi,[])}function uR(i,s,a,u){const c=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=Da(a,a[1],this.providerFactory.index,u);h=v.slice(0,_),D0(c,h);for(let C=_;C<v.length;C++)h.push(v[C])}else h=[],D0(c,h);return h}function D0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function A0(i,s=[]){return a=>{a.providersResolver=(u,c)=>function(i,s,a){const u=yt();if(u.firstCreatePass){const c=Pi(i);Pf(a,u.data,u.blueprint,c,!0),Pf(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Zy{}const Ky="ngComponent";class S0{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${Q(i)}. Did you add it to @NgModule.entryComponents?`);return s[Ky]=i,s}(s)}}let kf=(()=>{class i{}return i.NULL=new S0,i})();function Of(...i){}function Os(i,s){return new Jo(ni(i,s))}const Lf=function(){return Os(rn(),be())};let Jo=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Lf,i})();function bd(i){return i instanceof Jo?i.nativeElement:i}class Yy{}let R0=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>M0(),i})();const M0=function(){const i=be(),a=fr(rn().index,i);return function(i){return i[11]}(hn(a)?a:i)};let pm=(()=>{class i{}return i.\u0275prov=un({token:i,providedIn:"root",factory:()=>null}),i})();class Qy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const P0=new Qy("12.2.14");class k0{constructor(){}supports(s){return Lg(s)}create(s){return new oD(s)}}const hR=(i,s)=>s;class oD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hR}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,h=null;for(;a||u;){const _=!u||a&&a.currentIndex<cD(u,c,h)?a:u,v=cD(_,c,h),C=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{h||(h=[]);const T=v-c,S=C-c;if(T!=S){for(let O=0;O<T;O++){const H=O<h.length?h[O]:h[O]=0,Z=H+O;S<=Z&&Z<T&&(h[O]=H+1)}h[_.previousIndex]=S-T}}v!==C&&s(_,v,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Lg(s))throw new Error(`Error trying to diff '${Q(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],_=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,h,_,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,_,v),u=!0),a=a._next}else c=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[sr()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,v=>{_=this._trackByFn(c,v),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,v,_,c)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new aD(a,u),h,c),s}_verifyReinsertion(s,a,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new lD),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class aD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class lD{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new uD,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cD(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class dD{constructor(){}supports(s){return s instanceof Map||cw(s)}create(){return new pR}}class pR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||cw(s)))throw new Error(`Error trying to diff '${Q(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,_=c._next;return h&&(h._next=_),_&&(_._prev=h),c._next=null,c._prev=null,c}const u=new O0(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class O0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jy(){return new Vf([new k0])}let Vf=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Jy()),deps:[[i,new us,new Ss]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=un({token:i,providedIn:"root",factory:Jy}),i})();function Xy(){return new ev([new dD])}let ev=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Xy()),deps:[[i,new us,new Ss]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=un({token:i,providedIn:"root",factory:Xy}),i})();function Uf(i,s,a,u,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&u.push(qt(h)),hr(h))for(let v=10;v<h.length;v++){const C=h[v],T=C[1].firstChild;null!==T&&Uf(C[1],C,T,u)}const _=a.type;if(8&_)Uf(i,s,a.child,u);else if(32&_){const v=g(a,s);let C;for(;C=v();)u.push(C)}else if(16&_){const v=Z_(s,a);if(Array.isArray(v))u.push(...v);else{const C=N(s[16]);Uf(C[1],C,v,u,!0)}}a=c?a.projectionNext:a.next}return u}class Bf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Uf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(hr(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(jh(s,u),Hi(a,u))}this._attachedToViewContainer=!1}Hh(this._lView[1],this._lView)}onDestroy(s){yI(this._lView[1],this._lView,null,s)}markForCheck(){ef(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){tf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){ma(!0);try{tf(i,s,a)}finally{ma(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Xc(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class F0 extends Bf{constructor(s){super(s),this._view=s}detectChanges(){FI(this._view)}checkNoChanges(){!function(i){ma(!0);try{FI(i)}finally{ma(!1)}}(this._view)}get context(){return null}}const L0=function(i){return function(i,s,a){if(su(i)&&!a){const u=fr(i.index,s);return new Bf(u,u)}return 47&i.type?new Bf(s[16],s):null}(rn(),be(),16==(16&i))};let mR=(()=>{class i{}return i.__NG_ELEMENT_ID__=L0,i})();const U0=[new dD],B0=new Vf([new k0]),j0=new ev(U0),fD=function(){return jf(rn(),be())};let Id=(()=>{class i{}return i.__NG_ELEMENT_ID__=fD,i})();const vR=Id,$0=class extends vR{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=bg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(u[19]=h.createEmbeddedView(a)),Ig(a,u,s),new Bf(u)}};function jf(i,s){return 4&i.type?new $0(s,i,Os(i,s)):null}class Td{}class tv{}const G0=function(){return W0(rn(),be())};let nv=(()=>{class i{}return i.__NG_ELEMENT_ID__=G0,i})();const wR=nv,rv=class extends wR{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new Ui(this._hostTNode,this._hostLView)}get parentInjector(){const s=_n(this._hostTNode,this._hostLView);if(Rc(s)){const a=ri(s,this._hostLView),u=Js(s);return new Ui(a[1].data[u+8],a)}return new Ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=pD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,h){const _=u||this.parentInjector;if(!h&&null==s.ngModule&&_){const C=_.get(Td,null);C&&(h=C)}const v=s.create(_,c,void 0,h);return this.insert(v.hostView,a),v}insert(s,a){const u=s._lView,c=u[1];if(hr(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],O=new rv(P,P[6],P[3]);O.detach(O.indexOf(s))}}const h=this._adjustIndex(a),_=this._lContainer;!function(i,s,a,u){const c=10+u,h=a.length;u>0&&(a[c-1][4]=s),u<h-10?(s[4]=a[c],Tu(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(c,u,_,h);const v=K_(h,_),C=u[11],T=Gh(C,_[7]);return null!==T&&function(i,s,a,u,c,h){u[0]=c,u[6]=s,Xc(i,u,a,1,c,h)}(c,_[6],C,u,T,v),s.attachToViewContainerRef(),Tu(mm(_),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=pD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=jh(this._lContainer,a);u&&(Hi(mm(this._lContainer),a),Hh(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=jh(this._lContainer,a);return u&&null!=Hi(mm(this._lContainer),a)?new Bf(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function pD(i){return i[8]}function mm(i){return i[8]||(i[8]=[])}function W0(i,s){let a;const u=s[i.index];if(hr(u))a=u;else{let c;if(8&i.type)c=qt(u);else{const h=s[11];c=h.createComment("");const _=ni(i,s);Jc(h,Gh(h,_),c,function(i,s){return en(i)?i.nextSibling(s):s.nextSibling}(h,_),!1)}s[i.index]=a=ZE(u,s,c,i),Xh(s,a)}return new rv(a,i,s)}const Zu={};class Qf extends kf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Zn(s);return new Jf(a,this.ngModule)}}function Ku(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const SD=new $t("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>j_});class Jf extends Zy{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(_g).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ku(this.componentDef.inputs)}get outputs(){return Ku(this.componentDef.outputs)}create(s,a,u,c){const h=(c=c||this.ngModule)?function(i,s){return{get:(a,u,c)=>{const h=i.get(a,Zu,c);return h!==Zu||u===Zu?h:s.get(a,u,c)}}}(s,c.injector):s,_=h.get(Yy,os),v=h.get(pm,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,a){if(en(i))return i.selectRootElement(s,a===Oe.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(C,u,this.componentDef.encapsulation):$l(_.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,O=function(i,s){return{components:[],scheduler:i||j_,clean:KE,playerHandler:s||null,flags:0}}(),H=Tg(0,null,null,1,0,null,null,null,null,null),Z=bg(null,H,O,P,null,null,_,C,v,h);let ue,te;Ro(Z);try{const Ne=function(i,s,a,u,c,h){const _=a[1];a[20]=i;const C=Kh(_,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(Pg(C,T,!0),null!==i&&(ph(c,i,T),null!==C.classes&&ME(c,i,C.classes),null!==C.styles&&Q_(c,i,C.styles)));const S=u.createRenderer(i,s),P=bg(a,Ou(s),null,s.onPush?64:16,a[20],C,u,S,h||null,null);return _.firstCreatePass&&(Mo(bu(C,a),_,s.type),AI(_,C),xI(C,a.length,1)),Xh(a,P),a[20]=P}(S,this.componentDef,Z,_,C);if(S)if(u)ph(C,S,["ng-version",P0.full]);else{const{attrs:ve,classes:Ke}=function(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let h=i[u];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++u]):8===c&&a.push(h);else{if(!Rs(c))break;c=h}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);ve&&ph(C,S,ve),Ke&&Ke.length>0&&ME(C,S,Ke.join(" "))}if(te=zs(H,20),void 0!==a){const ve=te.projection=[];for(let Ke=0;Ke<this.ngContentSelectors.length;Ke++){const at=a[Ke];ve.push(null!=at?Array.from(at):null)}}ue=function(i,s,a,u,c){const h=a[1],_=function(i,s,a){const u=rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),RI(i,u,s,Ua(i,s,1,null),a));const c=Da(s,i,u.directiveStart,u);zr(c,s);const h=ni(u,s);return h&&zr(h,s),c}(h,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(C=>C(_,s)),s.contentQueries){const C=rn();s.contentQueries(1,_,C.directiveStart)}const v=rn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(va(v.index),Qh(a[1],v,0,v.directiveStart,v.directiveEnd,s),Jh(s,_)),_}(Ne,this.componentDef,Z,O,[ja]),Ig(H,Z,null)}finally{Es()}return new jR(this.componentType,ue,Os(te,Z),Z,te)}}class jR extends class{}{constructor(s,a,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new F0(c),this.componentType=s}get injector(){return new Ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Xf=new Map;class WR extends Td{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qf(this);const u=gi(s),c=s[dt]||null;c&&im(c),this._bootstrapComponents=zi(u.bootstrap),this._r3Injector=jI(s,a,[{provide:Td,useValue:this},{provide:kf,useValue:this.componentFactoryResolver}],Q(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Un.THROW_IF_NOT_FOUND,u=Ge.Default){return s===Un||s===Td||s===Lu?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class mv extends tv{constructor(s){super(),this.moduleType=s,null!==gi(s)&&function(i){const s=new Set;!function a(u){const c=gi(u,!0),h=c.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${Q(s)} vs ${Q(s.name)}`)}(h,Xf.get(h),u),Xf.set(h,u));const _=zi(c.imports);for(const v of _)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new WR(this.moduleType,s)}}function gC(i){return s=>{setTimeout(i,void 0,s)}}const Ya=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,h,_;let v=s,C=a||(()=>null),T=u;if(s&&"object"==typeof s){const P=s;v=null===(c=P.next)||void 0===c?void 0:c.bind(P),C=null===(h=P.error)||void 0===h?void 0:h.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(C=gC(C),v&&(v=gC(v)),T&&(T=gC(T)));const S=super.subscribe({next:v,error:C,complete:T});return s instanceof ne.w&&s.add(S),S}};function eN(){return this._results[sr()]()}class yv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=sr(),u=yv.prototype;u[a]||(u[a]=eN)}get changes(){return this._changes||(this._changes=new Ya)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=sn(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],h=s[u];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class GD{constructor(s){this.queryList=s,this.matches=null}clone(){return new GD(this.queryList)}setDirty(){this.queryList.setDirty()}}class mC{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<u;h++){const _=a.getByIndex(h);c.push(this.queries[_.indexInDeclarationView].clone())}return new mC(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==EC(s,a).matches&&this.queries[a].setDirty()}}class qD{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Dm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,h=this.getByIndex(u).embeddedTView(s,c);h&&(h.indexInDeclarationView=u,null!==a?a.push(h):a=[h])}return null!==a?new Dm(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class vv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new vv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(s,a,WD(a,h)),this.matchTNodeWithReadOption(s,a,Xs(a,s,h,!1,!1))}else u===Id?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Xs(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Jo||c===nv||c===Id&&4&a.type)this.addMatch(a.index,-2);else{const h=Xs(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function WD(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function _C(i,s,a,u){return-1===a?function(i,s){return 11&i.type?Os(i,s):4&i.type?jf(i,s):null}(s,i):-2===a?function(i,s,a){return a===Jo?Os(s,i):a===Id?jf(s,i):a===nv?W0(s,i):void 0}(i,s,u):Da(i,i[1],a,s)}function zD(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const h=i.data,_=a.matches,v=[];for(let C=0;C<_.length;C+=2){const T=_[C];v.push(T<0?null:_C(s,h[T],_[C+1],a.metadata.read))}c.matches=v}return c.matches}function Ev(i,s,a,u){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const _=zD(i,s,c,a);for(let v=0;v<h.length;v+=2){const C=h[v];if(C>0)u.push(_[v/2]);else{const T=h[v+1],S=s[-C];for(let P=10;P<S.length;P++){const O=S[P];O[17]===O[3]&&Ev(O[1],O,T,u)}if(null!==S[9]){const P=S[9];for(let O=0;O<P.length;O++){const H=P[O];Ev(H[1],H,T,u)}}}}}return u}function Sm(i){const s=be(),a=yt(),u=bl();_a(u+1);const c=EC(a,u);if(i.dirty&&ml(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?Ev(a,s,u,[]):zD(a,s,c,u);i.reset(h,bd),i.notifyOnChanges()}return!0}return!1}function yC(i,s,a,u){const c=yt();if(c.firstCreatePass){const h=rn();(function(i,s,a){null===i.queries&&(i.queries=new Dm),i.queries.track(new vv(s,a))})(c,new qD(s,a,u),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function(i,s,a){const u=new yv(4==(4&a));yI(i,s,u,u.destroy),null===s[19]&&(s[19]=new mC),s[19].queries.push(new GD(u))}(c,be(),a)}function vC(){return i=be(),s=bl(),i[19].queries[s].queryList;var i,s}function EC(i,s){return i.queries.getByIndex(s)}const Av=new $t("Application Initializer");let rp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Of,this.reject=Of,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(xw(h))a.push(h);else if(xy(h)){const _=new Promise((v,C)=>{h.subscribe({complete:v,error:C})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(On(Av,8))},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();const Sv=new $t("AppId"),PC={provide:Sv,useFactory:function(){return`${Nm()}${Nm()}${Nm()}`},deps:[]};function Nm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uA=new $t("Platform Initializer"),lA=new $t("Platform ID"),cA=new $t("appBootstrapListener");let dA=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();const ac=new $t("LocaleId"),kC=new $t("DefaultCurrencyCode");class hA{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Mm=function(i){return new mv(i)},pA=Mm,FC=function(i){return Promise.resolve(Mm(i))},gA=function(i){const s=Mm(i),u=zi(gi(i).declarations).reduce((c,h)=>{const _=Zn(h);return _&&c.push(new Jf(_)),c},[]);return new hA(s,u)},LC=gA,VC=function(i){return Promise.resolve(gA(i))};let Pm=(()=>{class i{constructor(){this.compileModuleSync=pA,this.compileModuleAsync=FC,this.compileModuleAndAllComponentsSync=LC,this.compileModuleAndAllComponentsAsync=VC}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();const Mv=(()=>Promise.resolve(0))();function km(i){"undefined"==typeof Zone?Mv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ji{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ya(!1),this.onMicrotaskEmpty=new Ya(!1),this.onStable=new Ya(!1),this.onError=new Ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=ct.requestAnimationFrame,s=ct.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ct,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,jC(i),i.isCheckStableRunning=!0,BC(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),jC(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,h,_,v)=>{try{return yA(i),a.invokeTask(c,h,_,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),vA(i)}},onInvoke:(a,u,c,h,_,v,C)=>{try{return yA(i),a.invoke(c,h,_,v,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),vA(i)}},onHasTask:(a,u,c,h)=>{a.hasTask(c,h),u===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,jC(i),BC(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,u,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ji.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ji.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+c,s,mA,Of,Of);try{return h.runTask(_,a,u)}finally{h.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const mA={};function BC(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function jC(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function yA(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function vA(i){i._nesting--,BC(i)}class DN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ya,this.onMicrotaskEmpty=new Ya,this.onStable=new Ya,this.onError=new Ya}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let EA=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ji.assertNotInAngularZone(),km(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())km(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(On(Ji))},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})(),wA=(()=>{class i{constructor(){this._applications=new Map,HC.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return HC.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();class AN{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function SN(i){HC=i}let HC=new AN,CA=!0,Om=!1;function kv(){return Om=!0,CA}function bA(){if(Om)throw new Error("Cannot enable prod mode after platform setup.");CA=!1}let Vs;const AA=new $t("AllowMultipleToken");class wk{constructor(s,a){this.name=s,this.token=a}}function Ov(i,s,a=[]){const u=`Platform: ${s}`,c=new $t(u);return(h=[])=>{let _=$C();if(!_||_.injector.get(AA,!1))if(i)i(a.concat(h).concat({provide:c,useValue:!0}));else{const v=a.concat(h).concat({provide:c,useValue:!0},{provide:nf,useValue:"platform"});!function(i){if(Vs&&!Vs.destroyed&&!Vs.injector.get(AA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Vs=i.get(SA);const s=i.get(uA,null);s&&s.forEach(a=>a())}(Un.create({providers:v,name:u}))}return function(i){const s=$C();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(c)}}function $C(){return Vs&&!Vs.destroyed?Vs:null}let SA=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const v=function(i,s){let a;return a="noop"===i?new DN:("zone.js"===i?void 0:i)||new Ji({enableLongStackTrace:kv(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),C=[{provide:Ji,useValue:v}];return v.run(()=>{const T=Un.create({providers:C,parent:this.injector,name:a.moduleType.name}),S=a.create(T),P=S.injector.get(tt,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const O=v.onError.subscribe({next:H=>{P.handleError(H)}});S.onDestroy(()=>{Lm(this._modules,S),O.unsubscribe()})}),function(i,s,a){try{const u=a();return xw(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,v,()=>{const O=S.injector.get(rp);return O.runInitializers(),O.donePromise.then(()=>(im(S.injector.get(ac,Oy)||Oy),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=Fm({},u);return function(i,s,a){const u=new mv(a);return Promise.resolve(u)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const u=a.injector.get(Fv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${Q(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(On(Un))},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();function Fm(i,s){return Array.isArray(s)?s.reduce(Fm,i):Object.assign(Object.assign({},i),s)}let Fv=(()=>{class i{constructor(a,u,c,h,_){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ji.assertNotInAngularZone(),km(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Ji.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ce.T)(v,C.pipe((0,ie.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=a instanceof Zy?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Td),v=c.create(Un.NULL,[],u||c.selector,h),C=v.location.nativeElement,T=v.injector.get(EA,null),S=T&&v.injector.get(wA);return T&&S&&S.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),Lm(this.components,v),S&&S.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Lm(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(cA,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(On(Ji),On(Un),On(tt),On(kf),On(rp))},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();function Lm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class Tk{}class xk{}const Rk={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Nk=(()=>{class i{constructor(a,u){this._compiler=a,this._config=u||Rk}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,c]=a.split("#");return void 0===c&&(c="default"),U(8255)(u).then(h=>h[c]).then(h=>FN(h,u,c)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[u,c]=a.split("#"),h="NgFactory";return void 0===c&&(c="default",h=""),U(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(_=>_[c+h]).then(_=>FN(_,u,c))}}return i.\u0275fac=function(a){return new(a||i)(On(Pm),On(xk,8))},i.\u0275prov=un({token:i,factory:i.\u0275fac}),i})();function FN(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const PA=function(i){return null},OA=Ov(null,"core",[{provide:lA,useValue:"unknown"},{provide:SA,deps:[Un]},{provide:wA,deps:[]},{provide:dA,deps:[]}]),qN=[{provide:Fv,useClass:Fv,deps:[Ji,Un,tt,kf,rp]},{provide:SD,deps:[Ji],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:rp,useClass:rp,deps:[[new Ss,Av]]},{provide:Pm,useClass:Pm,deps:[]},PC,{provide:Vf,useFactory:function(){return B0},deps:[]},{provide:ev,useFactory:function(){return j0},deps:[]},{provide:ac,useFactory:function(i){return im(i=i||"undefined"!=typeof $localize&&$localize.locale||Oy),i},deps:[[new ka(ac),new Ss,new us]]},{provide:kC,useValue:"USD"}];let zN=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(On(Fv))},i.\u0275mod=Io({type:i}),i.\u0275inj=vn({providers:qN}),i})()},8939:(ze,Ce,U)=>{"use strict";U.d(Ce,{hO:()=>ae,xv:()=>X,Dh:()=>Q,GT:()=>Y,cc:()=>de,on:()=>V,pX:()=>ie});var f=U(7716),ne=U(7841),L=U(3944);ze=U.hmd(ze);const ce=["ngOnDestroy"],ie=(re,he,ye,xe={})=>new Proxy(re,{get:(qe,Ct)=>ye.runOutsideAngular(()=>{var xt;if(re[Ct])return(null===(xt=null==xe?void 0:xe.spy)||void 0===xt?void 0:xt.get)&&xe.spy.get(Ct,re[Ct]),re[Ct];if(ce.indexOf(Ct)>-1)return()=>{};const gt=he.toPromise().then(yn=>{const mt=yn&&yn[Ct];return"function"==typeof mt?mt.bind(yn):mt&&mt.then?mt.then(ut=>ye.run(()=>ut)):ye.run(()=>mt)});return new Proxy(()=>{},{get:(yn,mt)=>gt[mt],apply:(yn,mt,ut)=>gt.then(Gt=>{var lt;const Mt=Gt&&Gt(...ut);return(null===(lt=null==xe?void 0:xe.spy)||void 0===lt?void 0:lt.apply)&&xe.spy.apply(Ct,ut,Mt),Mt})})})}),Y=(re,he)=>{he.forEach(ye=>{Object.getOwnPropertyNames(ye.prototype||ye).forEach(xe=>{Object.defineProperty(re.prototype,xe,Object.getOwnPropertyDescriptor(ye.prototype||ye,xe))})})};class ge{constructor(he){return he}}const Q=new f.OlP("angularfire2.app.options"),X=new f.OlP("angularfire2.app.name");function V(re,he,ye){const qe="object"==typeof ye&&ye||{};qe.name=qe.name||"string"==typeof ye&&ye||"[DEFAULT]";const xt=ne.Z.apps.filter(gt=>gt&&gt.name===qe.name)[0]||he.runOutsideAngular(()=>ne.Z.initializeApp(re,qe));try{JSON.stringify(re)!==JSON.stringify(xt.options)&&j("error",`${xt.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(gt){}return new ge(xt)}const j=(re,...he)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[re](...he)},G={provide:ge,useFactory:V,deps:[Q,f.R0b,[new f.FiY,X]]};let ae=(()=>{class re{constructor(ye){ne.Z.registerVersion("angularfire",L.q4.full,"core"),ne.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ne.Z.registerVersion("angular",f.q4F.full,ye.toString())}static initializeApp(ye,xe){return{ngModule:re,providers:[{provide:Q,useValue:ye},{provide:X,useValue:xe}]}}}return re.\u0275fac=function(ye){return new(ye||re)(f.LFG(f.Lbi))},re.\u0275mod=f.oAB({type:re}),re.\u0275inj=f.cJS({providers:[G]}),re})();function de(re,he,ye,xe,qe){const[,Ct,xt]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===re)||[];if(Ct)return function(re,he){try{return re.toString()===he.toString()}catch(ye){return re===he}}(qe,xt)||(fe("error",`${he} was already initialized on the ${ye} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:qe,was:xt})),Ct;{const gt=xe();return globalThis.\u0275AngularfireInstanceCache.push([re,gt,qe]),gt}}const _e=!!ze.hot,fe=(re,...he)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[re](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3944:(ze,Ce,U)=>{"use strict";U.d(Ce,{q4:()=>Mc,iC:()=>Au,HU:()=>Fc,vb:()=>Tu,JM:()=>nr});var f=U(7716),ne=U(2329),L=U(8239),ce=U(8026),ie=U(3854),Y=U(3910),ge=U(5422),Q=U(6676);const X="@firebase/installations",V="0.5.4",G=`w:${V}`,ae="FIS_v2",he=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(I){return I instanceof ie.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function qe(I){return{token:I.token,requestStatus:2,expiresIn:Gt(I.expiresIn),creationTime:Date.now()}}function Ct(I,A){return xt.apply(this,arguments)}function xt(){return(xt=(0,L.Z)(function*(I,A){const B=(yield A.json()).error;return he.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function gt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function yn(I,{refreshToken:A}){const M=gt(I);return M.append("Authorization",function(I){return`${ae} ${I}`}(A)),M}function mt(I){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function Gt(I){return Number(I.replace("s","000"))}function Mt(I,A){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(I,{fid:A}){const M=xe(I),le={method:"POST",headers:gt(I),body:JSON.stringify({fid:A,authVersion:ae,appId:I.appId,sdkVersion:G})},Ie=yield mt(()=>fetch(M,le));if(Ie.ok){const Ve=yield Ie.json();return{fid:Ve.fid||A,registrationStatus:2,refreshToken:Ve.refreshToken,authToken:qe(Ve.authToken)}}throw yield Ct("Create Installation",Ie)})).apply(this,arguments)}function ul(I){return new Promise(A=>{setTimeout(A,I)})}const ms=/^[cdef][\w-]{21}$/;function Vt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ms.test(M)?M:""}catch(I){return""}}function _s(I){return`${I.appName}!${I.appId}`}const Hs=new Map;function ts(I,A){const M=_s(I);vn(M,A),function(I,A){const M=(!Pt&&"BroadcastChannel"in self&&(Pt=new BroadcastChannel("[Firebase] FID Change"),Pt.onmessage=I=>{vn(I.data.key,I.data.fid)}),Pt);M&&M.postMessage({key:I,fid:A}),0===Hs.size&&Pt&&(Pt.close(),Pt=null)}(M,A)}function vn(I,A){const M=Hs.get(I);if(M)for(const B of M)B(A)}let Pt=null;const De="firebase-installations-store";let er=null;function Hn(){return er||(er=(0,Q.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(De)}})),er}function Ge(I,A){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,L.Z)(function*(I,A){const M=_s(I),J=(yield Hn()).transaction(De,"readwrite"),le=J.objectStore(De),Ie=yield le.get(M);return yield le.put(A,M),yield J.complete,(!Ie||Ie.fid!==A.fid)&&ts(I,A.fid),A})).apply(this,arguments)}function Ni(I){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,L.Z)(function*(I){const A=_s(I),B=(yield Hn()).transaction(De,"readwrite");yield B.objectStore(De).delete(A),yield B.complete})).apply(this,arguments)}function Ye(I,A){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,L.Z)(function*(I,A){const M=_s(I),J=(yield Hn()).transaction(De,"readwrite"),le=J.objectStore(De),Ie=yield le.get(M),Ve=A(Ie);return void 0===Ve?yield le.delete(M):yield le.put(Ve,M),yield J.complete,Ve&&(!Ie||Ie.fid!==Ve.fid)&&ts(I,Ve.fid),Ve})).apply(this,arguments)}function Tt(I){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,L.Z)(function*(I){let A;const M=yield Ye(I,B=>{const J=Br(B),le=Ht(I,J);return A=le.registrationPromise,le.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Br(I){return ct(I||{fid:Vt(),registrationStatus:0})}function Ht(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(he.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return Qe.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:fc(I)}:{installationEntry:A}}function Qe(){return(Qe=(0,L.Z)(function*(I,A){try{return Ge(I,yield Mt(I,A))}catch(M){throw ye(M)&&409===M.customData.serverCode?yield Ni(I):yield Ge(I,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function fc(I){return $s.apply(this,arguments)}function $s(){return($s=(0,L.Z)(function*(I){let A=yield Kt(I);for(;1===A.registrationStatus;)yield ul(100),A=yield Kt(I);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield Tt(I);return B||M}return A})).apply(this,arguments)}function Kt(I){return Ye(I,A=>{if(!A)throw he.create("installation-not-found");return ct(A)})}function ct(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function pc(I,A){return z.apply(this,arguments)}function z(){return(z=(0,L.Z)(function*({appConfig:I,platformLoggerProvider:A},M){const B=$(I,M),J=yn(I,M),le=A.getImmediate({optional:!0});le&&J.append("x-firebase-client",le.getPlatformInfoString());const Ve={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:G}})},Ue=yield mt(()=>fetch(B,Ve));if(Ue.ok)return qe(yield Ue.json());throw yield Ct("Generate Auth Token",Ue)})).apply(this,arguments)}function $(I,{fid:A}){return`${xe(I)}/${A}/authTokens:generate`}function K(I){return we.apply(this,arguments)}function we(){return(we=(0,L.Z)(function*(I,A=!1){let M;const B=yield Ye(I.appConfig,le=>{if(!Rn(le))throw he.create("not-registered");const Ie=le.authToken;if(!A&&br(Ie))return le;if(1===Ie.requestStatus)return M=oe(I,A),le;{if(!navigator.onLine)throw he.create("app-offline");const Ve=lr(le);return M=kt(I,Ve),Ve}});return M?yield M:B.authToken})).apply(this,arguments)}function oe(I,A){return Be.apply(this,arguments)}function Be(){return(Be=(0,L.Z)(function*(I,A){let M=yield dt(I.appConfig);for(;1===M.authToken.requestStatus;)yield ul(100),M=yield dt(I.appConfig);const B=M.authToken;return 0===B.requestStatus?K(I,A):B})).apply(this,arguments)}function dt(I){return Ye(I,A=>{if(!Rn(A))throw he.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function kt(I,A){return xn.apply(this,arguments)}function xn(){return(xn=(0,L.Z)(function*(I,A){try{const M=yield pc(I,A),B=Object.assign(Object.assign({},A),{authToken:M});return yield Ge(I.appConfig,B),M}catch(M){if(!ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Ge(I.appConfig,B)}else yield Ni(I.appConfig);throw M}})).apply(this,arguments)}function Rn(I){return void 0!==I&&2===I.registrationStatus}function br(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function lr(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function Io(){return(Io=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:B}=yield Tt(A.appConfig);return B?B.catch(console.error):K(A).catch(console.error),M.fid})).apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(I,A=!1){const M=I;return yield gc(M.appConfig),(yield K(M,A)).token})).apply(this,arguments)}function gc(I){return pi.apply(this,arguments)}function pi(){return(pi=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Tt(I);A&&(yield A)})).apply(this,arguments)}function Jt(I){return he.create("missing-app-config-values",{valueName:I})}const Hr="installations";(0,ce._registerComponent)(new Y.wA(Hr,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Jt("App Configuration");if(!I.name)throw Jt("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Jt(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),platformLoggerProvider:(0,ce._getProvider)(A,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new Y.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ce._getProvider)(A,Hr).getImmediate();return{getId:()=>function(I){return Io.apply(this,arguments)}(M),getToken:J=>function(I){return To.apply(this,arguments)}(M,J)}},"PRIVATE")),(0,ce.registerVersion)(X,V),(0,ce.registerVersion)(X,V,"esm2017");const ei="@firebase/remote-config",tr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dl{constructor(A,M,B,J){this.client=A,this.storage=M,this.storageCache=B,this.logger=J}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,J=B<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${J}.`),J}fetch(A){var M=this;return(0,L.Z)(function*(){const[B,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(A.cacheMaxAgeMillis,B))return J;A.eTag=J&&J.eTag;const le=yield M.client.fetch(A),Ie=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Ie.push(M.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Ie),le})()}}function Pi(I=navigator){return I.languages&&I.languages[0]||I.language}class ki{constructor(A,M,B,J,le,Ie){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=B,this.projectId=J,this.apiKey=le,this.appId=Ie}fetch(A){var M=this;return(0,L.Z)(function*(){const[B,J]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Ue={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:J,app_id:M.appId,language_code:Pi()},wt={method:"POST",headers:Ve,body:JSON.stringify(Ue)},tn=fetch(Ie,wt),kn=new Promise(($i,Ei)=>{A.signal.addEventListener(()=>{const Ds=new Error("The operation was aborted.");Ds.name="AbortError",Ei(Ds)})});let qr;try{yield Promise.race([tn,kn]),qr=yield tn}catch($i){let Ei="fetch-client-network";throw"AbortError"===$i.name&&(Ei="fetch-timeout"),tr.create(Ei,{originalErrorMessage:$i.message})}let rr=qr.status;const xu=qr.headers.get("ETag")||void 0;let ko,Vc;if(200===qr.status){let $i;try{$i=yield qr.json()}catch(Ei){throw tr.create("fetch-client-parse",{originalErrorMessage:Ei.message})}ko=$i.entries,Vc=$i.state}if("INSTANCE_STATE_UNSPECIFIED"===Vc?rr=500:"NO_CHANGE"===Vc?rr=304:("NO_TEMPLATE"===Vc||"EMPTY_CONFIG"===Vc)&&(ko={}),304!==rr&&200!==rr)throw tr.create("fetch-status",{httpStatus:rr});return{status:rr,eTag:xu,config:ko}})()}}class _c{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,B)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:B}){var J=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,B)=>{const J=Math.max(A-Date.now(),0),le=setTimeout(M,J);I.addEventListener(()=>{clearTimeout(le),B(tr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const le=yield J.client.fetch(A);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(le))throw le;const Ie={throttleEndTimeMillis:Date.now()+(0,ie.$s)(B),backoffCount:B+1};return yield J.storage.setThrottleMetadata(Ie),J.attemptFetch(A,Ie)}})()}}class c_{constructor(A,M,B,J,le){this.app=A,this._client=M,this._storageCache=B,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function au(I,A){const M=I.target.error||void 0;return tr.create(A,{originalErrorMessage:M&&M.message})}const da="app_namespace_store";class d_{constructor(A,M,B,J=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{A(au(B,"storage-open"))},M.onsuccess=B=>{I(B.target.result)},M.onupgradeneeded=B=>{const J=B.target.result;switch(B.oldVersion){case 0:J.createObjectStore(da,{keyPath:"compositeKey"})}}}catch(M){A(tr.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=B,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const B=yield M.openDbPromise;return new Promise((J,le)=>{const Ve=B.transaction([da],"readonly").objectStore(da),Ue=M.createCompositeKey(A);try{const wt=Ve.get(Ue);wt.onerror=tn=>{le(au(tn,"storage-get"))},wt.onsuccess=tn=>{const kn=tn.target.result;J(kn?kn.value:void 0)}}catch(wt){le(tr.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(A,M){var B=this;return(0,L.Z)(function*(){const J=yield B.openDbPromise;return new Promise((le,Ie)=>{const Ue=J.transaction([da],"readwrite").objectStore(da),wt=B.createCompositeKey(A);try{const tn=Ue.put({compositeKey:wt,value:M});tn.onerror=kn=>{Ie(au(kn,"storage-set"))},tn.onsuccess=()=>{le()}}catch(tn){Ie(tr.create("storage-set",{originalErrorMessage:tn&&tn.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const B=yield M.openDbPromise;return new Promise((J,le)=>{const Ve=B.transaction([da],"readwrite").objectStore(da),Ue=M.createCompositeKey(A);try{const wt=Ve.delete(Ue);wt.onerror=tn=>{le(au(tn,"storage-delete"))},wt.onsuccess=()=>{J()}}catch(wt){le(tr.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class eh{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),B=A.storage.getLastSuccessfulFetchTimestampMillis(),J=A.storage.getActiveConfig(),le=yield M;le&&(A.lastFetchStatus=le);const Ie=yield B;Ie&&(A.lastSuccessfulFetchTimestampMillis=Ie);const Ve=yield J;Ve&&(A.activeConfig=Ve)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function vc(){return hl.apply(this,arguments)}function hl(){return(hl=(0,L.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new Y.wA("remote-config",function(A,{instanceIdentifier:M}){const B=A.getProvider("app").getImmediate(),J=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw tr.create("registration-window");if(!(0,ie.hl)())throw tr.create("indexed-db-unavailable");const{projectId:le,apiKey:Ie,appId:Ve}=B.options;if(!le)throw tr.create("registration-project-id");if(!Ie)throw tr.create("registration-api-key");if(!Ve)throw tr.create("registration-app-id");const Ue=new d_(Ve,B.name,M=M||"firebase"),wt=new eh(Ue),tn=new ge.Yd(ei);tn.logLevel=ge.in.ERROR;const kn=new ki(J,ce.SDK_VERSION,M,le,Ie,Ve),qr=new _c(kn,Ue),rr=new dl(qr,Ue,wt,tn),xu=new c_(B,rr,wt,Ue,tn);return function(I){const A=(0,ie.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(xu),xu},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ei,"0.3.3"),(0,ce.registerVersion)(ei,"0.3.3","esm2017");const uu="/firebase-messaging-sw.js",f_="/firebase-cloud-messaging-push-scope",lu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",is="google.c.a.c_id",cu="google.c.a.c_l",Oi="google.c.a.ts",du="google.c.a.e";var Dr=(()=>{return(I=Dr||(Dr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Dr;var I})();function ss(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ec(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),J=new Uint8Array(B.length);for(let le=0;le<B.length;++le)J[le]=B.charCodeAt(le);return J}const fl="fcm_token_details_db",Sp="fcm_token_object_Store";function ti(I){return hu.apply(this,arguments)}function hu(){return(hu=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(fl))return null;let A=null;return(yield(0,Q.openDb)(fl,5,function(){var B=(0,L.Z)(function*(J){var le;if(J.oldVersion<2||!J.objectStoreNames.contains(Sp))return;const Ie=J.transaction.objectStore(Sp),Ve=yield Ie.index("fcmSenderId").get(I);if(yield Ie.clear(),Ve)if(2===J.oldVersion){const Ue=Ve;if(!Ue.auth||!Ue.p256dh||!Ue.endpoint)return;A={token:Ue.fcmToken,createTime:null!==(le=Ue.createTime)&&void 0!==le?le:Date.now(),subscriptionOptions:{auth:Ue.auth,p256dh:Ue.p256dh,endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:"string"==typeof Ue.vapidKey?Ue.vapidKey:ss(Ue.vapidKey)}}}else if(3===J.oldVersion){const Ue=Ve;A={token:Ue.fcmToken,createTime:Ue.createTime,subscriptionOptions:{auth:ss(Ue.auth),p256dh:ss(Ue.p256dh),endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:ss(Ue.vapidKey)}}}else if(4===J.oldVersion){const Ue=Ve;A={token:Ue.fcmToken,createTime:Ue.createTime,subscriptionOptions:{auth:ss(Ue.auth),p256dh:ss(Ue.p256dh),endpoint:Ue.endpoint,swScope:Ue.swScope,vapidKey:ss(Ue.vapidKey)}}}});return function(J){return B.apply(this,arguments)}}())).close(),yield(0,Q.deleteDb)(fl),yield(0,Q.deleteDb)("fcm_vapid_details_db"),yield(0,Q.deleteDb)("undefined"),rh(A)?A:null})).apply(this,arguments)}function rh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Ws="firebase-messaging-store";let ih=null;function en(){return ih||(ih=(0,Q.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Ws)}})),ih}function sh(I){return os.apply(this,arguments)}function os(){return(os=(0,L.Z)(function*(I){const A=xo(I),B=yield(yield en()).transaction(Ws).objectStore(Ws).get(A);if(B)return B;{const J=yield ti(I.appConfig.senderId);if(J)return yield Fi(I,J),J}})).apply(this,arguments)}function Fi(I,A){return qt.apply(this,arguments)}function qt(){return(qt=(0,L.Z)(function*(I,A){const M=xo(I),J=(yield en()).transaction(Ws,"readwrite");return yield J.objectStore(Ws).put(A,M),yield J.complete,A})).apply(this,arguments)}function fa(I){return gl.apply(this,arguments)}function gl(){return(gl=(0,L.Z)(function*(I){const A=xo(I),B=(yield en()).transaction(Ws,"readwrite");yield B.objectStore(Ws).delete(A),yield B.complete})).apply(this,arguments)}function xo({appConfig:I}){return I.appId}const $n=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zs(I,A){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,L.Z)(function*(I,A){const M=yield fu(I),B=nt(A),J={method:"POST",headers:M,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(Mn(I.appConfig),J)).json()}catch(Ie){throw $n.create("token-subscribe-failed",{errorInfo:Ie})}if(le.error)throw $n.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw $n.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function fr(I,A){return ml.apply(this,arguments)}function ml(){return(ml=(0,L.Z)(function*(I,A){const M=yield fu(I),B=nt(A.subscriptionOptions),J={method:"PATCH",headers:M,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(`${Mn(I.appConfig)}/${A.token}`,J)).json()}catch(Ie){throw $n.create("token-update-failed",{errorInfo:Ie})}if(le.error)throw $n.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw $n.create("token-update-no-token");return le.token})).apply(this,arguments)}function _l(I,A){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,L.Z)(function*(I,A){const B={method:"DELETE",headers:yield fu(I)};try{const le=yield(yield fetch(`${Mn(I.appConfig)}/${A}`,B)).json();if(le.error)throw $n.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(J){throw $n.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Mn({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function fu(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function nt({p256dh:I,auth:A,endpoint:M,vapidKey:B}){const J={web:{endpoint:M,auth:A,p256dh:I}};return B!==lu&&(J.web.applicationPubKey=B),J}const yl=6048e5;function oh(I){return vl.apply(this,arguments)}function vl(){return(vl=(0,L.Z)(function*(I){const A=yield El(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:ss(A.getKey("auth")),p256dh:ss(A.getKey("p256dh"))},B=yield sh(I.firebaseDependencies);if(B){if(wl(B.subscriptionOptions,M))return Date.now()>=B.createTime+yl?wc(I,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield _l(I.firebaseDependencies,B.token)}catch(J){console.warn(J)}return be(I.firebaseDependencies,M)}return be(I.firebaseDependencies,M)})).apply(this,arguments)}function ah(I){return gu.apply(this,arguments)}function gu(){return(gu=(0,L.Z)(function*(I){const A=yield sh(I.firebaseDependencies);A&&(yield _l(I.firebaseDependencies,A.token),yield fa(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function wc(I,A){return vs.apply(this,arguments)}function vs(){return(vs=(0,L.Z)(function*(I,A){try{const M=yield fr(I.firebaseDependencies,A),B=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Fi(I.firebaseDependencies,B),M}catch(M){throw yield ah(I),M}})).apply(this,arguments)}function be(I,A){return yt.apply(this,arguments)}function yt(){return(yt=(0,L.Z)(function*(I,A){const B={token:yield zs(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Fi(I,B),B.token})).apply(this,arguments)}function El(I,A){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ec(A)})})).apply(this,arguments)}function wl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function as(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const B=A.notification.body;B&&(I.notification.body=B);const J=A.notification.image;J&&(I.notification.image=J)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const B=A.fcmOptions.analytics_label;B&&(I.fcmOptions.analyticsLabel=B)}(A,I),A}function uh(I){return"object"==typeof I&&!!I&&is in I}function Cc(I,A){const M=[];for(let B=0;B<I.length;B++)M.push(I.charAt(B)),B<A.length&&M.push(A.charAt(B));return M.join("")}function ma(I){return $n.create("missing-app-config-values",{valueName:I})}Cc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pn{constructor(A,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function(I){if(!I||!I.options)throw ma("App Configuration Object");if(!I.name)throw ma("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const B of A)if(!M[B])throw ma(B);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:J,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function _i(I){return _u.apply(this,arguments)}function _u(){return(_u=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(uu,{scope:f_}),I.swRegistration.update().catch(()=>{})}catch(A){throw $n.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function Li(I,A){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield _i(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function bc(I,A){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=lu)})).apply(this,arguments)}function Ic(){return(Ic=(0,L.Z)(function*(I,A){if(!navigator)throw $n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $n.create("permission-blocked");return yield bc(I,null==A?void 0:A.vapidKey),yield Li(I,null==A?void 0:A.serviceWorkerRegistration),oh(I)})).apply(this,arguments)}function vu(I,A,M){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(I,A,M){const B=bl(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[is],message_name:M[cu],message_time:M[Oi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bl(I){switch(I){case Dr.NOTIFICATION_CLICKED:return"notification_open";case Dr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ya(){return(ya=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Dr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(as(M)):I.onMessageHandler.next(as(M)));const B=M.data;uh(B)&&"1"===B[du]&&(yield vu(I,M.messageType,B))})).apply(this,arguments)}const Tc="@firebase/messaging";function dh(){return Es.apply(this,arguments)}function Es(){return(Es=(0,L.Z)(function*(){return"undefined"!=typeof window&&(0,ie.hl)()&&(yield(0,ie.eu)())&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new Y.wA("messaging",I=>{const A=new Pn(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return ya.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ce._registerComponent)(new Y.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:B=>function(I,A){return Ic.apply(this,arguments)}(A,B)}},"PRIVATE")),(0,ce.registerVersion)(Tc,"0.9.4"),(0,ce.registerVersion)(Tc,"0.9.4","esm2017");const Ea="analytics",Np="firebase_id",Ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wu="https://www.googletagmanager.com/gtag/js",Tn=new ge.Yd("@firebase/analytics");function Sc(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function Mp(I,A){const M=document.createElement("script");M.src=`${wu}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function Ca(I,A,M,B,J,le){return fh.apply(this,arguments)}function fh(){return(fh=(0,L.Z)(function*(I,A,M,B,J,le){const Ie=B[J];try{if(Ie)yield A[Ie];else{const Ue=(yield Sc(M)).find(wt=>wt.measurementId===J);Ue&&(yield A[Ue.appId])}}catch(Ve){Tn.error(Ve)}I("config",J,le)})).apply(this,arguments)}function ba(I,A,M,B,J){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,L.Z)(function*(I,A,M,B,J){try{let le=[];if(J&&J.send_to){let Ie=J.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Ve=yield Sc(M);for(const Ue of Ie){const wt=Ve.find(kn=>kn.measurementId===Ue),tn=wt&&A[wt.appId];if(!tn){le=[];break}le.push(tn)}}0===le.length&&(le=Object.values(A)),yield Promise.all(le),I("event",B,J||{})}catch(le){Tn.error(le)}})).apply(this,arguments)}function m_(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(wu))return A;return null}const Vi=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tl=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Op(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Rc(I){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:B}=I,J={method:"GET",headers:Op(B)},le=Ys.replace("{app-id}",M),Ie=yield fetch(le,J);if(200!==Ie.status&&304!==Ie.status){let Ve="";try{const Ue=yield Ie.json();(null===(A=Ue.error)||void 0===A?void 0:A.message)&&(Ve=Ue.error.message)}catch(Ue){}throw Vi.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Ve})}return Ie.json()})).apply(this,arguments)}function gh(I){return ri.apply(this,arguments)}function ri(){return(ri=(0,L.Z)(function*(I,A=Tl,M){const{appId:B,apiKey:J,measurementId:le}=I.options;if(!B)throw Vi.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:B};throw Vi.create("no-api-key")}const Ie=A.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Fp;return setTimeout((0,L.Z)(function*(){Ve.abort()}),void 0!==M?M:6e4),Cu({appId:B,apiKey:J,measurementId:le},Ie,Ve,A)})).apply(this,arguments)}function Cu(I,A,M){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},B,J=Tl){const{appId:le,measurementId:Ie}=I;try{yield lE(B,A)}catch(Ve){if(Ie)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:le,measurementId:Ie};throw Ve}try{const Ve=yield Rc(I);return J.deleteThrottleMetadata(le),Ve}catch(Ve){if(!mh(Ve)){if(J.deleteThrottleMetadata(le),Ie)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:le,measurementId:Ie};throw Ve}const Ue=503===Number(Ve.customData.httpStatus)?(0,ie.$s)(M,J.intervalMillis,30):(0,ie.$s)(M,J.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Ue,backoffCount:M+1};return J.setThrottleMetadata(le,wt),Tn.debug(`Calling attemptFetch again in ${Ue} millis`),Cu(I,wt,B,J)}})).apply(this,arguments)}function lE(I,A){return new Promise((M,B)=>{const J=Math.max(A-Date.now(),0),le=setTimeout(M,J);I.addEventListener(()=>{clearTimeout(le),B(Vi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function mh(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Fp{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function _h(){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,L.Z)(function*(){if(!(0,ie.hl)())return Tn.warn(Vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(I){return Tn.warn(Vi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function No(){return(No=(0,L.Z)(function*(I,A,M,B,J,le,Ie){var Ve;const Ue=gh(I);Ue.then(rr=>{M[rr.measurementId]=rr.appId,I.options.measurementId&&rr.measurementId!==I.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>Tn.error(rr)),A.push(Ue);const wt=_h().then(rr=>{if(rr)return B.getId()}),[tn,kn]=yield Promise.all([Ue,wt]);m_()||Mp(le,tn.measurementId),J("js",new Date);const qr=null!==(Ve=null==Ie?void 0:Ie.config)&&void 0!==Ve?Ve:{};return qr.origin="firebase",qr.update=!0,null!=kn&&(qr[Np]=kn),J("config",tn.measurementId,qr),tn.measurementId})).apply(this,arguments)}class fn{constructor(A){this.app=A}_delete(){return delete _n[this.app.options.appId],Promise.resolve()}}let _n={},Mo=[];const st={};let Iu,Gr,Al="dataLayer",bs=!1;function Da(I,A,M){!function(){const I=[];if((0,ie.ru)()&&I.push("This is a browser extension environment."),(0,ie.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((B,J)=>`(${J+1}) ${B}`).join(" "),M=Vi.create("invalid-analytics-context",{errorInfo:A});Tn.warn(M.message)}}();const B=I.options.appId;if(!B)throw Vi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Vi.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_n[B])throw Vi.create("already-exists",{id:B});if(!bs){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Al);const{wrappedGtag:le,gtagCore:Ie}=function(I,A,M,B,J){let le=function(...Ie){window[B].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function(I,A,M,B){function le(){return(le=(0,L.Z)(function*(Ie,Ve,Ue){try{"event"===Ie?yield ba(I,A,M,Ve,Ue):"config"===Ie?yield Ca(I,A,M,B,Ve,Ue):I("set",Ve)}catch(wt){Tn.error(wt)}})).apply(this,arguments)}return function(Ie,Ve,Ue){return le.apply(this,arguments)}}(le,I,A,M),{gtagCore:le,wrappedGtag:window[J]}}(_n,Mo,st,Al,"gtag");Gr=le,Iu=Ie,bs=!0}return _n[B]=function(I,A,M,B,J,le,Ie){return No.apply(this,arguments)}(I,Mo,st,A,Iu,Al,M),new fn(I)}function Sl(){return(Sl=(0,L.Z)(function*(I,A,M,B,J){if(J&&J.global)I("event",M,B);else{const le=yield A;I("event",M,Object.assign(Object.assign({},B),{send_to:le}))}})).apply(this,arguments)}function ji(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,L.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}const Rl="@firebase/analytics";(0,ce._registerComponent)(new Y.wA(Ea,(A,{options:M})=>Da(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ce._registerComponent)(new Y.wA("analytics-internal",function(A){try{const M=A.getProvider(Ea).getImmediate();return{logEvent:(B,J,le)=>function(I,A,M,B){I=(0,ie.m9)(I),function(I,A,M,B,J){return Sl.apply(this,arguments)}(Gr,_n[I.app.options.appId],A,M,B).catch(J=>Tn.error(J))}(M,B,J,le)}}catch(M){throw Vi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ce.registerVersion)(Rl,"0.7.4"),(0,ce.registerVersion)(Rl,"0.7.4","esm2017");var y_=U(7771),Ml=U(3637),Up=U(3342),Bp=U(3101),wh=U(309);const Mc=new f.GfV("7.2.0"),Pl="__angularfire_symbol__analyticsIsSupported",kc="__angularfire_symbol__remoteConfigIsSupported",yi="__angularfire_symbol__messagingIsSupported";function nr(I,A,M){if(A){if(1===A.length)return A[0];const le=A.filter(Ie=>Ie.app===M);if(1===le.length)return le[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Pl]||(globalThis[Pl]=ji().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[yi]||(globalThis[yi]=dh().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[kc]||(globalThis[kc]=vc().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const Tu=(I,A)=>{const M=A?[A]:(0,ne.C6)(),B=[];return M.forEach(J=>{J.container.getProvider(I).instances.forEach(Ie=>{B.includes(Ie)||B.push(Ie)})}),B};function Hi(){}class no{constructor(A,M=y_.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,B){const J=this.zone;return this.delegate.schedule(function(Ie){J.runGuarded(()=>{A.apply(this,[Ie])})},M,B)}}class Oc{constructor(A){this.zone=A,this.task=null}call(A,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hi,{},Hi,Hi)),M.pipe((0,Up.b)({next:B,complete:B,error:B})).subscribe(A).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fc=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new no(Zone.current)),this.insideAngular=M.run(()=>new no(Zone.current,Ml.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ts(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Au(I){return Ts(),function(I){return function(M){return(M=M.lift(new Oc(I.ngZone))).pipe((0,Bp.R)(I.outsideAngular),(0,wh.QV)(I.insideAngular))}}(Ts())(I)}},3854:(ze,Ce,U)=>{"use strict";U.d(Ce,{BH:()=>ae,LL:()=>We,ZR:()=>Mt,gQ:()=>De,zI:()=>ut,hu:()=>ne,g5:()=>L,US:()=>Y,tV:()=>X,h$:()=>ge,$s:()=>Kt,r3:()=>un,Sg:()=>de,ne:()=>er,p$:()=>V,vZ:()=>Pt,ZB:()=>j,gK:()=>Ye,pd:()=>ns,m9:()=>pc,z$:()=>Ee,GJ:()=>ts,jU:()=>re,ru:()=>he,d:()=>xe,xb:()=>vn,w1:()=>qe,hl:()=>yn,uI:()=>_e,UG:()=>fe,Yr:()=>xt,b$:()=>ye,G6:()=>gt,Mn:()=>Ct,w9:()=>Hs,cI:()=>ms,UI:()=>zn,xO:()=>sa,zd:()=>Ri,DV:()=>ia,ug:()=>Ht,dS:()=>Br,Pz:()=>iu,Dv:()=>Ur,Wj:()=>Tt,lb:()=>Dt,eu:()=>mt});const ne=function(z,$){if(!z)throw L($)},L=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ce=function(z){const $=[];let K=0;for(let we=0;we<z.length;we++){let oe=z.charCodeAt(we);oe<128?$[K++]=oe:oe<2048?($[K++]=oe>>6|192,$[K++]=63&oe|128):55296==(64512&oe)&&we+1<z.length&&56320==(64512&z.charCodeAt(we+1))?(oe=65536+((1023&oe)<<10)+(1023&z.charCodeAt(++we)),$[K++]=oe>>18|240,$[K++]=oe>>12&63|128,$[K++]=oe>>6&63|128,$[K++]=63&oe|128):($[K++]=oe>>12|224,$[K++]=oe>>6&63|128,$[K++]=63&oe|128)}return $},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,$){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let oe=0;oe<z.length;oe+=3){const Be=z[oe],dt=oe+1<z.length,kt=dt?z[oe+1]:0,xn=oe+2<z.length,Rn=xn?z[oe+2]:0;let lr=(15&kt)<<2|Rn>>6,bo=63&Rn;xn||(bo=64,dt||(lr=64)),we.push(K[Be>>2],K[(3&Be)<<4|kt>>4],K[lr],K[bo])}return we.join("")},encodeString(z,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(z):this.encodeByteArray(ce(z),$)},decodeString(z,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(z):function(z){const $=[];let K=0,we=0;for(;K<z.length;){const oe=z[K++];if(oe<128)$[we++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const Be=z[K++];$[we++]=String.fromCharCode((31&oe)<<6|63&Be)}else if(oe>239&&oe<365){const xn=((7&oe)<<18|(63&z[K++])<<12|(63&z[K++])<<6|63&z[K++])-65536;$[we++]=String.fromCharCode(55296+(xn>>10)),$[we++]=String.fromCharCode(56320+(1023&xn))}else{const Be=z[K++],dt=z[K++];$[we++]=String.fromCharCode((15&oe)<<12|(63&Be)<<6|63&dt)}}return $.join("")}(this.decodeStringToByteArray(z,$))},decodeStringToByteArray(z,$){this.init_();const K=$?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let oe=0;oe<z.length;){const Be=K[z.charAt(oe++)],kt=oe<z.length?K[z.charAt(oe)]:0;++oe;const Rn=oe<z.length?K[z.charAt(oe)]:64;++oe;const Rt=oe<z.length?K[z.charAt(oe)]:64;if(++oe,null==Be||null==kt||null==Rn||null==Rt)throw Error();we.push(Be<<2|kt>>4),64!==Rn&&(we.push(kt<<4&240|Rn>>2),64!==Rt&&we.push(Rn<<6&192|Rt))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ge=function(z){const $=ce(z);return Y.encodeByteArray($,!0)},Q=function(z){return ge(z).replace(/\./g,"")},X=function(z){try{return Y.decodeString(z,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function V(z){return j(void 0,z)}function j(z,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return $}for(const K in $)!$.hasOwnProperty(K)||!G(K)||(z[K]=j(z[K],$[K]));return z}function G(z){return"__proto__"!==z}class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,K)=>{this.resolve=$,this.reject=K})}wrapCallback($){return(K,we)=>{K?this.reject(K):this.resolve(we),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(K):$(K,we))}}}function de(z,$){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=$||"demo-project",oe=z.iat||0,Be=z.sub||z.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:oe,exp:oe+3600,auth_time:oe,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},z);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(dt)),""].join(".")}function Ee(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function re(){return"object"==typeof self&&self.self===self}function he(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Ee().indexOf("Electron/")>=0}function qe(){const z=Ee();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Ct(){return Ee().indexOf("MSAppHost/")>=0}function xt(){return!1}function gt(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yn(){return"object"==typeof indexedDB}function mt(){return new Promise((z,$)=>{try{let K=!0;const we="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(we);oe.onsuccess=()=>{oe.result.close(),K||self.indexedDB.deleteDatabase(we),z(!0)},oe.onupgradeneeded=()=>{K=!1},oe.onerror=()=>{var Be;$((null===(Be=oe.error)||void 0===Be?void 0:Be.message)||"")}}catch(K){$(K)}})}function ut(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Mt extends Error{constructor($,K,we){super(K),this.code=$,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor($,K,we){this.service=$,this.serviceName=K,this.errors=we}create($,...K){const we=K[0]||{},oe=`${this.service}/${$}`,Be=this.errors[$],dt=Be?function(z,$){return z.replace(js,(K,we)=>{const oe=$[we];return null!=oe?String(oe):`<${we}?>`})}(Be,we):"Error";return new Mt(oe,`${this.serviceName}: ${dt} (${oe}).`,we)}}const js=/\{\$([^}]+)}/g;function ms(z){return JSON.parse(z)}function iu(z){return JSON.stringify(z)}const Vt=function(z){let $={},K={},we={},oe="";try{const Be=z.split(".");$=ms(X(Be[0])||""),K=ms(X(Be[1])||""),oe=Be[2],we=K.d||{},delete K.d}catch(Be){}return{header:$,claims:K,data:we,signature:oe}},Hs=function(z){const K=Vt(z).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},ts=function(z){const $=Vt(z).claims;return"object"==typeof $&&!0===$.admin};function un(z,$){return Object.prototype.hasOwnProperty.call(z,$)}function ia(z,$){if(Object.prototype.hasOwnProperty.call(z,$))return z[$]}function vn(z){for(const $ in z)if(Object.prototype.hasOwnProperty.call(z,$))return!1;return!0}function zn(z,$,K){const we={};for(const oe in z)Object.prototype.hasOwnProperty.call(z,oe)&&(we[oe]=$.call(K,z[oe],oe,z));return we}function Pt(z,$){if(z===$)return!0;const K=Object.keys(z),we=Object.keys($);for(const oe of K){if(!we.includes(oe))return!1;const Be=z[oe],dt=$[oe];if(En(Be)&&En(dt)){if(!Pt(Be,dt))return!1}else if(Be!==dt)return!1}for(const oe of we)if(!K.includes(oe))return!1;return!0}function En(z){return null!==z&&"object"==typeof z}function sa(z){const $=[];for(const[K,we]of Object.entries(z))Array.isArray(we)?we.forEach(oe=>{$.push(encodeURIComponent(K)+"="+encodeURIComponent(oe))}):$.push(encodeURIComponent(K)+"="+encodeURIComponent(we));return $.length?"&"+$.join("&"):""}function Ri(z){const $={};return z.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[oe,Be]=we.split("=");$[decodeURIComponent(oe)]=decodeURIComponent(Be)}}),$}function ns(z){const $=z.indexOf("?");if(!$)return"";const K=z.indexOf("#",$);return z.substring($,K>0?K:void 0)}class De{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,K){K||(K=0);const we=this.W_;if("string"==typeof $)for(let Rt=0;Rt<16;Rt++)we[Rt]=$.charCodeAt(K)<<24|$.charCodeAt(K+1)<<16|$.charCodeAt(K+2)<<8|$.charCodeAt(K+3),K+=4;else for(let Rt=0;Rt<16;Rt++)we[Rt]=$[K]<<24|$[K+1]<<16|$[K+2]<<8|$[K+3],K+=4;for(let Rt=16;Rt<80;Rt++){const lr=we[Rt-3]^we[Rt-8]^we[Rt-14]^we[Rt-16];we[Rt]=4294967295&(lr<<1|lr>>>31)}let Rn,br,oe=this.chain_[0],Be=this.chain_[1],dt=this.chain_[2],kt=this.chain_[3],xn=this.chain_[4];for(let Rt=0;Rt<80;Rt++){Rt<40?Rt<20?(Rn=kt^Be&(dt^kt),br=1518500249):(Rn=Be^dt^kt,br=1859775393):Rt<60?(Rn=Be&dt|kt&(Be|dt),br=2400959708):(Rn=Be^dt^kt,br=3395469782);const lr=(oe<<5|oe>>>27)+Rn+xn+br+we[Rt]&4294967295;xn=kt,kt=dt,dt=4294967295&(Be<<30|Be>>>2),Be=oe,oe=lr}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+Be&4294967295,this.chain_[2]=this.chain_[2]+dt&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+xn&4294967295}update($,K){if(null==$)return;void 0===K&&(K=$.length);const we=K-this.blockSize;let oe=0;const Be=this.buf_;let dt=this.inbuf_;for(;oe<K;){if(0===dt)for(;oe<=we;)this.compress_($,oe),oe+=this.blockSize;if("string"==typeof $){for(;oe<K;)if(Be[dt]=$.charCodeAt(oe),++dt,++oe,dt===this.blockSize){this.compress_(Be),dt=0;break}}else for(;oe<K;)if(Be[dt]=$[oe],++dt,++oe,dt===this.blockSize){this.compress_(Be),dt=0;break}}this.inbuf_=dt,this.total_+=K}digest(){const $=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&K,K/=256;this.compress_(this.buf_);let we=0;for(let oe=0;oe<5;oe++)for(let Be=24;Be>=0;Be-=8)$[we]=this.chain_[oe]>>Be&255,++we;return $}}function er(z,$){const K=new Hn(z,$);return K.subscribe.bind(K)}class Hn{constructor($,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{$(this)}).catch(we=>{this.error(we)})}next($){this.forEachObserver(K=>{K.next($)})}error($){this.forEachObserver(K=>{K.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,K,we){let oe;if(void 0===$&&void 0===K&&void 0===we)throw new Error("Missing Observer.");oe=function(z,$){if("object"!=typeof z||null===z)return!1;for(const K of["next","error","complete"])if(K in z&&"function"==typeof z[K])return!0;return!1}($)?$:{next:$,error:K,complete:we},void 0===oe.next&&(oe.next=Ni),void 0===oe.error&&(oe.error=Ni),void 0===oe.complete&&(oe.complete=Ni);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(dt){}}),this.observers.push(oe),Be}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,$)}sendOne($,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{K(this.observers[$])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ni(){}const Ur=function(z,$,K,we){let oe;if(we<$?oe="at least "+$:we>K&&(oe=0===K?"none":"no more than "+K),oe)throw new Error(z+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+oe+".")};function Ye(z,$){return`${z} failed: ${$} argument `}function Tt(z,$,K,we){if((!we||K)&&"function"!=typeof K)throw new Error(Ye(z,$)+"must be a valid function.")}function Dt(z,$,K,we){if((!we||K)&&("object"!=typeof K||null===K))throw new Error(Ye(z,$)+"must be a valid context object.")}const Br=function(z){const $=[];let K=0;for(let we=0;we<z.length;we++){let oe=z.charCodeAt(we);if(oe>=55296&&oe<=56319){const Be=oe-55296;we++,ne(we<z.length,"Surrogate pair missing trail surrogate."),oe=65536+(Be<<10)+(z.charCodeAt(we)-56320)}oe<128?$[K++]=oe:oe<2048?($[K++]=oe>>6|192,$[K++]=63&oe|128):oe<65536?($[K++]=oe>>12|224,$[K++]=oe>>6&63|128,$[K++]=63&oe|128):($[K++]=oe>>18|240,$[K++]=oe>>12&63|128,$[K++]=oe>>6&63|128,$[K++]=63&oe|128)}return $},Ht=function(z){let $=0;for(let K=0;K<z.length;K++){const we=z.charCodeAt(K);we<128?$++:we<2048?$+=2:we>=55296&&we<=56319?($+=4,K++):$+=3}return $};function Kt(z,$=1e3,K=2){const we=$*Math.pow(K,z),oe=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+oe)}function pc(z){return z&&z._delegate?z._delegate:z}},2329:(ze,Ce,U)=>{"use strict";U.d(Ce,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=U(8026);(0,f.registerVersion)("firebase","9.6.1","app")},7841:(ze,Ce,U)=>{"use strict";U.d(Ce,{Z:()=>f.Z});var f=U(3394);f.Z.registerVersion("firebase","9.6.1","app-compat")},2755:(ze,Ce,U)=>{"use strict";U.r(Ce);var f=U(8239),ne=U(3394),L=U(3854),ce=U(8026);function Q(y,p){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&p.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(y);D<w.length;D++)p.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(y,w[D])&&(g[w[D]]=y[w[D]])}return g}var Mt=U(5422),We=U(3910);const Hs=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ts=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},un=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vn=new Mt.Yd("@firebase/auth");function zn(y,...p){vn.logLevel<=Mt.in.ERROR&&vn.error(`Auth (${ce.SDK_VERSION}): ${y}`,...p)}function Pt(y,...p){throw ns(y,...p)}function En(y,...p){return ns(y,...p)}function sa(y,p,g){const w=Object.assign(Object.assign({},ts()),{[p]:g});return new L.LL("auth","Firebase",w).create(p,{appName:y.name})}function Ri(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Pt(y,"argument-error"),sa(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ns(y,...p){if("string"!=typeof y){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return un.create(y,...p)}function De(y,p,...g){if(!y)throw ns(p,...g)}function er(y){const p="INTERNAL ASSERTION FAILED: "+y;throw zn(p),new Error(p)}function Hn(y,p){y||er(p)}const Ge=new Map;function Bt(y){Hn(y instanceof Function,"Expected a class definition");let p=Ge.get(y);return p?(Hn(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Ge.set(y,p),p)}function Ye(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Xe(){return"http:"===Tt()||"https:"===Tt()}function Tt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ht{constructor(p,g){this.shortDelay=p,this.longDelay=g,Hn(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xe()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Oe(y,p){Hn(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Qe{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$s=new Ht(3e4,6e4);function Kt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function ct(y,p,g,w){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(y,p,g,w,D={}){return pc(y,D,(0,f.Z)(function*(){let N={},W={};w&&("GET"===p?W=w:N={body:JSON.stringify(w)});const se=(0,L.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),Qe.fetch()(we(y,y.config.apiHost,g,se),Object.assign({method:p,headers:Me,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function pc(y,p,g){return z.apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(y,p,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},fc),p);try{const D=new oe(y),N=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw Be(y,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const se=N.ok?W.errorMessage:W.error.message,[Me,Re]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Be(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Me)throw Be(y,"email-already-in-use",W);const $e=w[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw sa(y,$e,Re);Pt(y,$e)}}catch(D){if(D instanceof L.ZR)throw D;Pt(y,"network-request-failed")}})).apply(this,arguments)}function $(y,p,g,w){return K.apply(this,arguments)}function K(){return(K=(0,f.Z)(function*(y,p,g,w,D={}){const N=yield ct(y,p,g,w,D);return"mfaPendingCredential"in N&&Pt(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function we(y,p,g,w){const D=`${p}${g}?${w}`;return y.config.emulator?Oe(y.config,D):`${y.config.apiScheme}://${D}`}class oe{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(En(this.auth,"timeout")),$s.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Be(y,p,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=En(y,p,w);return D.customData._tokenResponse=g,D}function kt(){return(kt=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xn(y,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function br(y,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function lr(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Io(){return(Io=(0,f.Z)(function*(y,p=!1){const g=(0,L.m9)(y),w=yield g.getIdToken(p),D=To(w);De(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const N="object"==typeof D.firebase?D.firebase:void 0,W=null==N?void 0:N.sign_in_provider;return{claims:D,token:w,authTime:lr(cl(D.auth_time)),issuedAtTime:lr(cl(D.iat)),expirationTime:lr(cl(D.exp)),signInProvider:W||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function cl(y){return 1e3*Number(y)}function To(y){const[p,g,w]=y.split(".");if(void 0===p||void 0===g||void 0===w)return zn("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,L.tV)(g);return D?JSON.parse(D):(zn("Failed to decode base64 JWT payload"),null)}catch(D){return zn("Caught error parsing JWT payload as JSON",D),null}}function pi(y,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof L.ZR&&Jr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Jr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Mi{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class gi{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Do(y){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(y){var p;const g=y.auth,w=yield y.getIdToken(),D=yield pi(y,br(g,{idToken:w}));De(null==D?void 0:D.users.length,g,"internal-error");const N=D.users[0];y._notifyReloadListener(N);const W=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?Hr(N.providerUserInfo):[],se=Jt(y.providerData,W),$e=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==se?void 0:se.length)),He={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:se,metadata:new gi(N.createdAt,N.lastLoginAt),isAnonymous:$e};Object.assign(y,He)})).apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(y){const p=(0,L.m9)(y);yield Do(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Jt(y,p){return[...y.filter(w=>!p.some(D=>D.providerId===w.providerId)),...p]}function Hr(y){return y.map(p=>{var{providerId:g}=p,w=Q(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Nn(){return(Nn=(0,f.Z)(function*(y,p){const g=yield pc(y,{},(0,f.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:D,apiKey:N}=y.config,W=we(y,D,"/v1/token",`key=${N}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(W,{method:"POST",headers:se,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){De(p.idToken,"internal-error"),De(void 0!==p.idToken,"internal-error"),De(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(y){const p=To(y);return De(p,"internal-error"),De(void 0!==p.exp,"internal-error"),De(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,f.Z)(function*(){return De(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,f.Z)(function*(){const{accessToken:D,refreshToken:N,expiresIn:W}=yield function(y,p){return Nn.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(D,N,Number(W))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:D,expirationTime:N}=g,W=new Xr;return w&&(De("string"==typeof w,"internal-error",{appName:p}),W.refreshToken=w),D&&(De("string"==typeof D,"internal-error",{appName:p}),W.accessToken=D),N&&(De("number"==typeof N,"internal-error",{appName:p}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Xr,this.toJSON())}_performRefresh(){return er("not implemented")}}function Xt(y,p){De("string"==typeof y||void 0===y,"internal-error",{appName:p})}class ei{constructor(p){var{uid:g,auth:w,stsTokenManager:D}=p,N=Q(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.metadata=new gi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,f.Z)(function*(){const w=yield pi(g,g.stsTokenManager.getToken(g.auth,p));return De(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function(y){return Io.apply(this,arguments)}(this,p)}reload(){return function(y){return _t.apply(this,arguments)}(this)}_assign(p){this!==p&&(De(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ei(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,f.Z)(function*(){let D=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),D=!0),g&&(yield Do(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,f.Z)(function*(){const g=yield p.getIdToken();return yield pi(p,function(y,p){return kt.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,D,N,W,se,Me,Re,$e;const He=null!==(w=g.displayName)&&void 0!==w?w:void 0,vt=null!==(D=g.email)&&void 0!==D?D:void 0,Ln=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,uo=null!==(W=g.photoURL)&&void 0!==W?W:void 0,Vh=null!==(se=g.tenantId)&&void 0!==se?se:void 0,$l=null!==(Me=g._redirectEventId)&&void 0!==Me?Me:void 0,Kc=null!==(Re=g.createdAt)&&void 0!==Re?Re:void 0,Uh=null!==($e=g.lastLoginAt)&&void 0!==$e?$e:void 0,{uid:Yc,emailVerified:Bh,isAnonymous:$_,providerData:cg,stsTokenManager:Qc}=g;De(Yc&&Qc,p,"internal-error");const jh=Xr.fromJSON(this.name,Qc);De("string"==typeof Yc,p,"internal-error"),Xt(He,p.name),Xt(vt,p.name),De("boolean"==typeof Bh,p,"internal-error"),De("boolean"==typeof $_,p,"internal-error"),Xt(Ln,p.name),Xt(uo,p.name),Xt(Vh,p.name),Xt($l,p.name),Xt(Kc,p.name),Xt(Uh,p.name);const Hh=new ei({uid:Yc,auth:p,email:vt,emailVerified:Bh,displayName:He,isAnonymous:$_,photoURL:uo,phoneNumber:Ln,tenantId:Vh,stsTokenManager:jh,createdAt:Kc,lastLoginAt:Uh});return cg&&Array.isArray(cg)&&(Hh.providerData=cg.map(dg=>Object.assign({},dg))),$l&&(Hh._redirectEventId=$l),Hh}static _fromIdTokenResponse(p,g,w=!1){return(0,f.Z)(function*(){const D=new Xr;D.updateFromServerResponse(g);const N=new ei({uid:g.localId,auth:p,stsTokenManager:D,isAnonymous:w});return yield Do(N),N})()}}const it=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,f.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function $r(y,p,g){return`firebase:${y}:${p}:${g}`}class mi{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:D,name:N}=this.auth;this.fullUserKey=$r(this.userKey,D.apiKey,N),this.fullPersistenceKey=$r("persistence",D.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?ei._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,f.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new mi(Bt(it),p,w);const D=(yield Promise.all(g.map(function(){var Re=(0,f.Z)(function*($e){if(yield $e._isAvailable())return $e});return function($e){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let N=D[0]||Bt(it);const W=$r(w,p.config.apiKey,p.name);let se=null;for(const Re of g)try{const $e=yield Re._get(W);if($e){const He=ei._fromJSON(p,$e);Re!==N&&(se=He),N=Re;break}}catch($e){}const Me=D.filter(Re=>Re._shouldAllowMigration);return N._shouldAllowMigration&&Me.length?(N=Me[0],se&&(yield N._set(W,se.toJSON())),yield Promise.all(g.map(function(){var Re=(0,f.Z)(function*($e){if($e!==N)try{yield $e._remove(W)}catch(He){}});return function($e){return Re.apply(this,arguments)}}())),new mi(N,p,w)):new mi(N,p,w)})()}}function tr(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Gs(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(aa(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Yt(p))return"Blackberry";if(Zd(p))return"Webos";if(cr(p))return"Safari";if((p.includes("chrome/")||ua(p))&&!p.includes("edge/"))return"Chrome";if(Tr(p))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function aa(y=(0,L.z$)()){return/firefox\//i.test(y)}function cr(y=(0,L.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ua(y=(0,L.z$)()){return/crios\//i.test(y)}function Gs(y=(0,L.z$)()){return/iemobile/i.test(y)}function Tr(y=(0,L.z$)()){return/android/i.test(y)}function Yt(y=(0,L.z$)()){return/blackberry/i.test(y)}function Zd(y=(0,L.z$)()){return/webos/i.test(y)}function la(y=(0,L.z$)()){return/iphone|ipad|ipod/i.test(y)}function ys(y=(0,L.z$)()){return la(y)||Tr(y)||Zd(y)||Yt(y)||/windows phone/i.test(y)||Gs(y)}function dr(y,p=[]){let g;switch(y){case"Browser":g=tr((0,L.z$)());break;case"Worker":g=`${tr((0,L.z$)())}-${y}`;break;default:g=y}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${w}`}class l_{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hr(this),this.idTokenSubscription=new hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=un,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=Bt(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var D,N;if(!w._deleted&&(w.persistenceManager=yield mi.create(w,p),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(W){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,f.Z)(function*(){var w;let D=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const N=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,W=null==D?void 0:D._redirectEventId,se=yield g.tryRedirectSignIn(p);(!N||N===W)&&(null==se?void 0:se.user)&&(D=se.user)}return D?D._redirectEventId?(De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===D._redirectEventId?g.directlySetCurrentUser(D):g.reloadAndSetCurrentUserOrClear(D)):g.reloadAndSetCurrentUserOrClear(D):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,f.Z)(function*(){try{yield Do(p)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,f.Z)(function*(){const w=p?(0,L.m9)(p):null;return w&&De(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return p&&De(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(Bt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,f.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===p?D.removeCurrentUser():D.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&Bt(p)||g._popupRedirectResolver;De(w,g,"argument-error"),g.redirectPersistenceManager=yield mi.create(g,[Bt(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,f.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,f.Z)(function*(){if(p===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,D){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),W=this._isInitialized?Promise.resolve():this._initializationPromise;return De(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof g?p.addObserver(g,w,D):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){const g={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(g["X-Firebase-gmpid"]=p.app.options.appId),g})()}}function hn(y){return(0,L.m9)(y)}class hr{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function su(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function Pi(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class ou{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return er("not implemented")}_getIdTokenResponse(p){return er("not implemented")}_linkToIdToken(p,g){return er("not implemented")}_getReauthenticationResolver(p){return er("not implemented")}}function Yd(y,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:resetPassword",Kt(y,p))})).apply(this,arguments)}function Dp(y,p){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function c_(y,p){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:update",Kt(y,p))})).apply(this,arguments)}function Jd(){return(Jd=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithPassword",Kt(y,p))})).apply(this,arguments)}function yc(y,p){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:sendOobCode",Kt(y,p))})).apply(this,arguments)}function d_(y,p){return eh.apply(this,arguments)}function eh(){return(eh=(0,f.Z)(function*(y,p){return yc(y,p)})).apply(this,arguments)}function h_(y,p){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,f.Z)(function*(y,p){return yc(y,p)})).apply(this,arguments)}function th(y,p){return vc.apply(this,arguments)}function vc(){return(vc=(0,f.Z)(function*(y,p){return yc(y,p)})).apply(this,arguments)}function hl(y,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,f.Z)(function*(y,p){return yc(y,p)})).apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,p))})).apply(this,arguments)}function is(){return(is=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,p))})).apply(this,arguments)}class cu extends ou{constructor(p,g,w,D=null){super("password",w),this._email=p,this._password=g,this._tenantId=D}static _fromEmailAndPassword(p,g){return new cu(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new cu(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function(y,p){return Jd.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(y,p){return lu.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Pt(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return Dp(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(y,p){return is.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:Pt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Oi(y,p){return du.apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithIdp",Kt(y,p))})).apply(this,arguments)}class Dr extends ou{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Dr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Pt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:D}=g,N=Q(g,["providerId","signInMethod"]);if(!w||!D)return null;const W=new Dr(w,D);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(p){return Oi(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Oi(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Oi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,L.xO)(g)}return p}}function ss(y,p){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,p))})).apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,p))})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,p){const g=yield $(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,p));if(g.temporaryProof)throw Be(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const hu={USER_NOT_FOUND:"user-not-found"};function ha(){return(ha=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hu)})).apply(this,arguments)}class So extends ou{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new So({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new So({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(y,p){return pl.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(y,p){return ti.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(y,p){return ha.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}=p;return w||g||D||N?new So({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}):null}}class en{constructor(p){var g,w,D,N,W,se;const Me=(0,L.zd)((0,L.pd)(p)),Re=null!==(g=Me.apiKey)&&void 0!==g?g:null,$e=null!==(w=Me.oobCode)&&void 0!==w?w:null,He=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Me.mode)&&void 0!==D?D:null);De(Re&&$e&&He,"argument-error"),this.apiKey=Re,this.operation=He,this.code=$e,this.continueUrl=null!==(N=Me.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Me.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(se=Me.tenantId)&&void 0!==se?se:null}static parseLink(p){const g=function(y){const p=(0,L.zd)((0,L.pd)(y)).link,g=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(y)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||p||y}(p);try{return new en(g)}catch(w){return null}}}let os=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return cu._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=en.parseLink(w);return De(D,"argument-error"),cu._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Fi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class qt extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class fa extends qt{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return De("providerId"in g&&"signInMethod"in g,"argument-error"),Dr._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return De(p.idToken||p.accessToken,"argument-error"),Dr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return fa.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return fa.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:N,nonce:W,providerId:se}=p;if(!w&&!D&&!g&&!N||!se)return null;try{return new fa(se)._credential({idToken:g,accessToken:w,nonce:W,pendingToken:N})}catch(Me){return null}}}let gl=(()=>{class y extends qt{constructor(){super("facebook.com")}static credential(g){return Dr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),xo=(()=>{class y extends qt{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Dr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return y.credential(w,D)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ni=(()=>{class y extends qt{constructor(){super("github.com")}static credential(g){return Dr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class zs extends ou{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Oi(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Oi(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Oi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:D,pendingToken:N}=g;return w&&D&&N&&w===D?new zs(w,N):null}static _create(p,g){return new zs(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fr extends Fi{constructor(p){De(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return fr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return fr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=zs.fromJSON(p);return De(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return zs._create(w,g)}catch(D){return null}}}let ml=(()=>{class y extends qt{constructor(){super("twitter.com")}static credential(g,w){return Dr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return y.credential(w,D)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function _l(y,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signUp",Kt(y,p))})).apply(this,arguments)}class Mn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,D=!1){return(0,f.Z)(function*(){const N=yield ei._fromIdTokenResponse(p,w,D),W=fu(w);return new Mn({user:N,providerId:W,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const D=fu(w);return new Mn({user:p,providerId:D,_tokenResponse:w,operationType:g})})()}}function fu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function nt(){return(nt=(0,f.Z)(function*(y){var p;const g=hn(y);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new Mn({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield _l(g,{returnSecureToken:!0}),D=yield Mn._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class yl extends L.ZR{constructor(p,g,w,D){var N;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,yl.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,D){return new yl(p,g,w,D)}}function oh(y,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?yl._fromErrorAndOperation(y,N,p,w):N})}function vl(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function gu(){return(gu=(0,f.Z)(function*(y,p){const g=(0,L.m9)(y);yield be(!0,g,p);const{providerUserInfo:w}=yield xn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),D=vl(w||[]);return g.providerData=g.providerData.filter(N=>D.has(N.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function wc(y,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(y,p,g=!1){const w=yield pi(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return Mn._forOperation(y,"link",w)})).apply(this,arguments)}function be(y,p,g){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(y,p,g){yield Do(p);const D=!1===y?"provider-already-linked":"no-such-provider";De(vl(p.providerData).has(g)===y,p.auth,D)})).apply(this,arguments)}function El(y,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(y,p,g=!1){const{auth:w}=y,D="reauthenticate";try{const N=yield pi(y,oh(w,D,p,y),g);De(N.idToken,w,"internal-error");const W=To(N.idToken);De(W,w,"internal-error");const{sub:se}=W;return De(y.uid===se,w,"user-mismatch"),Mn._forOperation(y,D,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Pt(w,"user-mismatch"),N}})).apply(this,arguments)}function wl(y,p){return as.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(y,p,g=!1){const w="signIn",D=yield oh(y,w,p),N=yield Mn._fromIdTokenResponse(y,w,D);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Ar(y,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,p){return wl(hn(y),p)})).apply(this,arguments)}function mu(y,p){return uh.apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(y,p){const g=(0,L.m9)(y);return yield be(!1,g,p.providerId),wc(g,p)})).apply(this,arguments)}function Cc(y,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(y,p){return El((0,L.m9)(y),p)})).apply(this,arguments)}function ma(y,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(y,p){return $(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,p))})).apply(this,arguments)}function _u(){return(_u=(0,f.Z)(function*(y,p){const g=hn(y),w=yield ma(g,{token:p,returnSecureToken:!0}),D=yield Mn._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Li{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Sr._fromServerResponse(p,g):Pt(p,"internal-error")}}class Sr extends Li{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Sr(g)}}function bc(y,p,g){var w;De((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),De(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function yu(){return(yu=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y),D={requestType:"PASSWORD_RESET",email:p};g&&bc(w,D,g),yield h_(w,D)})).apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,p,g){yield Yd((0,L.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(y,p){yield c_((0,L.m9)(y),{oobCode:p})})).apply(this,arguments)}function _a(y,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(y,p){const g=(0,L.m9)(y),w=yield Yd(g,{oobCode:p}),D=w.requestType;switch(De(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(w.mfaInfo,g,"internal-error");default:De(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=Li._fromServerResponse(hn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:D}})).apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(y,p){const{data:g}=yield _a((0,L.m9)(y),p);return g.email})).apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(y,p,g){const w=hn(y),D=yield _l(w,{returnSecureToken:!0,email:p,password:g}),N=yield Mn._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y),D={requestType:"EMAIL_SIGNIN",email:p};De(g.handleCodeInApp,w,"argument-error"),g&&bc(w,D,g),yield th(w,D)})).apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y),D=os.credentialWithLink(p,g||Ye());return De(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ar(w,D)})).apply(this,arguments)}function va(y,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:createAuthUri",Kt(y,p))})).apply(this,arguments)}function Rp(){return(Rp=(0,f.Z)(function*(y,p){const w={identifier:p,continueUri:Xe()?Ye():"http://localhost"},{signinMethods:D}=yield va((0,L.m9)(y),w);return D||[]})).apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(y,p){const g=(0,L.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&bc(g.auth,D,p);const{email:N}=yield d_(g.auth,D);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&bc(w.auth,N,g);const{email:W}=yield hl(w.auth,N);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Il(y,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,p){return ct(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,L.m9)(y),N={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},W=yield pi(w,Il(w.auth,N));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const se=w.providerData.find(({providerId:Me})=>"password"===Me);se&&(se.displayName=w.displayName,se.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function ws(y,p,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(y,p,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(N.email=p),g&&(N.password=g);const W=yield pi(y,Dp(w,N));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class ba{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class Qs extends ba{constructor(p,g,w,D){super(p,g,w),this.username=D}}class xc extends ba{constructor(p,g){super(p,"facebook.com",g)}}class Pp extends Qs{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class m_ extends ba{constructor(p,g){super(p,"google.com",g)}}class __ extends Qs{constructor(p,g,w){super(p,"twitter.com",g,w)}}function Vi(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(y){var p,g;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const W=null===(g=null===(p=To(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(W)return new ba(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new xc(N,D);case"github.com":return new Pp(N,D);case"google.com":return new m_(N,D);case"twitter.com":return new __(N,D,y.screenName||null);case"custom":case"anonymous":return new ba(N,null);default:return new ba(N,w,D)}}(g)}class ri{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new ri("enroll",p)}static _fromMfaPendingCredential(p){return new ri("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ri._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return ri._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Cu{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=hn(p),D=g.customData._serverResponse,N=(D.mfaInfo||[]).map(se=>Li._fromServerResponse(w,se));De(D.mfaPendingCredential,w,"internal-error");const W=ri._fromMfaPendingCredential(D.mfaPendingCredential);return new Cu(W,N,function(){var se=(0,f.Z)(function*(Me){const Re=yield Me._process(w,W);delete D.mfaInfo,delete D.mfaPendingCredential;const $e=Object.assign(Object.assign({},D),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(g.operationType){case"signIn":const He=yield Mn._fromIdTokenResponse(w,g.operationType,$e);return yield w._updateCurrentUser(He.user),He;case"reauthenticate":return De(g.user,w,"internal-error"),Mn._forOperation(g.user,g.operationType,$e);default:Pt(w,"internal-error")}});return function(Me){return se.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,f.Z)(function*(){return g.signInResolver(p)})()}}function lE(y,p){return ct(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,p))}class _h{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Li._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new _h(p)}getSession(){var p=this;return(0,f.Z)(function*(){return ri._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var w=this;return(0,f.Z)(function*(){const D=p,N=yield w.getSession(),W=yield pi(w.user,D._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(p){var g=this;return(0,f.Z)(function*(){const w="string"==typeof p?p:p.uid,D=yield g.user.getIdToken(),N=yield pi(g.user,function(y,p){return ct(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,p))}(g.user.auth,{idToken:D,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:W})=>W!==w),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Dl=new WeakMap,No="__sak";class fn{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(No,"1"),this.storage.removeItem(No),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ta=(()=>{class y extends fn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,L.z$)();return cr(y)||la(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ys(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),N=this.localCache[w];D!==N&&g(w,N,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((se,Me,Re)=>{this.notifyListeners(se,Re)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(D);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const N=()=>{const se=this.storage.getItem(D);!w&&this.localCache[D]===se||this.notifyListeners(D,se)},W=this.storage.getItem(D);(0,L.w1)()&&10===document.documentMode&&W!==g.newValue&&g.newValue!==g.oldValue?setTimeout(N,10):N()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,N=this;return(0,f.Z)(function*(){yield D().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,f.Z)(function*(){const N=yield w().call(D,g);return D.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,D=this;return(0,f.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),Gr=(()=>{class y extends fn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Is=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const D=g,{eventId:N,eventType:W,data:se}=D.data,Me=w.handlersMap[W];if(!(null==Me?void 0:Me.size))return;D.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Re=Array.from(Me).map(function(){var He=(0,f.Z)(function*(vt){return vt(D.origin,se)});return function(vt){return He.apply(this,arguments)}}()),$e=yield function(y){return Promise.all(y.map(function(){var p=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(Re);D.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:$e})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Xs(y="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return y+g}class Da{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var D=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,se;return new Promise((Me,Re)=>{const $e=Xs("",20);N.port1.start();const He=setTimeout(()=>{Re(new Error("unsupported_event"))},w);se={messageChannel:N,onMessage(vt){const Ln=vt;if(Ln.data.eventId===$e)switch(Ln.data.status){case"ack":clearTimeout(He),W=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Me(Ln.data.response);break;default:clearTimeout(He),clearTimeout(W),Re(new Error("invalid_response"))}}},D.handlers.add(se),N.port1.addEventListener("message",se.onMessage),D.target.postMessage({eventType:p,eventId:$e,data:g},[N.port2])}).finally(()=>{se&&D.removeMessageHandler(se)})})()}}function Gn(){return window}function xl(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function Bi(){return(Bi=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const pr="firebaseLocalStorageDb",ii="firebaseLocalStorage",xa="fbase_key";class eo{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ji(y,p){return y.transaction([ii],p?"readwrite":"readonly").objectStore(ii)}function yh(){const y=indexedDB.open(pr,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ii,{keyPath:xa})}catch(D){g(D)}}),y.addEventListener("success",(0,f.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ii)?p(w):(w.close(),yield function(){const y=indexedDB.deleteDatabase(pr);return new eo(y).toPromise()}(),p(yield yh()))}))})}function vh(y,p,g){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,f.Z)(function*(y,p,g){const w=ji(y,!0).put({[xa]:p,value:g});return new eo(w).toPromise()})).apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(y,p){const g=ji(y,!1).get(p),w=yield new eo(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Rl(y,p){const g=ji(y,!0).delete(p);return new eo(g).toPromise()}const Ml=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield yh()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let D=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(D++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return xl()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Is._getInstance(xl()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(D,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(D,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(D,N){return["keyChanged"]});return function(D,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function(){return Bi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Da(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=N[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield yh();return yield vh(g,No,"1"),yield Rl(g,No),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,f.Z)(function*(){return D._withPendingWrite((0,f.Z)(function*(){return yield D._withRetries(N=>vh(N,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const D=yield w._withRetries(N=>function(y,p){return $t.apply(this,arguments)}(N,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(D=>Rl(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(W=>{const se=ji(W,!1).getAll();return new eo(se).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],N=new Set;for(const{fbase_key:W,value:se}of w)N.add(W),JSON.stringify(g.localCache[W])!==JSON.stringify(se)&&(g.notifyListeners(W,se),D.push(W));for(const W of Object.keys(g.localCache))g.localCache[W]&&!N.has(W)&&(g.notifyListeners(W,null),D.push(W));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Up(y,p){return ct(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,p))}function Mc(){return(Mc=(0,f.Z)(function*(y){return(yield ct(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pl(y){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=p,w.onerror=D=>{const N=En("internal-error");N.customData=D,g(N)},w.type="text/javascript",w.charset="UTF-8",function(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(w)})}function to(y){return`__${y}${Math.floor(1e6*Math.random())}`}const yi=1e12;class Po{constructor(p){this.auth=p,this.counter=yi,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new v_(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||yi;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||yi))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(p||yi))||void 0===w||w.execute(),""})()}}class v_{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof p?document.getElementById(p):p;De(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sn=to("rcb"),nr=new Ht(3e4,6e4);class Hi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gn().grecaptcha}load(p,g=""){return De((y=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Gn().grecaptcha):new Promise((w,D)=>{const N=Gn().setTimeout(()=>{D(En(p,"network-request-failed"))},nr.get());Gn()[sn]=()=>{Gn().clearTimeout(N),delete Gn()[sn];const se=Gn().grecaptcha;if(!se)return void D(En(p,"internal-error"));const Me=se.render;se.render=(Re,$e)=>{const He=Me(Re,$e);return this.counter++,He},this.hostLanguage=g,w(se)},Pl(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:sn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),D(En(p,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Gn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oc{load(p){return(0,f.Z)(function*(){return new Po(p)})()}clearedOneInstance(){}}const Fc="recaptcha",Ts={theme:"light",type:"image"};class Lc{constructor(p,g=Object.assign({},Ts),w){this.parameters=g,this.type=Fc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(w),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof p?document.getElementById(p):p;De(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oc:new Hi,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const W=se=>{!se||(p.tokenChangeListeners.delete(W),N(se))};p.tokenChangeListeners.add(W),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=Gn()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){De(Xe()&&!xl(),p.auth,"internal-error"),yield function(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(y){return Mc.apply(this,arguments)}(p.auth);De(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Du{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=So._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Au(){return(Au=(0,f.Z)(function*(y,p,g){const w=hn(y),D=yield A(w,p,(0,L.m9)(g));return new Du(D,N=>Ar(w,N))})).apply(this,arguments)}function Hp(){return(Hp=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y);yield be(!1,w,"phone");const D=yield A(w.auth,p,(0,L.m9)(g));return new Du(D,N=>mu(w,N))})).apply(this,arguments)}function I(){return(I=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y),D=yield A(w.auth,p,(0,L.m9)(g));return new Du(D,N=>Cc(w,N))})).apply(this,arguments)}function A(y,p,g){return M.apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(y,p,g){var w;const D=yield g.verify();try{let N;if(De("string"==typeof D,y,"argument-error"),De(g.type===Fc,y,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const W=N.session;if("phoneNumber"in N)return De("enroll"===W.type,y,"internal-error"),(yield lE(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{De("signin"===W.type,y,"internal-error");const se=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return De(se,y,"missing-multi-factor-info"),(yield Up(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield ss(y,{phoneNumber:N.phoneNumber,recaptchaToken:D});return W}}finally{g._reset()}})).apply(this,arguments)}function J(){return(J=(0,f.Z)(function*(y,p){yield wc((0,L.m9)(y),p)})).apply(this,arguments)}let le=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=hn(g)}verifyPhoneNumber(g,w){return A(this.auth,g,(0,L.m9)(w))}static credential(g,w){return So._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?So._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ie(y,p){return p?Bt(p):(De(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ve extends ou{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Oi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Oi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Oi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Ue(y){return wl(y.auth,new Ve(y),y.bypassAuthState)}function wt(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),El(g,new Ve(y),y.bypassAuthState)}function tn(y){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(y){const{auth:p,user:g}=y;return De(g,p,"internal-error"),wc(g,new Ve(y),y.bypassAuthState)})).apply(this,arguments)}class qr{constructor(p,g,w,D,N=!1){this.auth=p,this.resolver=w,this.user=D,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,f.Z)(function*(w,D){p.pendingPromise={resolve:w,reject:D};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:N,tenantId:W,error:se,type:Me}=p;if(se)return void g.reject(se);const Re={auth:g.auth,requestUri:w,sessionId:D,tenantId:W||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Me)(Re))}catch($e){g.reject($e)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ue;case"linkViaPopup":case"linkViaRedirect":return tn;case"reauthViaPopup":case"reauthViaRedirect":return wt;default:Pt(this.auth,"internal-error")}}resolve(p){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rr=new Ht(2e3,1e4);function ko(){return(ko=(0,f.Z)(function*(y,p,g){const w=hn(y);Ri(y,p,Fi);const D=Ie(w,g);return new Ch(w,"signInViaPopup",p,D).executeNotNull()})).apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y);Ri(w.auth,p,Fi);const D=Ie(w.auth,g);return new Ch(w.auth,"reauthViaPopup",p,D,w).executeNotNull()})).apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y);Ri(w.auth,p,Fi);const D=Ie(w.auth,g);return new Ch(w.auth,"linkViaPopup",p,D,w).executeNotNull()})).apply(this,arguments)}let Ch=(()=>{class y extends qr{constructor(g,w,D,N,W){super(g,w,N,W),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return De(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){Hn(1===g.filter.length,"Popup operations only handle one event");const w=Xs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(En(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,rr.get())};g()}}return y.currentPopupAction=null,y})();const Na=new Map;class ox extends qr{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=Na.get(g.auth._key());if(!w){try{const N=(yield function(y,p){return ro.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(N)}catch(D){w=()=>Promise.reject(D)}Na.set(g.auth._key(),w)}return g.bypassAuthState||Na.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const D=yield w.auth._redirectUserForId(p.eventId);if(D)return w.user=D,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,f.Z)(function*(y,p){const g=ka(p),w=$p(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function Ma(y,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(y,p){return $p(y)._set(ka(p),"true")})).apply(this,arguments)}function $p(y){return Bt(y._redirectPersistence)}function ka(y){return $r("pendingRedirect",y.config.apiKey,y.name)}function us(){return(us=(0,f.Z)(function*(y,p,g){const w=hn(y);Ri(y,p,Fi);const D=Ie(w,g);return yield Ma(D,w),D._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y);Ri(w.auth,p,Fi);const D=Ie(w.auth,g);yield Ma(D,w.auth);const N=yield jb(w);return D._openRedirect(w.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function b_(){return(b_=(0,f.Z)(function*(y,p,g){const w=(0,L.m9)(y);Ri(w.auth,p,Fi);const D=Ie(w.auth,g);yield be(!1,w,p.providerId),yield Ma(D,w.auth);const N=yield jb(w);return D._openRedirect(w.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(y,p){return yield hn(y)._initializationPromise,Fo(y,p,!1)})).apply(this,arguments)}function Fo(y,p){return I_.apply(this,arguments)}function I_(){return(I_=(0,f.Z)(function*(y,p,g=!1){const w=hn(y),D=Ie(w,p),W=yield new ox(w,D,g).execute();return W&&!g&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,p)),W})).apply(this,arguments)}function jb(y){return qp.apply(this,arguments)}function qp(){return(qp=(0,f.Z)(function*(y){const p=Xs(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class cE{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T_(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!T_(p)){const D=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(En(this.auth,D))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wp(p))}saveEventToCache(p){this.cachedEventUids.add(Wp(p)),this.lastProcessedEventTime=Date.now()}}function Wp(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function T_({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ol(y){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,f.Z)(function*(y,p={}){return ct(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dE=/^https?/;function A_(){return(A_=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Ol(y);for(const g of p)try{if(zp(g))return}catch(w){}Pt(y,"unauthorized-domain")})).apply(this,arguments)}function zp(y){const p=Ye(),{protocol:g,hostname:w}=new URL(p);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&W.hostname===w}if(!dE.test(g))return!1;if(Ll.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const bh=new Ht(3e4,6e4);function Zp(){const y=Gn().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let jc=null;function Oa(y){return jc=jc||function(y){return new Promise((p,g)=>{var w,D,N;function W(){Zp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Zp(),g(En(y,"network-request-failed"))},timeout:bh.get()})}if(null===(D=null===(w=Gn().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=Gn().gapi)||void 0===N?void 0:N.load)){const se=to("iframefcb");return Gn()[se]=()=>{gapi.load?W():g(En(y,"network-request-failed"))},Pl(`https://apis.google.com/js/api.js?onload=${se}`).catch(Me=>g(Me))}W()}}).catch(p=>{throw jc=null,p})}(y),jc}const Yp=new Ht(5e3,15e3),fE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ih=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lo(y){const p=y.config;De(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?Oe(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:y.name,v:ce.SDK_VERSION},D=Ih.get(y.config.apiHost);D&&(w.eid=D);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function Th(){return(Th=(0,f.Z)(function*(y){const p=yield Oa(y),g=Gn().gapi;return De(g,y,"internal-error"),p.open({where:document.body,url:Lo(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fE,dontclear:!0},w=>new Promise(function(){var D=(0,f.Z)(function*(N,W){yield w.restyle({setHideOnLeave:!1});const se=En(y,"network-request-failed"),Me=Gn().setTimeout(()=>{W(se)},Yp.get());function Re(){Gn().clearTimeout(Me),N(w)}w.ping(Re).then(Re,()=>{W(se)})});return function(N,W){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const Qp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function eg(y,p,g,w,D,N){De(y.config.authDomain,y,"auth-domain-config-required"),De(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:ce.SDK_VERSION,eventId:D};if(p instanceof Fi){p.setDefaultLanguage(y.languageCode),W.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Me,Re]of Object.entries(N||{}))W[Me]=Re}if(p instanceof qt){const Me=p.getScopes().filter(Re=>""!==Re);Me.length>0&&(W.scopes=Me.join(","))}y.tenantId&&(W.tid=y.tenantId);const se=W;for(const Me of Object.keys(se))void 0===se[Me]&&delete se[Me];return`${function({config:y}){return y.emulator?Oe(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,L.xO)(se).slice(1)}`}const Vl="webStorageSupport";class Hc extends class{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return er("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Hc(p)}_finalizeEnroll(p,g,w){return function(y,p){return ct(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(y,p){return ct(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let R_=(()=>{class y{constructor(){}static assertion(g){return Hc._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var y,Sh="@firebase/auth";class wE{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{var D;p((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function so(){return window}function xh(){return(xh=(0,f.Z)(function*(y,p,g){var w;const{BuildInfo:D}=so();Hn(p.sessionId,"AuthEvent did not contain a session ID");const N=yield IE(p.sessionId),W={};return la()?W.ibi=D.packageName:Tr()?W.apn=D.packageName:Pt(y,"operation-not-supported-in-this-environment"),D.displayName&&(W.appDisplayName=D.displayName),W.sessionId=N,eg(y,g,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function ng(){return(ng=(0,f.Z)(function*(y){const{BuildInfo:p}=so(),g={};la()?g.iosBundleId=p.packageName:Tr()?g.androidPackageName=p.packageName:Pt(y,"operation-not-supported-in-this-environment"),yield Ol(y,g)})).apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(y,p,g){const{cordova:w}=so();let D=()=>{};try{yield new Promise((N,W)=>{let se=null;function Me(){var He;N();const vt=null===(He=w.plugins.browsertab)||void 0===He?void 0:He.close;"function"==typeof vt&&vt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Re(){se||(se=window.setTimeout(()=>{W(En(y,"redirect-cancelled-by-user"))},2e3))}function $e(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}p.addPassiveListener(Me),document.addEventListener("resume",Re,!1),Tr()&&document.addEventListener("visibilitychange",$e,!1),D=()=>{p.removePassiveListener(Me),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",$e,!1),se&&window.clearTimeout(se)}})}finally{D()}})).apply(this,arguments)}function IE(y){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,f.Z)(function*(y){const p=P_(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function P_(y){if(Hn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}y="Browser",(0,ce._registerComponent)(new We.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),{apiKey:D,authDomain:N}=w.options;return(W=>{De(D&&!D.includes(":"),"invalid-api-key",{appName:W.name}),De(!(null==N?void 0:N.includes(":")),"argument-error",{appName:W.name});const se={apiKey:D,authDomain:N,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dr(y)},Me=new l_(W,se);return function(y,p){const g=(null==p?void 0:p.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Bt);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(Me,g),Me})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new We.wA("auth-internal",p=>{const g=hn(p.getProvider("auth").getImmediate());return new wE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Sh,"0.19.4",void 0),(0,ce.registerVersion)(Sh,"0.19.4","esm2017");class k_ extends cE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function O_(y){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,f.Z)(function*(y){const p=yield rt()._get(pn(y));return p&&(yield rt()._remove(pn(y))),p})).apply(this,arguments)}function F_(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*p.length);y.push(p.charAt(w))}return y.join("")}function rt(){return Bt(Ta)}function pn(y){return $r("authEvent",y.config.apiKey,y.name)}function oo(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...g]=y.split("?");return(0,L.zd)(g.join("?"))}function qc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:En("no-auth-event")}}function Mh(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function L_(y=(0,L.z$)()){return!("file:"!==Mh()&&"ionic:"!==Mh()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function SE(){try{const y=self.localStorage,p=Xs();if(y)return y.setItem(p,"1"),y.removeItem(p),!function(y=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,L.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,L.hl)()}catch(y){return Ph()&&(0,L.hl)()}return!1}function Ph(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function me(){return("http:"===Mh()||"https:"===Mh()||(0,L.ru)()||L_())&&!((0,L.b$)()||(0,L.UG)())&&SE()&&!Ph()}function wi(){return L_()&&"undefined"!=typeof document}function qi(){return(qi=(0,f.Z)(function*(){return!!wi()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const k={LOCAL:"local",NONE:"none",SESSION:"session"},jl=De,Wi="persistence";function zc(y){return tt.apply(this,arguments)}function tt(){return(tt=(0,f.Z)(function*(y){yield y._initializationPromise;const p=Oh(),g=$r(Wi,y.config.apiKey,y.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(g,y._getPersistence())})).apply(this,arguments)}function Oh(){return"undefined"!=typeof window?window:null}const Zc=De;class La{constructor(){this.browserResolver=Bt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gr,this._completeRedirectFn=Fo}_openPopup(p,g,w,D){var N=this;return(0,f.Z)(function*(){var W;Hn(null===(W=N.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const se=eg(p,g,w,Ye(),D);return function(y,p,g,w=500,D=600){const N=Math.max((window.screen.availHeight-D)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let se="";const Me=Object.assign(Object.assign({},Qp),{width:w.toString(),height:D.toString(),top:N,left:W}),Re=(0,L.z$)().toLowerCase();g&&(se=ua(Re)?"_blank":g),aa(Re)&&(p=p||"http://localhost",Me.scrollbars="yes");const $e=Object.entries(Me).reduce((vt,[Ln,uo])=>`${vt}${Ln}=${uo},`,"");if(function(y=(0,L.z$)()){var p;return la(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Re)&&"_self"!==se)return function(y,p){const g=document.createElement("a");g.href=y,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",se),new Dh(null);const He=window.open(p||"",se,$e);De(He,y,"popup-blocked");try{He.focus()}catch(vt){}return new Dh(He)}(p,se,Xs())})()}_openRedirect(p,g,w,D){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(p),y=eg(p,g,w,Ye(),D),Gn().location.href=y,new Promise(()=>{});var y})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:D,promise:N}=this.eventManagers[g];return D?Promise.resolve(D):(Hn(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(p){var g=this;return(0,f.Z)(function*(){const w=yield function(y){return Th.apply(this,arguments)}(p),D=new cE(p);return w.register("authEvent",N=>(De(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:D.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:D},g.iframes[p._key()]=w,D})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Vl,{type:Vl},D=>{var N;const W=null===(N=null==D?void 0:D[0])||void 0===N?void 0:N[Vl];void 0!==W&&g(!!W),Pt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return A_.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ys()||cr()||la()}}),this.cordovaResolver=Bt(class{constructor(){this._redirectPersistence=Gr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fo}_initialize(p){var g=this;return(0,f.Z)(function*(){const w=p._key();let D=g.eventManagers.get(w);return D||(D=new k_(p),g.eventManagers.set(w,D),g.attachCallbackListeners(p,D)),D})()}_openPopup(p){Pt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,w,D){var N=this;return(0,f.Z)(function*(){!function(y){var p,g,w,D,N,W,se,Me,Re,$e;const He=so();De("function"==typeof(null===(p=null==He?void 0:He.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(g=null==He?void 0:He.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(N=null===(D=null===(w=null==He?void 0:He.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Me=null===(se=null===(W=null==He?void 0:He.cordova)||void 0===W?void 0:W.plugins)||void 0===se?void 0:se.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===($e=null===(Re=null==He?void 0:He.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===$e?void 0:$e.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const W=yield N._initialize(p);yield W.initialized(),W.resetRedirect(),Na.clear(),yield N._originValidation(p);const se=function(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:F_(),postBody:null,tenantId:y.tenantId,error:En(y,"no-auth-event")}}(p,w,D);yield function(y,p){return rt()._set(pn(y),p)}(p,se);const Me=yield function(y,p,g){return xh.apply(this,arguments)}(p,se,g),Re=yield function(y){const{cordova:p}=so();return new Promise(g=>{p.plugins.browsertab.isAvailable(w=>{let D=null;w?p.plugins.browsertab.openUrl(y):D=p.InAppBrowser.open(y,function(y=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(Me);return function(y,p,g){return Gc.apply(this,arguments)}(p,W,Re)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(y){return ng.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:N}=so(),W=setTimeout((0,f.Z)(function*(){yield O_(p),g.onEvent(qc())}),500),se=function(){var $e=(0,f.Z)(function*(He){clearTimeout(W);const vt=yield O_(p);let Ln=null;vt&&(null==He?void 0:He.url)&&(Ln=function(y,p){var g,w;const D=function(y){const p=oo(y),g=p.link?decodeURIComponent(p.link):void 0,w=oo(g).link,D=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return oo(D).link||D||w||g||y}(p);if(D.includes("/__/auth/callback")){const N=oo(D),W=N.firebaseError?function(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(N.firebaseError)):null,se=null===(w=null===(g=null==W?void 0:W.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Me=se?En(se):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(vt,He.url)),g.onEvent(Ln||qc())});return function(vt){return $e.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,se);const Me=D,Re=`${N.packageName.toLowerCase()}://`;so().handleOpenURL=function(){var $e=(0,f.Z)(function*(He){if(He.toLowerCase().startsWith(Re)&&se({url:He}),"function"==typeof Me)try{Me(He)}catch(vt){console.error(vt)}});return function(He){return $e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gr,this._completeRedirectFn=Fo}_initialize(p){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,w,D){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,g,w,D)})()}_openRedirect(p,g,w,D){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,g,w,D)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return wi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return qi.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Fh(y){return y.unwrap()}function ls(y){return gr(y)}function gr(y){const{_tokenResponse:p}=y instanceof L.ZR?y.customData:y;if(!p)return null;if(!(y instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return le.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=xo;break;case"facebook.com":w=gl;break;case"github.com":w=ni;break;case"twitter.com":w=ml;break;default:const{oauthIdToken:D,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:se,nonce:Me}=p;return N||W||D||se?se?g.startsWith("saml.")?zs._create(g,se):Dr._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:D,accessToken:N}):new fa(g).credential({idToken:D,accessToken:N,rawNonce:Me}):null}return y instanceof L.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function xr(y,p){return p.catch(g=>{throw g instanceof L.ZR&&function(y,p){var g;const w=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new j_(y,function(y,p){var g;const w=(0,L.m9)(y),D=p;return De(p.customData.operationType,w,"argument-error"),De(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Cu._fromError(w,D)}(y,p));else if(w){const D=gr(p),N=p;D&&(N.credential=D,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:ls(g),additionalUserInfo:Vi(g),user:jo.getOrCreate(D)}})}function Qn(y,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:w=>xr(y,g.confirm(w))}})).apply(this,arguments)}class j_{constructor(p,g){this.resolver=g,this.auth=function(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return xr(Fh(this.auth),this.resolver.resolveSignIn(p))}}class jo{constructor(p){this._delegate=p,this.multiFactor=function(y){const p=(0,L.m9)(y);return Dl.has(p)||Dl.set(p,_h._fromUser(p)),Dl.get(p)}(p)}static getOrCreate(p){return jo.USER_MAP.has(p)||jo.USER_MAP.set(p,new jo(p)),jo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,f.Z)(function*(){return xr(g.auth,mu(g._delegate,p))})()}linkWithPhoneNumber(p,g){var w=this;return(0,f.Z)(function*(){return Qn(w.auth,function(y,p,g){return Hp.apply(this,arguments)}(w._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,f.Z)(function*(){return xr(g.auth,function(y,p,g){return Ds.apply(this,arguments)}(g._delegate,p,La))})()}linkWithRedirect(p){var g=this;return(0,f.Z)(function*(){return yield zc(hn(g.auth)),function(y,p,g){return function(y,p,g){return b_.apply(this,arguments)}(y,p,g)}(g._delegate,p,La)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,f.Z)(function*(){return xr(g.auth,Cc(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Qn(this.auth,function(y,p,g){return I.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return xr(this.auth,function(y,p,g){return $i.apply(this,arguments)}(this._delegate,p,La))}reauthenticateWithRedirect(p){var g=this;return(0,f.Z)(function*(){return yield zc(hn(g.auth)),function(y,p,g){return function(y,p,g){return Oo.apply(this,arguments)}(y,p,g)}(g._delegate,p,La)})()}sendEmailVerification(p){return function(y,p){return Ea.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,f.Z)(function*(){return yield function(y,p){return gu.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(y,p){return ws((0,L.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function(y,p){return ws((0,L.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(y,p){return J.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(y,p){return Tn.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(y,p,g){return wa.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jo.USER_MAP=new WeakMap;const Hl=De;let ag=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;Hl(D,"invalid-api-key",{appName:g.name});let N=[it];if("undefined"!=typeof window){N=function(y,p){const g=Oh();if(!(null==g?void 0:g.sessionStorage))return[];const w=$r(Wi,y,p);switch(g.sessionStorage.getItem(w)){case k.NONE:return[it];case k.LOCAL:return[Ml,Gr];case k.SESSION:return[Gr];default:return[]}}(D,g.name);for(const se of[Ml,Ta,Gr])N.includes(se)||N.push(se)}Hl(D,"invalid-api-key",{appName:g.name});const W="undefined"!=typeof window?La:void 0;this._delegate=w.initialize({options:{persistence:N,popupRedirectResolver:W}}),this._delegate._updateErrorMap(Hs),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(y,p,g){const w=hn(y);De(w._canInitEmulator,w,"emulator-config-failed"),De(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),N=su(p),{host:W,port:se}=function(y){const p=su(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const N=D[1];return{host:N,port:Pi(w.substr(N.length+1))}}{const[N,W]=w.split(":");return{host:N,port:Pi(W)}}}(p);w.config.emulator={url:`${N}//${W}${null===se?"":`:${se}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function(y,p){return bl.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return _a(this._delegate,g)}confirmPasswordReset(g,w){return function(y,p,g){return vu.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,f.Z)(function*(){return xr(D._delegate,function(y,p,g){return Dc.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(y,p){return Rp.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(y,p){const g=en.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Hl(me(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(y,p){return io.apply(this,arguments)}(g._delegate,La);return w?xr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(y,p){hn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:N,error:W,complete:se}=Nu(g,w,D);return this._delegate.onAuthStateChanged(N,W,se)}onIdTokenChanged(g,w,D){const{next:N,error:W,complete:se}=Nu(g,w,D);return this._delegate.onIdTokenChanged(N,W,se)}sendSignInLinkToEmail(g,w){return function(y,p,g){return Es.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(y,p,g){return yu.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let D;switch(function(y,p){jl(Object.values(k).includes(p),y,"invalid-persistence-type"),(0,L.b$)()?jl(p!==k.SESSION,y,"unsupported-persistence-type"):(0,L.UG)()?jl(p===k.NONE,y,"unsupported-persistence-type"):Ph()?jl(p===k.NONE||p===k.LOCAL&&(0,L.hl)(),y,"unsupported-persistence-type"):jl(p===k.NONE||SE(),y,"unsupported-persistence-type")}(w._delegate,g),g){case k.SESSION:D=Gr;break;case k.LOCAL:D=(yield Bt(Ml)._isAvailable())?Ml:Ta;break;case k.NONE:D=it;break;default:return Pt("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return xr(this._delegate,function(y){return nt.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return xr(this._delegate,Ar(this._delegate,g))}signInWithCustomToken(g){return xr(this._delegate,function(y,p){return _u.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return xr(this._delegate,function(y,p,g){return Ar((0,L.m9)(y),os.credential(p,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return xr(this._delegate,function(y,p,g){return Kn.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Qn(this._delegate,function(y,p,g){return Au.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return Hl(me(),w._delegate,"operation-not-supported-in-this-environment"),xr(w._delegate,function(y,p,g){return ko.apply(this,arguments)}(w._delegate,g,La))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return Hl(me(),w._delegate,"operation-not-supported-in-this-environment"),yield zc(w._delegate),function(y,p,g){return function(y,p,g){return us.apply(this,arguments)}(y,p,g)}(w._delegate,g,La)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(y,p){return Ro.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=k,y})();function Nu(y,p,g){let w=y;"function"!=typeof y&&({next:w,error:p,complete:g}=y);const D=w;return{next:W=>D(W&&jo.getOrCreate(W)),error:p,complete:g}}class zi{constructor(){this.providerId="phone",this._delegate=new le(Fh(ne.Z.auth()))}static credential(p,g){return le.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}zi.PHONE_SIGN_IN_METHOD=le.PHONE_SIGN_IN_METHOD,zi.PROVIDER_ID=le.PROVIDER_ID;const H_=De;class ug{constructor(p,g,w=ne.Z.app()){var D;H_(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Lc(p,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new We.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new ag(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:os,FacebookAuthProvider:gl,GithubAuthProvider:ni,GoogleAuthProvider:xo,OAuthProvider:fa,SAMLAuthProvider:fr,PhoneAuthProvider:zi,PhoneMultiFactorGenerator:R_,RecaptchaVerifier:ug,TwitterAuthProvider:ml,Auth:ag,AuthCredential:ou,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.4")}(ne.Z)},6676:function(ze,Ce){!function(U){"use strict";function f(fe){return Array.prototype.slice.call(fe)}function ne(fe){return new Promise(function(re,he){fe.onsuccess=function(){re(fe.result)},fe.onerror=function(){he(fe.error)}})}function L(fe,re,he){var ye,xe=new Promise(function(qe,Ct){ne(ye=fe[re].apply(fe,he)).then(qe,Ct)});return xe.request=ye,xe}function ce(fe,re,he){var ye=L(fe,re,he);return ye.then(function(xe){if(xe)return new V(xe,ye.request)})}function ie(fe,re,he){he.forEach(function(ye){Object.defineProperty(fe.prototype,ye,{get:function(){return this[re][ye]},set:function(xe){this[re][ye]=xe}})})}function Y(fe,re,he,ye){ye.forEach(function(xe){xe in he.prototype&&(fe.prototype[xe]=function(){return L(this[re],xe,arguments)})})}function ge(fe,re,he,ye){ye.forEach(function(xe){xe in he.prototype&&(fe.prototype[xe]=function(){return this[re][xe].apply(this[re],arguments)})})}function Q(fe,re,he,ye){ye.forEach(function(xe){xe in he.prototype&&(fe.prototype[xe]=function(){return ce(this[re],xe,arguments)})})}function X(fe){this._index=fe}function V(fe,re){this._cursor=fe,this._request=re}function j(fe){this._store=fe}function G(fe){this._tx=fe,this.complete=new Promise(function(re,he){fe.oncomplete=function(){re()},fe.onerror=function(){he(fe.error)},fe.onabort=function(){he(fe.error)}})}function ae(fe,re,he){this._db=fe,this.oldVersion=re,this.transaction=new G(he)}function de(fe){this._db=fe}ie(X,"_index",["name","keyPath","multiEntry","unique"]),Y(X,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Q(X,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie(V,"_cursor",["direction","key","primaryKey","value"]),Y(V,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(fe){fe in IDBCursor.prototype&&(V.prototype[fe]=function(){var re=this,he=arguments;return Promise.resolve().then(function(){return re._cursor[fe].apply(re._cursor,he),ne(re._request).then(function(ye){if(ye)return new V(ye,re._request)})})})}),j.prototype.createIndex=function(){return new X(this._store.createIndex.apply(this._store,arguments))},j.prototype.index=function(){return new X(this._store.index.apply(this._store,arguments))},ie(j,"_store",["name","keyPath","indexNames","autoIncrement"]),Y(j,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Q(j,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ge(j,"_store",IDBObjectStore,["deleteIndex"]),G.prototype.objectStore=function(){return new j(this._tx.objectStore.apply(this._tx,arguments))},ie(G,"_tx",["objectStoreNames","mode"]),ge(G,"_tx",IDBTransaction,["abort"]),ae.prototype.createObjectStore=function(){return new j(this._db.createObjectStore.apply(this._db,arguments))},ie(ae,"_db",["name","version","objectStoreNames"]),ge(ae,"_db",IDBDatabase,["deleteObjectStore","close"]),de.prototype.transaction=function(){return new G(this._db.transaction.apply(this._db,arguments))},ie(de,"_db",["name","version","objectStoreNames"]),ge(de,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(fe){[j,X].forEach(function(re){fe in re.prototype&&(re.prototype[fe.replace("open","iterate")]=function(){var he=f(arguments),ye=he[he.length-1],xe=this._store||this._index,qe=xe[fe].apply(xe,he.slice(0,-1));qe.onsuccess=function(){ye(qe.result)}})})}),[X,j].forEach(function(fe){fe.prototype.getAll||(fe.prototype.getAll=function(re,he){var ye=this,xe=[];return new Promise(function(qe){ye.iterateCursor(re,function(Ct){Ct?(xe.push(Ct.value),void 0===he||xe.length!=he?Ct.continue():qe(xe)):qe(xe)})})})}),U.openDb=function(fe,re,he){var ye=L(indexedDB,"open",[fe,re]),xe=ye.request;return xe&&(xe.onupgradeneeded=function(qe){he&&he(new ae(xe.result,qe.oldVersion,xe.transaction))}),ye.then(function(qe){return new de(qe)})},U.deleteDb=function(fe){return L(indexedDB,"deleteDatabase",[fe])},Object.defineProperty(U,"__esModule",{value:!0})}(Ce)},7574:(ze,Ce,U)=>{"use strict";U.d(Ce,{y:()=>j});var f=U(7393),L=U(9181),ce=U(6490),Y=U(6554),ge=U(4487);var V=U(2494);let j=(()=>{class ae{constructor(Ee){this._isScalar=!1,Ee&&(this._subscribe=Ee)}lift(Ee){const _e=new ae;return _e.source=this,_e.operator=Ee,_e}subscribe(Ee,_e,fe){const{operator:re}=this,he=function(ae,de,Ee){if(ae){if(ae instanceof f.L)return ae;if(ae[L.b])return ae[L.b]()}return ae||de||Ee?new f.L(ae,de,Ee):new f.L(ce.c)}(Ee,_e,fe);if(he.add(re?re.call(he,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),V.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch(_e){V.v.useDeprecatedSynchronousErrorHandling&&(Ee.syncErrorThrown=!0,Ee.syncErrorValue=_e),function(ae){for(;ae;){const{closed:de,destination:Ee,isStopped:_e}=ae;if(de||_e)return!1;ae=Ee&&Ee instanceof f.L?Ee:null}return!0}(Ee)?Ee.error(_e):console.warn(_e)}}forEach(Ee,_e){return new(_e=G(_e))((fe,re)=>{let he;he=this.subscribe(ye=>{try{Ee(ye)}catch(xe){re(xe),he&&he.unsubscribe()}},re,fe)})}_subscribe(Ee){const{source:_e}=this;return _e&&_e.subscribe(Ee)}[Y.L](){return this}pipe(...Ee){return 0===Ee.length?this:function(ae){return 0===ae.length?ge.y:1===ae.length?ae[0]:function(Ee){return ae.reduce((_e,fe)=>fe(_e),Ee)}}(Ee)(this)}toPromise(Ee){return new(Ee=G(Ee))((_e,fe)=>{let re;this.subscribe(he=>re=he,he=>fe(he),()=>_e(re))})}}return ae.create=de=>new ae(de),ae})();function G(ae){if(ae||(ae=V.v.Promise||Promise),!ae)throw new Error("no Promise impl found");return ae}},6490:(ze,Ce,U)=>{"use strict";U.d(Ce,{c:()=>L});var f=U(2494),ne=U(4449);const L={closed:!0,next(ce){},error(ce){if(f.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,ne.z)(ce)},complete(){}}},9765:(ze,Ce,U)=>{"use strict";U.d(Ce,{Yc:()=>ge,xQ:()=>Q});var f=U(7574),ne=U(7393),L=U(5319),ce=U(7971),ie=U(8858),Y=U(9181);class ge extends ne.L{constructor(j){super(j),this.destination=j}}let Q=(()=>{class V extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Y.b](){return new ge(this)}lift(G){const ae=new X(this,this);return ae.operator=G,ae}next(G){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:ae}=this,de=ae.length,Ee=ae.slice();for(let _e=0;_e<de;_e++)Ee[_e].next(G)}}error(G){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:ae}=this,de=ae.length,Ee=ae.slice();for(let _e=0;_e<de;_e++)Ee[_e].error(G);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:G}=this,ae=G.length,de=G.slice();for(let Ee=0;Ee<ae;Ee++)de[Ee].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ce.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ce.N;return this.hasError?(G.error(this.thrownError),L.w.EMPTY):this.isStopped?(G.complete(),L.w.EMPTY):(this.observers.push(G),new ie.W(this,G))}asObservable(){const G=new f.y;return G.source=this,G}}return V.create=(j,G)=>new X(j,G),V})();class X extends Q{constructor(j,G){super(),this.destination=j,this.source=G}next(j){const{destination:G}=this;G&&G.next&&G.next(j)}error(j){const{destination:G}=this;G&&G.error&&this.destination.error(j)}complete(){const{destination:j}=this;j&&j.complete&&this.destination.complete()}_subscribe(j){const{source:G}=this;return G?this.source.subscribe(j):L.w.EMPTY}}},8858:(ze,Ce,U)=>{"use strict";U.d(Ce,{W:()=>ne});var f=U(5319);class ne extends f.w{constructor(ce,ie){super(),this.subject=ce,this.subscriber=ie,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,ie=ce.observers;if(this.subject=null,!ie||0===ie.length||ce.isStopped||ce.closed)return;const Y=ie.indexOf(this.subscriber);-1!==Y&&ie.splice(Y,1)}}},7393:(ze,Ce,U)=>{"use strict";U.d(Ce,{L:()=>ge});var f=U(9105),ne=U(6490),L=U(5319),ce=U(9181),ie=U(2494),Y=U(4449);class ge extends L.w{constructor(V,j,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!V){this.destination=ne.c;break}if("object"==typeof V){V instanceof ge?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,V,j,G)}}[ce.b](){return this}static create(V,j,G){const ae=new ge(V,j,G);return ae.syncErrorThrowable=!1,ae}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class Q extends ge{constructor(V,j,G,ae){super(),this._parentSubscriber=V;let de,Ee=this;(0,f.m)(j)?de=j:j&&(de=j.next,G=j.error,ae=j.complete,j!==ne.c&&(Ee=Object.create(j),(0,f.m)(Ee.unsubscribe)&&this.add(Ee.unsubscribe.bind(Ee)),Ee.unsubscribe=this.unsubscribe.bind(this))),this._context=Ee,this._next=de,this._error=G,this._complete=ae}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:j}=this;ie.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?this.__tryOrSetError(j,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:j}=this,{useDeprecatedSynchronousErrorHandling:G}=ie.v;if(this._error)G&&j.syncErrorThrowable?(this.__tryOrSetError(j,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(j.syncErrorThrowable)G?(j.syncErrorValue=V,j.syncErrorThrown=!0):(0,Y.z)(V),this.unsubscribe();else{if(this.unsubscribe(),G)throw V;(0,Y.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const j=()=>this._complete.call(this._context);ie.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,j),this.unsubscribe()):(this.__tryOrUnsub(j),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,j){try{V.call(this._context,j)}catch(G){if(this.unsubscribe(),ie.v.useDeprecatedSynchronousErrorHandling)throw G;(0,Y.z)(G)}}__tryOrSetError(V,j,G){if(!ie.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{j.call(this._context,G)}catch(ae){return ie.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=ae,V.syncErrorThrown=!0,!0):((0,Y.z)(ae),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(ze,Ce,U)=>{"use strict";U.d(Ce,{w:()=>Y});var f=U(9796),ne=U(1555),L=U(9105);const ie=(()=>{function Q(X){return Error.call(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((V,j)=>`${j+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X,this}return Q.prototype=Object.create(Error.prototype),Q})();class Y{constructor(X){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,X&&(this._ctorUnsubscribe=!0,this._unsubscribe=X)}unsubscribe(){let X;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:j,_unsubscribe:G,_subscriptions:ae}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof Y)V.remove(this);else if(null!==V)for(let de=0;de<V.length;++de)V[de].remove(this);if((0,L.m)(G)){j&&(this._unsubscribe=void 0);try{G.call(this)}catch(de){X=de instanceof ie?ge(de.errors):[de]}}if((0,f.k)(ae)){let de=-1,Ee=ae.length;for(;++de<Ee;){const _e=ae[de];if((0,ne.K)(_e))try{_e.unsubscribe()}catch(fe){X=X||[],fe instanceof ie?X=X.concat(ge(fe.errors)):X.push(fe)}}}if(X)throw new ie(X)}add(X){let V=X;if(!X)return Y.EMPTY;switch(typeof X){case"function":V=new Y(X);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof Y)){const ae=V;V=new Y,V._subscriptions=[ae]}break;default:throw new Error("unrecognized teardown "+X+" added to Subscription.")}let{_parentOrParents:j}=V;if(null===j)V._parentOrParents=this;else if(j instanceof Y){if(j===this)return V;V._parentOrParents=[j,this]}else{if(-1!==j.indexOf(this))return V;j.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[V]:G.push(V),V}remove(X){const V=this._subscriptions;if(V){const j=V.indexOf(X);-1!==j&&V.splice(j,1)}}}var Q;function ge(Q){return Q.reduce((X,V)=>X.concat(V instanceof ie?V.errors:V),[])}Y.EMPTY=((Q=new Y).closed=!0,Q)},2494:(ze,Ce,U)=>{"use strict";U.d(Ce,{v:()=>ne});let f=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=L},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(ze,Ce,U)=>{"use strict";U.d(Ce,{IY:()=>ce,Ds:()=>Y,ft:()=>Q});var f=U(7393),ne=U(7574),L=U(7444);class ce extends f.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Y extends f.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function Q(X,V){if(V.closed)return;if(X instanceof ne.y)return X.subscribe(V);let j;try{j=(0,L.s)(X)(V)}catch(G){V.error(G)}return j}},2441:(ze,Ce,U)=>{"use strict";U.d(Ce,{c:()=>ie,N:()=>Y});var f=U(9765),ne=U(7574),L=U(5319),ce=U(1307);class ie extends ne.y{constructor(j,G){super(),this.source=j,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let j=this._connection;return j||(this._isComplete=!1,j=this._connection=new L.w,j.add(this.source.subscribe(new ge(this.getSubject(),this))),j.closed&&(this._connection=null,j=L.w.EMPTY)),j}refCount(){return(0,ce.x)()(this)}}const Y=(()=>{const V=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class ge extends f.Yc{constructor(j,G){super(j),this.connectable=G}_error(j){this._unsubscribe(),super._error(j)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const j=this.connectable;if(j){this.connectable=null;const G=j._connection;j._refCount=0,j._subject=null,j._connection=null,G&&G.unsubscribe()}}}},9193:(ze,Ce,U)=>{"use strict";U.d(Ce,{E:()=>ne,c:()=>L});var f=U(7574);const ne=new f.y(ie=>ie.complete());function L(ie){return ie?function(ie){return new f.y(Y=>ie.schedule(()=>Y.complete()))}(ie):ne}},4402:(ze,Ce,U)=>{"use strict";U.d(Ce,{D:()=>Ee});var f=U(7574),ne=U(7444),L=U(5319),ce=U(6554),ge=U(4087),Q=U(377),j=U(4072),G=U(9489);function Ee(_e,fe){return fe?function(_e,fe){if(null!=_e){if(function(_e){return _e&&"function"==typeof _e[ce.L]}(_e))return function(_e,fe){return new f.y(re=>{const he=new L.w;return he.add(fe.schedule(()=>{const ye=_e[ce.L]();he.add(ye.subscribe({next(xe){he.add(fe.schedule(()=>re.next(xe)))},error(xe){he.add(fe.schedule(()=>re.error(xe)))},complete(){he.add(fe.schedule(()=>re.complete()))}}))})),he})}(_e,fe);if((0,j.t)(_e))return function(_e,fe){return new f.y(re=>{const he=new L.w;return he.add(fe.schedule(()=>_e.then(ye=>{he.add(fe.schedule(()=>{re.next(ye),he.add(fe.schedule(()=>re.complete()))}))},ye=>{he.add(fe.schedule(()=>re.error(ye)))}))),he})}(_e,fe);if((0,G.z)(_e))return(0,ge.r)(_e,fe);if(function(_e){return _e&&"function"==typeof _e[Q.hZ]}(_e)||"string"==typeof _e)return function(_e,fe){if(!_e)throw new Error("Iterable cannot be null");return new f.y(re=>{const he=new L.w;let ye;return he.add(()=>{ye&&"function"==typeof ye.return&&ye.return()}),he.add(fe.schedule(()=>{ye=_e[Q.hZ](),he.add(fe.schedule(function(){if(re.closed)return;let xe,qe;try{const Ct=ye.next();xe=Ct.value,qe=Ct.done}catch(Ct){return void re.error(Ct)}qe?re.complete():(re.next(xe),this.schedule())}))})),he})}(_e,fe)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,fe):_e instanceof f.y?_e:new f.y((0,ne.s)(_e))}},6693:(ze,Ce,U)=>{"use strict";U.d(Ce,{n:()=>ce});var f=U(7574),ne=U(5015),L=U(4087);function ce(ie,Y){return Y?(0,L.r)(ie,Y):new f.y((0,ne.V)(ie))}},6682:(ze,Ce,U)=>{"use strict";U.d(Ce,{T:()=>ie});var f=U(7574),ne=U(4869),L=U(3282),ce=U(6693);function ie(...Y){let ge=Number.POSITIVE_INFINITY,Q=null,X=Y[Y.length-1];return(0,ne.K)(X)?(Q=Y.pop(),Y.length>1&&"number"==typeof Y[Y.length-1]&&(ge=Y.pop())):"number"==typeof X&&(ge=Y.pop()),null===Q&&1===Y.length&&Y[0]instanceof f.y?Y[0]:(0,L.J)(ge)((0,ce.n)(Y,Q))}},5917:(ze,Ce,U)=>{"use strict";U.d(Ce,{of:()=>ce});var f=U(4869),ne=U(6693),L=U(4087);function ce(...ie){let Y=ie[ie.length-1];return(0,f.K)(Y)?(ie.pop(),(0,L.r)(ie,Y)):(0,ne.n)(ie)}},8002:(ze,Ce,U)=>{"use strict";U.d(Ce,{U:()=>ne});var f=U(7393);function ne(ie,Y){return function(Q){if("function"!=typeof ie)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Q.lift(new L(ie,Y))}}class L{constructor(Y,ge){this.project=Y,this.thisArg=ge}call(Y,ge){return ge.subscribe(new ce(Y,this.project,this.thisArg))}}class ce extends f.L{constructor(Y,ge,Q){super(Y),this.project=ge,this.count=0,this.thisArg=Q||this}_next(Y){let ge;try{ge=this.project.call(this.thisArg,Y,this.count++)}catch(Q){return void this.destination.error(Q)}this.destination.next(ge)}}},3282:(ze,Ce,U)=>{"use strict";U.d(Ce,{J:()=>L});var f=U(9773),ne=U(4487);function L(ce=Number.POSITIVE_INFINITY){return(0,f.zg)(ne.y,ce)}},9773:(ze,Ce,U)=>{"use strict";U.d(Ce,{zg:()=>ce});var f=U(8002),ne=U(4402),L=U(5345);function ce(Q,X,V=Number.POSITIVE_INFINITY){return"function"==typeof X?j=>j.pipe(ce((G,ae)=>(0,ne.D)(Q(G,ae)).pipe((0,f.U)((de,Ee)=>X(G,de,ae,Ee))),V)):("number"==typeof X&&(V=X),j=>j.lift(new ie(Q,V)))}class ie{constructor(X,V=Number.POSITIVE_INFINITY){this.project=X,this.concurrent=V}call(X,V){return V.subscribe(new Y(X,this.project,this.concurrent))}}class Y extends L.Ds{constructor(X,V,j=Number.POSITIVE_INFINITY){super(X),this.project=V,this.concurrent=j,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(X){this.active<this.concurrent?this._tryNext(X):this.buffer.push(X)}_tryNext(X){let V;const j=this.index++;try{V=this.project(X,j)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(V)}_innerSub(X){const V=new L.IY(this),j=this.destination;j.add(V);const G=(0,L.ft)(X,V);G!==V&&j.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(X){this.destination.next(X)}notifyComplete(){const X=this.buffer;this.active--,X.length>0?this._next(X.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(ze,Ce,U)=>{"use strict";U.d(Ce,{ht:()=>j,QV:()=>X});var f=U(7393),ne=U(9193),L=U(5917),ce=U(7574);class Q{constructor(de,Ee,_e){this.kind=de,this.value=Ee,this.error=_e,this.hasValue="N"===de}observe(de){switch(this.kind){case"N":return de.next&&de.next(this.value);case"E":return de.error&&de.error(this.error);case"C":return de.complete&&de.complete()}}do(de,Ee,_e){switch(this.kind){case"N":return de&&de(this.value);case"E":return Ee&&Ee(this.error);case"C":return _e&&_e()}}accept(de,Ee,_e){return de&&"function"==typeof de.next?this.observe(de):this.do(de,Ee,_e)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return ae=this.error,new ce.y(Ee=>Ee.error(ae));case"C":return(0,ne.c)()}var ae;throw new Error("unexpected notification kind value")}static createNext(de){return void 0!==de?new Q("N",de):Q.undefinedValueNotification}static createError(de){return new Q("E",void 0,de)}static createComplete(){return Q.completeNotification}}function X(ae,de=0){return function(_e){return _e.lift(new V(ae,de))}}Q.completeNotification=new Q("C"),Q.undefinedValueNotification=new Q("N",void 0);class V{constructor(de,Ee=0){this.scheduler=de,this.delay=Ee}call(de,Ee){return Ee.subscribe(new j(de,this.scheduler,this.delay))}}class j extends f.L{constructor(de,Ee,_e=0){super(de),this.scheduler=Ee,this.delay=_e}static dispatch(de){const{notification:Ee,destination:_e}=de;Ee.observe(_e),this.unsubscribe()}scheduleMessage(de){this.destination.add(this.scheduler.schedule(j.dispatch,this.delay,new G(de,this.destination)))}_next(de){this.scheduleMessage(Q.createNext(de))}_error(de){this.scheduleMessage(Q.createError(de)),this.unsubscribe()}_complete(){this.scheduleMessage(Q.createComplete()),this.unsubscribe()}}class G{constructor(de,Ee){this.notification=de,this.destination=Ee}}},1307:(ze,Ce,U)=>{"use strict";U.d(Ce,{x:()=>ne});var f=U(7393);function ne(){return function(Y){return Y.lift(new L(Y))}}class L{constructor(Y){this.connectable=Y}call(Y,ge){const{connectable:Q}=this;Q._refCount++;const X=new ce(Y,Q),V=ge.subscribe(X);return X.closed||(X.connection=Q.connect()),V}}class ce extends f.L{constructor(Y,ge){super(Y),this.connectable=ge}_unsubscribe(){const{connectable:Y}=this;if(!Y)return void(this.connection=null);this.connectable=null;const ge=Y._refCount;if(ge<=0)return void(this.connection=null);if(Y._refCount=ge-1,ge>1)return void(this.connection=null);const{connection:Q}=this,X=Y._connection;this.connection=null,X&&(!Q||X===Q)&&X.unsubscribe()}}},8819:(ze,Ce,U)=>{"use strict";U.d(Ce,{B:()=>ge});var f=U(2441);var ce=U(1307),ie=U(9765);function Y(){return new ie.xQ}function ge(){return Q=>(0,ce.x)()(function(Q,X){return function(j){let G;G="function"==typeof Q?Q:function(){return Q};const ae=Object.create(j,f.N);return ae.source=j,ae.subjectFactory=G,ae}}(Y)(Q))}},3101:(ze,Ce,U)=>{"use strict";U.d(Ce,{R:()=>fe});var f=U(7574);let ne=1;const L=Promise.resolve(),ce={};function ie(he){return he in ce&&(delete ce[he],!0)}const Y={setImmediate(he){const ye=ne++;return ce[ye]=!0,L.then(()=>ie(ye)&&he()),ye},clearImmediate(he){ie(he)}};var Q=U(6465),V=U(6102);const ae=new class extends V.v{flush(ye){this.active=!0,this.scheduled=void 0;const{actions:xe}=this;let qe,Ct=-1,xt=xe.length;ye=ye||xe.shift();do{if(qe=ye.execute(ye.state,ye.delay))break}while(++Ct<xt&&(ye=xe.shift()));if(this.active=!1,qe){for(;++Ct<xt&&(ye=xe.shift());)ye.unsubscribe();throw qe}}}(class extends Q.o{constructor(ye,xe){super(ye,xe),this.scheduler=ye,this.work=xe}requestAsyncId(ye,xe,qe=0){return null!==qe&&qe>0?super.requestAsyncId(ye,xe,qe):(ye.actions.push(this),ye.scheduled||(ye.scheduled=Y.setImmediate(ye.flush.bind(ye,null))))}recycleAsyncId(ye,xe,qe=0){if(null!==qe&&qe>0||null===qe&&this.delay>0)return super.recycleAsyncId(ye,xe,qe);0===ye.actions.length&&(Y.clearImmediate(xe),ye.scheduled=void 0)}});var de=U(9796);class _e extends f.y{constructor(ye,xe=0,qe=ae){var he;super(),this.source=ye,this.delayTime=xe,this.scheduler=qe,(!(!(0,de.k)(he=xe)&&he-parseFloat(he)+1>=0)||xe<0)&&(this.delayTime=0),(!qe||"function"!=typeof qe.schedule)&&(this.scheduler=ae)}static create(ye,xe=0,qe=ae){return new _e(ye,xe,qe)}static dispatch(ye){const{source:xe,subscriber:qe}=ye;return this.add(xe.subscribe(qe))}_subscribe(ye){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:ye})}}function fe(he,ye=0){return function(qe){return qe.lift(new re(he,ye))}}class re{constructor(ye,xe){this.scheduler=ye,this.delay=xe}call(ye,xe){return new _e(xe,this.delay,this.scheduler).subscribe(ye)}}},3342:(ze,Ce,U)=>{"use strict";U.d(Ce,{b:()=>ce});var f=U(7393);function ne(){}var L=U(9105);function ce(ge,Q,X){return function(j){return j.lift(new ie(ge,Q,X))}}class ie{constructor(Q,X,V){this.nextOrObserver=Q,this.error=X,this.complete=V}call(Q,X){return X.subscribe(new Y(Q,this.nextOrObserver,this.error,this.complete))}}class Y extends f.L{constructor(Q,X,V,j){super(Q),this._tapNext=ne,this._tapError=ne,this._tapComplete=ne,this._tapError=V||ne,this._tapComplete=j||ne,(0,L.m)(X)?(this._context=this,this._tapNext=X):X&&(this._context=X,this._tapNext=X.next||ne,this._tapError=X.error||ne,this._tapComplete=X.complete||ne)}_next(Q){try{this._tapNext.call(this._context,Q)}catch(X){return void this.destination.error(X)}this.destination.next(Q)}_error(Q){try{this._tapError.call(this._context,Q)}catch(X){return void this.destination.error(X)}this.destination.error(Q)}_complete(){try{this._tapComplete.call(this._context)}catch(Q){return void this.destination.error(Q)}return this.destination.complete()}}},4087:(ze,Ce,U)=>{"use strict";U.d(Ce,{r:()=>L});var f=U(7574),ne=U(5319);function L(ce,ie){return new f.y(Y=>{const ge=new ne.w;let Q=0;return ge.add(ie.schedule(function(){Q!==ce.length?(Y.next(ce[Q++]),Y.closed||ge.add(this.schedule())):Y.complete()})),ge})}},6465:(ze,Ce,U)=>{"use strict";U.d(Ce,{o:()=>L});var f=U(5319);class ne extends f.w{constructor(ie,Y){super()}schedule(ie,Y=0){return this}}class L extends ne{constructor(ie,Y){super(ie,Y),this.scheduler=ie,this.work=Y,this.pending=!1}schedule(ie,Y=0){if(this.closed)return this;this.state=ie;const ge=this.id,Q=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(Q,ge,Y)),this.pending=!0,this.delay=Y,this.id=this.id||this.requestAsyncId(Q,this.id,Y),this}requestAsyncId(ie,Y,ge=0){return setInterval(ie.flush.bind(ie,this),ge)}recycleAsyncId(ie,Y,ge=0){if(null!==ge&&this.delay===ge&&!1===this.pending)return Y;clearInterval(Y)}execute(ie,Y){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ie,Y);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,Y){let Q,ge=!1;try{this.work(ie)}catch(X){ge=!0,Q=!!X&&X||new Error(X)}if(ge)return this.unsubscribe(),Q}_unsubscribe(){const ie=this.id,Y=this.scheduler,ge=Y.actions,Q=ge.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Q&&ge.splice(Q,1),null!=ie&&(this.id=this.recycleAsyncId(Y,ie,null)),this.delay=null}}},6102:(ze,Ce,U)=>{"use strict";U.d(Ce,{v:()=>ne});let f=(()=>{class L{constructor(ie,Y=L.now){this.SchedulerAction=ie,this.now=Y}schedule(ie,Y=0,ge){return new this.SchedulerAction(this,ie).schedule(ge,Y)}}return L.now=()=>Date.now(),L})();class ne extends f{constructor(ce,ie=f.now){super(ce,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():ie()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,ie=0,Y){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(ce,ie,Y):super.schedule(ce,ie,Y)}flush(ce){const{actions:ie}=this;if(this.active)return void ie.push(ce);let Y;this.active=!0;do{if(Y=ce.execute(ce.state,ce.delay))break}while(ce=ie.shift());if(this.active=!1,Y){for(;ce=ie.shift();)ce.unsubscribe();throw Y}}}},3637:(ze,Ce,U)=>{"use strict";U.d(Ce,{z:()=>L});var f=U(6465);const L=new(U(6102).v)(f.o)},7771:(ze,Ce,U)=>{"use strict";U.d(Ce,{c:()=>Y,N:()=>ie});var f=U(6465),L=U(6102);const ie=new class extends L.v{}(class extends f.o{constructor(Q,X){super(Q,X),this.scheduler=Q,this.work=X}schedule(Q,X=0){return X>0?super.schedule(Q,X):(this.delay=X,this.state=Q,this.scheduler.flush(this),this)}execute(Q,X){return X>0||this.closed?super.execute(Q,X):this._execute(Q,X)}requestAsyncId(Q,X,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(Q,X,V):Q.flush(this)}}),Y=ie},377:(ze,Ce,U)=>{"use strict";U.d(Ce,{hZ:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ze,Ce,U)=>{"use strict";U.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ze,Ce,U)=>{"use strict";U.d(Ce,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ze,Ce,U)=>{"use strict";U.d(Ce,{N:()=>ne});const ne=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(ze,Ce,U)=>{"use strict";function f(ne){setTimeout(()=>{throw ne},0)}U.d(Ce,{z:()=>f})},4487:(ze,Ce,U)=>{"use strict";function f(ne){return ne}U.d(Ce,{y:()=>f})},9796:(ze,Ce,U)=>{"use strict";U.d(Ce,{k:()=>f});const f=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},9489:(ze,Ce,U)=>{"use strict";U.d(Ce,{z:()=>f});const f=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9105:(ze,Ce,U)=>{"use strict";function f(ne){return"function"==typeof ne}U.d(Ce,{m:()=>f})},1555:(ze,Ce,U)=>{"use strict";function f(ne){return null!==ne&&"object"==typeof ne}U.d(Ce,{K:()=>f})},4072:(ze,Ce,U)=>{"use strict";function f(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}U.d(Ce,{t:()=>f})},4869:(ze,Ce,U)=>{"use strict";function f(ne){return ne&&"function"==typeof ne.schedule}U.d(Ce,{K:()=>f})},7444:(ze,Ce,U)=>{"use strict";U.d(Ce,{s:()=>j});var f=U(5015),ne=U(4449),ce=U(377),Y=U(6554),Q=U(9489),X=U(4072),V=U(1555);const j=G=>{if(G&&"function"==typeof G[Y.L])return(G=>ae=>{const de=G[Y.L]();if("function"!=typeof de.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return de.subscribe(ae)})(G);if((0,Q.z)(G))return(0,f.V)(G);if((0,X.t)(G))return(G=>ae=>(G.then(de=>{ae.closed||(ae.next(de),ae.complete())},de=>ae.error(de)).then(null,ne.z),ae))(G);if(G&&"function"==typeof G[ce.hZ])return(G=>ae=>{const de=G[ce.hZ]();for(;;){let Ee;try{Ee=de.next()}catch(_e){return ae.error(_e),ae}if(Ee.done){ae.complete();break}if(ae.next(Ee.value),ae.closed)break}return"function"==typeof de.return&&ae.add(()=>{de.return&&de.return()}),ae})(G);{const de=`You provided ${(0,V.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(de)}}},5015:(ze,Ce,U)=>{"use strict";U.d(Ce,{V:()=>f});const f=ne=>L=>{for(let ce=0,ie=ne.length;ce<ie&&!L.closed;ce++)L.next(ne[ce]);L.complete()}},7724:(ze,Ce,U)=>{"use strict";var f=U(7716);let ne=null;function L(){return ne}const ge=new f.OlP("DocumentToken");let Q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:X,token:n,providedIn:"platform"}),n})();function X(){return(0,f.LFG)(j)}const V=new f.OlP("Location Initialized");let j=(()=>{class n extends Q{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){G()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){G()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=(0,f.Yz7)({factory:ae,token:n,providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function ae(){return new j((0,f.LFG)(ge))}function de(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _e(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:re,token:n,providedIn:"root"}),n})();function re(n){const e=(0,f.LFG)(ge).location;return new ye((0,f.LFG)(Q),e&&e.origin||"")}const he=new f.OlP("appBaseHref");let ye=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return de(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+_e(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+_e(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+_e(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Q),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=de(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+_e(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+_e(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Q),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ee(gt(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_e(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(Q))},n.normalizeQueryParams=_e,n.joinWithSlash=de,n.stripTrailingSlash=Ee,n.\u0275prov=(0,f.Yz7)({factory:Ct,token:n,providedIn:"root"}),n})();function Ct(){return new qe((0,f.LFG)(fe),(0,f.LFG)(Q))}function gt(n){return n.replace(/\/index.html$/,"")}var ut=(()=>((ut=ut||{})[ut.Zero=0]="Zero",ut[ut.One=1]="One",ut[ut.Two=2]="Two",ut[ut.Few=3]="Few",ut[ut.Many=4]="Many",ut[ut.Other=5]="Other",ut))();const ns=f.kL8;class $r{}let tr=(()=>{class n extends $r{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ns(r||this.locale)(t)){case ut.Zero:return"zero";case ut.One:return"one";case ut.Two:return"two";case ut.Few:return"few";case ut.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),rs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ca("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ca("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mc{constructor(){this.$implicit=null,this.ngIf=null}}function ca(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:$r,useClass:tr}]}),n})();function fl(n){return"server"===n}let hu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new rh((0,f.LFG)(ge),window)}),n})();class rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ha(this.window.history)||ha(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ha(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class sh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new sh,ne||(ne=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(os=os||document.querySelector("base"),os?os.getAttribute("href"):null);return null==t?null:function(n){qt=qt||document.createElement("a"),qt.setAttribute("href",n);const e=qt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let qt,os=null;const gl=new f.OlP("TRANSITION_ID"),ni=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=L(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[gl,ge,f.zs3],multi:!0}];class $n{static init(){(0,f.VLi)(new $n)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const m=function(E){d=d||E,l--,0==l&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zs=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vs=new f.OlP("EventManagerPlugins");let be=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class yt{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=L().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let El=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),rn=(()=>{class n extends El{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(wl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wl))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function wl(n){L().remove(n)}const as={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ar=/%COMP%/g;function Pn(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Pn(n,o,t):(o=o.replace(Ar,n),t.push(o))}return t}function _i(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Li=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Sr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ic(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new vu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Pn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(be),f.LFG(rn),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Sr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(as[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=as[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=as[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_i(r)):this.eventManager.addEventListener(e,t,_i(r))}}class Ic extends Sr{constructor(e,t,r,o){super(e),this.component=r;const l=Pn(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Ar,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Ar,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class vu extends Sr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Pn(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const m=document.createElement("style");m.textContent=l[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Eu=(()=>{class n extends yt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Es=["alt","control","meta","shift"],Ac={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},g_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ea=(()=>{class n extends yt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(Es.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),d+=E+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Kn.hasOwnProperty(e)&&(e=Kn[e]))}return Ac[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Es.forEach(l=>{l!=o&&g_[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),wa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return(0,f.LFG)(Ys)},token:n,providedIn:"root"}),n})(),Ys=(()=>{class n extends wa{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case f.q3G.NONE:return r;case f.q3G.HTML:return(0,f.qzn)(r,"HTML")?(0,f.z3N)(r):(0,f.EiD)(this._doc,String(r)).toString();case f.q3G.STYLE:return(0,f.qzn)(r,"Style")?(0,f.z3N)(r):r;case f.q3G.SCRIPT:if((0,f.qzn)(r,"Script"))return(0,f.z3N)(r);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.yhl)(r),(0,f.qzn)(r,"URL")?(0,f.z3N)(r):(0,f.mCW)(String(r));case f.q3G.RESOURCE_URL:if((0,f.qzn)(r,"ResourceURL"))return(0,f.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,f.JVY)(t)}bypassSecurityTrustStyle(t){return(0,f.L6k)(t)}bypassSecurityTrustScript(t){return(0,f.eBb)(t)}bypassSecurityTrustUrl(t){return(0,f.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,f.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=(0,f.Yz7)({factory:function(){return function(n){return new Ys(n.get(ge))}((0,f.LFG)(f.gxx))},token:n,providedIn:"root"}),n})();const Qs=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){sh.makeCurrent(),$n.init()},multi:!0},{provide:ge,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),xc=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:vs,useClass:Eu,multi:!0,deps:[ge,f.R0b,f.Lbi]},{provide:vs,useClass:Ea,multi:!0,deps:[ge]},[],{provide:Li,useClass:Li,deps:[be,rn,f.AFp]},{provide:f.FYo,useExisting:Li},{provide:El,useExisting:rn},{provide:rn,useClass:rn,deps:[ge]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:be,useClass:be,deps:[vs,f.R0b]},{provide:class{},useClass:zs,deps:[]},[]];let Pp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:gl,useExisting:f.AFp},ni]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:xc,imports:[Oi,f.hGG]}),n})();"undefined"!=typeof window&&window;var fn=U(4402),_n=U(7574),Mo=U(9796),st=U(8002),Al=U(1555);function Iu(n,e){return new _n.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let l=0,d=0;for(let m=0;m<r;m++){const E=(0,fn.D)(n[m]);let b=!1;t.add(E.subscribe({next:x=>{b||(b=!0,d++),o[m]=x},error:x=>t.error(x),complete:()=>{l++,(l===r||!b)&&(d===r&&t.next(e?e.reduce((x,R,F)=>(x[R]=o[F],x),{}):o),t.complete())}}))}})}let Gr=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),bs=(()=>{class n extends Gr{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Is=new f.OlP("NgValueAccessor"),Gn={provide:Is,useExisting:(0,f.Gpc)(()=>Ui),multi:!0},xl=new f.OlP("CompositionEventMode");let Ui=(()=>{class n extends Gr{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(xl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[f._Bn([Gn]),f.qOj]}),n})();function Bi(n){return null==n||0===n.length}function Aa(n){return null!=n&&"number"==typeof n.length}const Yn=new f.OlP("NgValidators"),pr=new f.OlP("NgAsyncValidators"),Sa=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ii{static min(e){return function(n){return e=>{if(Bi(e.value)||Bi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(Bi(e.value)||Bi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return ji(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return Bi(n.value)||Sa.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>Bi(e.value)||!Aa(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>Aa(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return $t;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bi(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Bp(e)}static composeAsync(e){return Mc(e)}}function ji(n){return Bi(n.value)?{required:!0}:null}function $t(n){return null}function Rl(n){return null!=n}function Nl(n){const e=(0,f.QGY)(n)?(0,fn.D)(n):n;return(0,f.CqO)(e),e}function Vp(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function y_(n,e){return e.map(t=>t(n))}function Up(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Bp(n){if(!n)return null;const e=n.filter(Rl);return 0==e.length?null:function(t){return Vp(y_(t,e))}}function wh(n){return null!=n?Bp(Up(n)):null}function Mc(n){if(!n)return null;const e=n.filter(Rl);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Mo.k)(e))return Iu(e,null);if((0,Al.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Iu(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Iu(n=1===n.length&&(0,Mo.k)(n[0])?n[0]:n,null).pipe((0,st.U)(t=>e(...t)))}return Iu(n,null)}(y_(t,e).map(Nl)).pipe((0,st.U)(Vp))}}function Pc(n){return null!=n?Mc(Up(n)):null}function Pl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function to(n){return n._rawValidators}function kc(n){return n._rawAsyncValidators}function Cn(n){return n?Array.isArray(n)?n:[n]:[]}function yi(n,e){return Array.isArray(n)?n.includes(e):n===e}function Po(n,e){const t=Cn(e);return Cn(n).forEach(o=>{yi(t,o)||t.push(o)}),t}function v_(n,e){return Cn(e).filter(t=>!yi(n,t))}let jp=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=wh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Pc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),sn=(()=>{class n extends jp{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class nr extends jp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Oc=(()=>{class n extends Tu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(nr,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Fc=(()=>{class n extends Tu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function J(n,e){Ue(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qr(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qr(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function le(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wt(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ie(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ue(n,e){const t=to(n);null!==e.validator?n.setValidators(Pl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=kc(n);null!==e.asyncValidator?n.setAsyncValidators(Pl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ie(e._rawValidators,o),Ie(e._rawAsyncValidators,o)}function wt(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=to(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=kc(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return Ie(e._rawValidators,r),Ie(e._rawAsyncValidators,r),t}function qr(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Na(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const As="VALID",ro="INVALID",Ma="PENDING",Pa="DISABLED";function $p(n){return(us(n)?n.validators:n)||null}function ka(n){return Array.isArray(n)?wh(n):n||null}function Ss(n,e){return(us(e)?e.asyncValidators:n)||null}function Uc(n){return Array.isArray(n)?Pc(n):n||null}function us(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Gp{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ka(this._rawValidators),this._composedAsyncValidatorFn=Uc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===As}get invalid(){return this.status===ro}get pending(){return this.status==Ma}get disabled(){return this.status===Pa}get enabled(){return this.status!==Pa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ka(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Uc(e)}addValidators(e){this.setValidators(Po(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Po(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(v_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(v_(e,this._rawAsyncValidators))}hasValidator(e){return yi(this._rawValidators,e)}hasAsyncValidator(e){return yi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ma,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pa,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=As,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===As||this.status===Ma)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pa:As}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ma,this._hasOwnPendingAsyncValidator=!0;const t=Nl(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Oo?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof kl&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Pa:this.errors?ro:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ma)?Ma:this._anyControlsHaveStatus(ro)?ro:As}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){us(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ru extends Gp{constructor(e=null,t,r){super($p(t),Ss(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Na(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Na(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Oo extends Gp{constructor(e,t,r){super($p(t),Ss(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Ru?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class kl extends Gp{constructor(e,t,r){super($p(t),Ss(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Ru?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Yp=new f.OlP("NgModelWithFormControlWarning"),fE={provide:sn,useExisting:(0,f.Gpc)(()=>Ih)};let Ih=(()=>{class n extends sn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return J(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){le(t.control||null,t,!1),Na(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(le(r||null,t),o instanceof Ru&&(J(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){Ue(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return wt(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&wt(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Yn,10),f.Y36(pr,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([fE]),f.qOj,f.TTD]}),n})();const pE={provide:nr,useExisting:(0,f.Gpc)(()=>Jp)};let Jp=(()=>{class n extends nr{constructor(t,r,o,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Ui?t=l:function(n){return Object.getPrototypeOf(n.constructor)===bs}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sn,13),f.Y36(Yn,10),f.Y36(pr,10),f.Y36(Is,10),f.Y36(Yp,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([pE]),f.qOj,f.TTD]}),n._ngModelWarningSentOnce=!1,n})();const Gb={provide:Yn,useExisting:(0,f.Gpc)(()=>$c),multi:!0};let $c=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?ji(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[f._Bn([Gb])]}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[bh]]}),n})(),Fn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[P_]}),n})(),k_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[P_]}),n})(),ig=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,l=null,d=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Oo(o,{asyncValidators:d,updateOn:m,validators:l})}control(t,r,o){return new Ru(t,r,o)}array(t,r,o){const l=t.map(d=>this._createControl(d));return new kl(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Ru||t instanceof Oo||t instanceof kl?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n},token:n,providedIn:k_}),n})();const Nh_firebase={apiKey:"AIzaSyA2Pr7_QqibMnOXFl9lsK8vpQ6GbhpgdY4",authDomain:"portfolio-7808e.firebaseapp.com",databaseURL:"https://portfolio-7808e-default-rtdb.firebaseio.com",projectId:"portfolio-7808e",storageBucket:"portfolio-7808e.appspot.com",messagingSenderId:"275734235757",appId:"1:275734235757:web:8f8dc6086f38888f390d64",measurementId:"G-TS6C3DNKHK"};var si=U(8939),F_=U(3637),rt=U(5917),pn=U(3944),sg=U(3282);function oo(...n){return(0,sg.J)(1)((0,rt.of)(...n))}var Wr=U(4869);function Bl(...n){const e=n[n.length-1];return(0,Wr.K)(e)?(n.pop(),t=>oo(n,t,e)):t=>oo(n,t)}var Gi=U(7393);function qc(){return n=>n.lift(new zr)}class zr{call(e,t){return t.subscribe(new Wc(e))}}class Wc extends Gi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function Vo(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new DE(n,e,t))}}class DE{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Mh(e,this.accumulator,this.seed,this.hasSeed))}}class Mh extends Gi.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function og(n,e){return t=>t.lift(new L_(n,e))}class L_{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new V_(e,this.compare,this.keySelector))}}class V_ extends Gi.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function Uo(n,e){return function(r){return r.lift(new U_(n,e))}}class U_{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new AE(e,this.predicate,this.thisArg))}}class AE extends Gi.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}U(2755);var je,Ph=U(3394),me=U(8239),wi=U(8026),ao=U(3910),qi=U(5422),k=U(3854),jl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wi={},zc=zc||{},tt=jl||self;function kh(){}function Oh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fh="closure_uid_"+(1e9*Math.random()>>>0),Lh=0;function ls(n,e,t){return n.call.apply(n.bind,arguments)}function B_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gr(n,e,t){return(gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ls:B_).apply(null,arguments)}function xr(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Bo(){this.s=this.s,this.o=this.o}var jo={};Bo.prototype.s=!1,Bo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Fh)&&n[Fh]||(n[Fh]=++Lh)}(this);delete jo[n]}},Bo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hl=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ag=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function zi(n){return Array.prototype.concat.apply([],arguments)}function H_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ug(n){return/^[\s\xa0]*$/.test(n)}var p,lg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ci(n,e){return-1!=n.indexOf(e)}function y(n,e){return n<e?-1:n>e?1:0}e:{var g=tt.navigator;if(g){var w=g.userAgent;if(w){p=w;break e}}p=""}function D(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function N(n){const e={};for(const t in n)e[t]=n[t];return e}var W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<W.length;l++)t=W[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Me(n){return Me[" "](n),n}Me[" "]=kh;var Kc,n,$e=Ci(p,"Opera"),He=Ci(p,"Trident")||Ci(p,"MSIE"),vt=Ci(p,"Edge"),Ln=vt||He,uo=Ci(p,"Gecko")&&!(Ci(p.toLowerCase(),"webkit")&&!Ci(p,"Edge"))&&!(Ci(p,"Trident")||Ci(p,"MSIE"))&&!Ci(p,"Edge"),Vh=Ci(p.toLowerCase(),"webkit")&&!Ci(p,"Edge");function $l(){var n=tt.document;return n?n.documentMode:void 0}e:{var Uh="",Yc=(n=p,uo?/rv:([^\);]+)(\)|;)/.exec(n):vt?/Edge\/([\d\.]+)/.exec(n):He?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Vh?/WebKit\/(\S+)/.exec(n):$e?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yc&&(Uh=Yc?Yc[1]:""),He){var Bh=$l();if(null!=Bh&&Bh>parseFloat(Uh)){Kc=String(Bh);break e}}Kc=Uh}var $_={};function cg(){return e=$_,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=lg(String(Kc)).split("."),t=lg("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=y(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||y(0==o[2].length,0==l[2].length)||y(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n}();var e}var Hh=tt.document&&He&&($l()||parseInt(Kc,10))||void 0,dg=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{tt.addEventListener("test",kh,e),tt.removeEventListener("test",kh,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function hg(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uo){e:{try{Me(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hg.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},Qn(hg,bi);var zb={2:"touch",3:"pen",4:"mouse"};hg.prototype.h=function(){hg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $h="closure_listenable_"+(1e6*Math.random()|0),Jc=0;function Zb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Jc,this.ca=this.fa=!1}function fg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function G_(n){this.src=n,this.g={},this.h=0}function Gh(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Hl(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(fg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xE(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}G_.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=xE(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Zb(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var q_="closure_lm_"+(1e6*Math.random()|0),W_={};function RE(n,e,t,r,o){if(r&&r.once)return pg(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)RE(n,e[l],t,r,o);return null}return t=NE(t),n&&n[$h]?n.N(e,t,Zc(r)?!!r.capture:!!r,o):z_(n,e,t,!1,r,o)}function z_(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=Zc(o)?!!o.capture:!!o,m=mg(n);if(m||(n[q_]=m=new G_(n)),(t=m.add(e,t,r,d,l)).proxy)return t;if(r=function(){var e=Yb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dg||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(K_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function pg(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)pg(n,e[l],t,r,o);return null}return t=NE(t),n&&n[$h]?n.O(e,t,Zc(r)?!!r.capture:!!r,o):z_(n,e,t,!0,r,o)}function gg(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)gg(n,e[l],t,r,o);else r=Zc(r)?!!r.capture:!!r,t=NE(t),n&&n[$h]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xE(l=n.g[e],t,r,o))&&(fg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=mg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xE(e,t,r,o)),(t=-1<n?e[n]:null)&&Z_(t))}function Z_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[$h])Gh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(K_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mg(e))?(Gh(t,n),0==t.h&&(t.src=null,e[q_]=null)):fg(n)}}}function K_(n){return n in W_?W_[n]:W_[n]="on"+n}function Yb(n,e){if(n.ca)n=!0;else{e=new hg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Z_(n),n=t.call(r,e)}return n}function mg(n){return(n=n[q_])instanceof G_?n:null}var Xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function NE(n){return"function"==typeof n?n:(n[Xc]||(n[Xc]=function(e){return n.handleEvent(e)}),n[Xc])}function Rr(){Bo.call(this),this.i=new G_(this),this.P=this,this.I=null}function oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var o=e;se(e=new bi(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=Y_(d,r,!0,e)&&o}if(o=Y_(d=e.g=n,r,!0,e)&&o,o=Y_(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Y_(d=e.g=t[l],r,!1,e)&&o}function Y_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Gh(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Qn(Rr,Bo),Rr.prototype[$h]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){gg(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)fg(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Q_=tt.JSON.stringify;function ME(){var n=Xb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var PE,ax=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Jb,n=>n.reset());class Jb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ux(n){tt.setTimeout(()=>{throw n},0)}function J_(n,e){PE||function(){var n=tt.Promise.resolve(void 0);PE=function(){n.then(eI)}}(),Rs||(PE(),Rs=!0),Xb.add(n,e)}var Rs=!1,Xb=new class{constructor(){this.h=this.g=null}add(e,t){const r=ax.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eI(){for(var n;n=ME();){try{n.h.call(n.g)}catch(t){ux(t)}var e=ax;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rs=!1}function X_(n,e){Rr.call(this),this.h=n||1,this.g=e||tt,this.j=gr(this.kb,this),this.l=Date.now()}function kE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function OE(n,e,t){if("function"==typeof n)t&&(n=gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:tt.setTimeout(n,e||0)}function tI(n){n.g=OE(()=>{n.g=null,n.i&&(n.i=!1,tI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qn(X_,Rr),(je=X_.prototype).da=!1,je.S=null,je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oi(this,"tick"),this.da&&(kE(this),this.start()))}},je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},je.M=function(){X_.Z.M.call(this),kE(this),delete this.g};class nI extends Bo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tI(this)}M(){super.M(),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _g(n){Bo.call(this),this.h=n,this.g={}}Qn(_g,Bo);var rI=[];function iI(n,e,t,r){Array.isArray(t)||(t&&(rI[0]=t.toString()),t=rI);for(var o=0;o<t.length;o++){var l=RE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function pt(n){D(n.g,function(e,t){this.g.hasOwnProperty(t)&&Z_(e)},n),n.g={}}function yg(){this.g=!0}function Ii(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return Q_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}_g.prototype.M=function(){_g.Z.M.call(this),pt(this)},_g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yg.prototype.Aa=function(){this.g=!1},yg.prototype.info=function(){};var Mu={},Va=null;function qh(){return Va=Va||new Rr}function FE(n){bi.call(this,Mu.Ma,n)}function ed(n){const e=qh();oi(e,new FE(e,n))}function dx(n,e){bi.call(this,Mu.STAT_EVENT,n),this.stat=e}function Ti(n){const e=qh();oi(e,new dx(e,n))}function hx(n,e){bi.call(this,Mu.Na,n),this.size=e}function Ns(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){n()},e)}Mu.Ma="serverreachability",Qn(FE,bi),Mu.STAT_EVENT="statevent",Qn(dx,bi),Mu.Na="timingevent",Qn(hx,bi);var td={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Eg(){}function aI(){}Eg.prototype.h=null;var lI,Wh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uI(){bi.call(this,"d")}function LE(){bi.call(this,"c")}function wg(){}function zh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new _g(this),this.P=VE,this.W=new X_(n=Ln?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cI}function cI(){this.i=null,this.g="",this.h=!1}Qn(uI,bi),Qn(LE,bi),Qn(wg,Eg),wg.prototype.g=function(){return new XMLHttpRequest},wg.prototype.i=function(){return{}},lI=new wg;var VE=45e3,dI={},UE={};function hI(n,e,t){n.K=1,n.v=oy(ku(e)),n.s=t,n.U=!0,px(n,null)}function px(n,e){n.F=Date.now(),ty(n),n.A=ku(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),GE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new cI,n.g=UI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new nI(gr(n.Ia,n,n.g),n.O)),iI(n.V,n.g,"readystatechange",n.gb),e=n.H?N(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ed(1),function(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",m=l.split("&"),E=0;E<m.length;E++){var b=m[E].split("=");if(1<b.length){var x=b[0];b=b[1];var R=x.split("_");d=2<=R.length&&"type"==R[1]?d+(x+"=")+b+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gx(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function mx(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=MP(n,t),o==UE){4==e&&(n.o=4,Ti(14),r=!1),Ii(n.j,n.m,null,"[Incomplete Response]");break}if(o==dI){n.o=4,Ti(15),Ii(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ii(n.j,n.m,o,null),Cg(n,o)}gx(n)&&o!=UE&&o!=dI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),cy(e),e.L=!0,Ti(11))):(Ii(n.j,n.m,t,"[Invalid Chunked Response]"),cs(n),ny(n))}function MP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?UE:(t=Number(e.substring(t,r)),isNaN(t)?dI:(r+=1)+t>e.length?UE:(e=e.substr(r,t),n.C=r+t,e))}function ty(n){n.Y=Date.now()+n.P,_x(n,n.P)}function _x(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ns(gr(n.eb,n),e)}function BE(n){n.B&&(tt.clearTimeout(n.B),n.B=null)}function ny(n){0==n.l.G||n.I||QE(n.l,n)}function cs(n){BE(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kE(n.W),pt(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Zi(t.i,n)))if(t.I=n.N,!n.J&&Zi(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ns(gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Mg(t),ef(t)}KE(t),Ti(18)}if(1>=CI(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Ki(t,11)}else if((n.J||t.g==n)&&Mg(t),!ug(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const x=b[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const R=b[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ee=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var l=r.i;!l.g&&(Ci(ee,"spdy")||Ci(ee,"quic")||Ci(ee,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(qE(l,l.h),l.h=null))}if(r.D){const Ae=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.sa=Ae,Vn(r.F,r.D,Ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=VI(r,r.H?r.la:null,r.W),d.J){bI(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(BE(m),ty(m)),r.g=d}else Ix(r);0<t.l.length&&tf(t)}else"stop"!=b[0]&&"close"!=b[0]||Ki(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Ki(t,7):Xh(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}ed(4)}catch(b){}}function ry(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Oh(n)||"string"==typeof n)ag(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Oh(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Oh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Gl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Gl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function iy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Pu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Pu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Pu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(je=zh.prototype).setTimeout=function(n){this.P=n},je.gb=function(n){n=n.target;const e=this.L;e&&3==Fu(n)?e.l():this.Ia(n)},je.Ia=function(n){try{if(n==this.g)e:{const x=Fu(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>x)&&(3!=x||Ln||this.g&&(this.h.h||this.g.ga()||PI(this.g)))){this.I||4!=x||7==e||ed(8==e||0>=R?3:2),BE(this);var t=this.g.ba();this.N=t;t:if(gx(this)){var r=PI(this.g);n="";var o=r.length,l=4==Fu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cs(this),ny(this);var d="";break t}this.h.i=new tt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ug(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ti(12),cs(this),ny(this);break e}Ii(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cg(this,t)}this.U?(mx(this,x,d),Ln&&this.i&&3==x&&(iI(this.V,this.W,"tick",this.fb),this.W.start())):(Ii(this.j,this.m,d,null),Cg(this,d)),4==x&&cs(this),this.i&&!this.I&&(4==x?QE(this.l,this):(this.i=!1,ty(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),cs(this),ny(this)}}}catch(x){}},je.fb=function(){if(this.g){var n=Fu(this.g),e=this.g.ga();this.C<e.length&&(BE(this),mx(this,n,e),this.i&&4!=n&&ty(this))}},je.cancel=function(){this.I=!0,cs(this)},je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ed(3),Ti(17)),cs(this),this.o=2,ny(this)):_x(this,this.Y-n)},(je=Gl.prototype).R=function(){iy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},je.T=function(){return iy(this),this.g.concat()},je.get=function(n,e){return Pu(this.h,n)?this.h[n]:e},je.set=function(n,e){Pu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var fI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Wl){this.g=void 0!==e?e:n.g,jE(this,n.j),this.s=n.s,Zh(this,n.i),sy(this,n.m),this.l=n.l,e=n.h;var t=new id;t.i=e.i,e.g&&(t.g=new Gl(e.g),t.h=e.h),HE(this,t),this.o=n.o}else n&&(t=String(n).match(fI))?(this.g=!!e,jE(this,t[1]||"",!0),this.s=nd(t[2]||""),Zh(this,t[3]||"",!0),sy(this,t[4]),this.l=nd(t[5]||"",!0),HE(this,t[6]||"",!0),this.o=nd(t[7]||"")):(this.g=!!e,this.h=new id(null,this.g))}function ku(n){return new Wl(n)}function jE(n,e,t){n.j=t?nd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zh(n,e,t){n.i=t?nd(e,!0):e}function sy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function HE(n,e,t){e instanceof id?(n.h=e,function(n,e){e&&!n.j&&(Ou(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Tg(this,r),GE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ua(e,gI)),n.h=new id(e,n.g))}function Vn(n,e,t){n.h.set(e,t)}function oy(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ua(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ig),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ig(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ua(e,rd,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ua(e,rd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ua(t,"/"==t.charAt(0)?pI:vx,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ua(t,$E)),n.join("")};var rd=/[#\/\?@]/g,vx=/[#\?:]/g,pI=/[#\?]/g,gI=/[#\?@]/g,$E=/#/g;function id(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ou(n){n.g||(n.g=new Gl,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Tg(n,e){Ou(n),e=Dg(n,e),Pu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Pu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&iy(n)))}function mI(n,e){return Ou(n),e=Dg(n,e),Pu(n.g.h,e)}function GE(n,e,t){Tg(n,e),0<t.length&&(n.i=null,n.g.set(Dg(n,e),H_(t)),n.h+=t.length)}function Dg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function vI(n){this.l=n||EI,n=tt.PerformanceNavigationTiming?0<(n=tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(tt.g&&tt.g.Ea&&tt.g.Ea()&&tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(je=id.prototype).add=function(n,e){Ou(this),this.i=null,n=Dg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},je.forEach=function(n,e){Ou(this),this.g.forEach(function(t,r){ag(t,function(o){n.call(e,o,r,this)},this)},this)},je.T=function(){Ou(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},je.R=function(n){Ou(this);var e=[];if("string"==typeof n)mI(this,n)&&(e=zi(e,this.g.get(Dg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zi(e,n[t])}return e},je.set=function(n,e){return Ou(this),this.i=null,mI(this,n=Dg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var EI=10;function wI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function CI(n){return n.h?1:n.g?n.g.size:0}function Zi(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qE(n,e){n.g?n.g.add(e):n.h=e}function bI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ex(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return H_(n.i)}function II(){}function TI(){this.g=new II}function PP(n,e,t){const r=t||"";try{ry(n,function(o,l){let d=o;Zc(o)&&(d=Q_(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Yh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Qh(n){this.l=n.$b||null,this.j=n.ib||!1}function ay(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=WE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vI.prototype.cancel=function(){if(this.i=Ex(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},II.prototype.stringify=function(n){return tt.JSON.stringify(n,void 0)},II.prototype.parse=function(n){return tt.JSON.parse(n,void 0)},Qn(Qh,Eg),Qh.prototype.g=function(){return new ay(this.l,this.j)},Qh.prototype.i=function(n){return function(){return n}}({}),Qn(ay,Rr);var WE=0;function DI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Jh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ag(n)}function Ag(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(je=ay.prototype).open=function(n,e){if(this.readyState!=WE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ag(this)},je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jh(this)),this.readyState=WE},je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ag(this)),this.g&&(this.readyState=3,Ag(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jh(this):Ag(this),3==this.readyState&&DI(this)}},je.Ua=function(n){this.g&&(this.response=this.responseText=n,Jh(this))},je.Ta=function(n){this.g&&(this.response=n,Jh(this))},je.ha=function(){this.g&&Jh(this)},je.setRequestHeader=function(n,e){this.v.append(n,e)},je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ay.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var AI=tt.JSON.parse;function mr(n){Rr.call(this),this.headers=new Gl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=SI,this.K=this.L=!1}Qn(mr,Rr);var SI="",xI=/^https?$/i,RI=["POST","PUT"];function Ba(n){return"content-type"==n.toLowerCase()}function uy(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,NI(n),zE(n)}function NI(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function MI(n){if(n.h&&void 0!==zc&&(!n.C[1]||4!=Fu(n)||2!=n.ba()))if(n.v&&4==Fu(n))OE(n.Fa,0,n);else if(oi(n,"readystatechange"),4==Fu(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(fI)[1]||null;if(!o&&tt.self&&tt.self.location){var l=tt.self.location.protocol;o=l.substr(0,l.length-1)}r=!xI.test(o?o.toLowerCase():"")}t=r}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var d=2<Fu(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",NI(n)}}finally{zE(n)}}}function zE(n,e){if(n.g){ZE(n);const t=n.g,r=n.C[0]?kh:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function ZE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(tt.clearTimeout(n.A),n.A=null)}function Fu(n){return n.g?n.g.readyState:0}function PI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case SI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Sg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return D(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function xg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kI(n){this.za=0,this.l=[],this.h=new yg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xg("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xg("baseRetryDelayMs",5e3,n),this.$a=xg("retryDelaySeedMs",1e4,n),this.Ya=xg("forwardChannelMaxRetries",2,n),this.ra=xg("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new vI(n&&n.concurrentRequestLimit),this.Ca=new TI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xh(n){if(OI(n),3==n.G){var e=n.V++,t=ku(n.F);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Ng(n,t),(e=new zh(n,n.h,e,void 0)).K=2,e.v=oy(ku(t)),t=!1,tt.navigator&&tt.navigator.sendBeacon&&(t=tt.navigator.sendBeacon(e.v.toString(),"")),!t&&tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=UI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ty(e)}Pg(n)}function ef(n){n.g&&(cy(n),n.g.cancel(),n.g=null)}function OI(n){ef(n),n.u&&(tt.clearTimeout(n.u),n.u=null),Mg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&tt.clearTimeout(n.m),n.m=null)}function Rg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&tf(n)}function tf(n){wI(n.i)||n.m||(n.m=!0,J_(n.Ha,n),n.C=0)}function LI(n,e){var t;t=e?e.m:n.V++;const r=ku(n.F);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.U),Ng(n,r),n.o&&n.s&&Sg(r,n.o,n.s),t=new zh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ly(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),qE(n.i,t),hI(t,r,e)}function Ng(n,e){n.j&&ry({},function(t,r){Vn(e,r,t)})}function ly(n,e,t){t=Math.min(n.l.length,t);var r=n.j?gr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let m=!0;for(let E=0;E<t;E++){let b=o[E].h;const x=o[E].g;if(b-=l,0>b)l=Math.max(0,o[E].h-100),m=!1;else try{PP(x,d,"req"+b+"_")}catch(R){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Ix(n){n.g||n.u||(n.Y=1,J_(n.Ga,n),n.A=0)}function KE(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ns(gr(n.Ga,n),JE(n,n.A)),n.A++,0))}function cy(n){null!=n.B&&(tt.clearTimeout(n.B),n.B=null)}function YE(n){n.g=new zh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ku(n.oa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.N?"0":"1"),Vn(e,"AID",n.U),Ng(n,e),Vn(e,"TYPE","xmlhttp"),n.o&&n.s&&Sg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=oy(ku(e)),t.s=null,t.U=!0,px(t,n)}function Mg(n){null!=n.v&&(tt.clearTimeout(n.v),n.v=null)}function QE(n,e){var t=null;if(n.g==e){Mg(n),cy(n),n.g=null;var r=2}else{if(!Zi(n.i,e))return;t=e.D,bI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;oi(r=qh(),new hx(r,t,e,o)),tf(n)}else Ix(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(CI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ns(gr(n.Ha,n,e),JE(n,n.C)),n.C++,0)))}(n,e)||2==r&&KE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ki(n,5);break;case 4:Ki(n,10);break;case 3:Ki(n,6);break;default:Ki(n,2)}}function JE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ki(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=gr(n.jb,n);t||(t=new Wl("//www.google.com/images/cleardot.gif"),tt.location&&"http"==tt.location.protocol||jE(t,"https"),oy(t)),function(n,e){const t=new yg;if(tt.Image){const r=new Image;r.onload=xr(Yh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=xr(Yh,t,r,"TestLoadImage: error",!1,e),r.onabort=xr(Yh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=xr(Yh,t,r,"TestLoadImage: timeout",!1,e),tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ti(2);n.G=0,n.j&&n.j.va(e),Pg(n),OI(n)}function Pg(n){n.G=0,n.I=-1,n.j&&((0!=Ex(n.i).length||0!=n.l.length)&&(n.i.i.length=0,H_(n.l),n.l.length=0),n.j.ua())}function VI(n,e,t){let r=function(n){return n instanceof Wl?ku(n):new Wl(n,void 0)}(t);if(""!=r.i)e&&Zh(r,e+"."+r.i),sy(r,r.m);else{const o=tt.location;r=function(n,e,t,r){var o=new Wl(null,void 0);return n&&jE(o,n),e&&Zh(o,e),t&&sy(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&D(n.aa,function(o,l){Vn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Vn(r,e,t),Vn(r,"VER",n.ma),Ng(n,r),r}function UI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new Qh({ib:!0}):n.qa)).L=n.H,e}function Tx(){}function Lu(){if(He&&!(10<=Number(Hh)))throw Error("Environmental error: no available transport.")}function ds(n,e){Rr.call(this),this.g=new kI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ug(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ug(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sf(this)}function nf(n){uI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rf(){LE.call(this),this.status=1}function sf(n){this.g=n}(je=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lI.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:lI),this.g.onreadystatechange=gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void uy(this,l)}n=t||"";const o=new Gl(this.headers);r&&ry(r,function(l,d){o.set(d,l)}),r=function(n){e:{var e=Ba;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=tt.FormData&&n instanceof tt.FormData,!(0<=Hl(RI,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZE(this),0<this.B&&((this.K=function(n){return He&&cg()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gr(this.pa,this)):this.A=OE(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){uy(this,l)}},je.pa=function(){void 0!==zc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),zE(this))},je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zE(this,!0)),mr.Z.M.call(this)},je.Fa=function(){this.s||(this.F||this.v||this.l?MI(this):this.cb())},je.cb=function(){MI(this)},je.ba=function(){try{return 2<Fu(this)?this.g.status:-1}catch(n){return-1}},je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),AI(e)}},je.Da=function(){return this.m},je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(je=kI.prototype).ma=8,je.G=1,je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new zh(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=N(l),se(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ly(this,o,e),Vn(t=ku(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),Ng(this,t),this.o&&l&&Sg(t,this.o,l),qE(this.i,o),this.Ra&&Vn(t,"TYPE","init"),this.ja?(Vn(t,"$req",e),Vn(t,"SID","null"),o.$=!0,hI(o,t,null)):hI(o,t,e),this.G=2}}else 3==this.G&&(n?LI(this,n):0==this.l.length||wI(this.i)||LI(this))},je.Ga=function(){if(this.u=null,YE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ns(gr(this.bb,this),n)}},je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ti(10),ef(this),YE(this))},je.ab=function(){null!=this.v&&(this.v=null,ef(this),KE(this),Ti(19))},je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ti(2)):(this.h.info("Failed to ping google.com"),Ti(1))},(je=Tx.prototype).xa=function(){},je.wa=function(){},je.va=function(){},je.ua=function(){},je.Oa=function(){},Lu.prototype.g=function(n,e){return new ds(n,e)},Qn(ds,Rr),ds.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),J_(gr(n.hb,n,e))),Ti(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=VI(n,null,n.W),tf(n)},ds.prototype.close=function(){Xh(this.g)},ds.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Rg(this.g,e)}else this.v?((e={}).__data__=Q_(n),Rg(this.g,e)):Rg(this.g,n)},ds.prototype.M=function(){this.g.j=null,delete this.j,Xh(this.g),delete this.g,ds.Z.M.call(this)},Qn(nf,uI),Qn(rf,LE),Qn(sf,Tx),sf.prototype.xa=function(){oi(this.g,"a")},sf.prototype.wa=function(n){oi(this.g,new nf(n))},sf.prototype.va=function(n){oi(this.g,new rf(n))},sf.prototype.ua=function(){oi(this.g,"b")},Lu.prototype.createWebChannel=Lu.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,td.NO_ERROR=0,td.TIMEOUT=8,td.HTTP_ERROR=6,vg.COMPLETE="complete",aI.EventType=Wh,Wh.OPEN="a",Wh.CLOSE="b",Wh.ERROR="c",Wh.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var XE=Wi.createWebChannelTransport=function(){return new Lu},BI=Wi.getStatEventTarget=function(){return qh()},ew=Wi.ErrorCode=td,jI=Wi.EventType=vg,Dx=Wi.Event=Mu,dy=Wi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ax=Wi.FetchXmlHttpFactory=Qh,hy=Wi.WebChannel=aI,HI=Wi.XhrIo=mr;const sd="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let of="9.6.1";const zl=new qi.Yd("@firebase/firestore");function Zl(){return zl.logLevel}function Pe(n,...e){if(zl.logLevel<=qi.in.DEBUG){const t=e.map($I);zl.debug(`Firestore (${of}): ${n}`,...t)}}function _r(n,...e){if(zl.logLevel<=qi.in.ERROR){const t=e.map($I);zl.error(`Firestore (${of}): ${n}`,...t)}}function kg(n,...e){if(zl.logLevel<=qi.in.WARN){const t=e.map($I);zl.warn(`Firestore (${of}): ${n}`,...t)}}function $I(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${of}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function ot(n,e){n||Je()}function Fe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class xx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Rx{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new yr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},E=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new yr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new fy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new Zr(e)}}class GI{constructor(e,t,r){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class qI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(l=o).error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const r=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),new tw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ms{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Og(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ms.I=-1;class py{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Og(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function nw(n){return n+"\0"}class Nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Nr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function zI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ad(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class af{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===af.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof af?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends af{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const KI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends af{construct(e,t,r){return new ai(e,t,r)}static isValidIdentifier(e){return KI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Te(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Te(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Te(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new Te(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class uf{constructor(e){this.fields=e,e.sort(ai.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ui(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new ui(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const rw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kl(n){if(ot(!!n),"string"==typeof n){let e=0;const t=rw.exec(n);if(ot(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ud(n){return"string"==typeof n?ui.fromBase64String(n):ui.fromUint8Array(n)}function YI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lo(n){const e=n.mapValue.fields.__previous_value__;return YI(e)?lo(e):e}function gy(n){const e=Kl(n.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}function lf(n){return null==n}function iw(n){return 0===n&&1/n==-1/0}function sw(n){return"number"==typeof n&&Number.isInteger(n)&&!iw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(ln.fromString(e))}static fromName(e){return new Ze(ln.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new ln(e.slice()))}}function Yl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YI(n)?4:10:Je()}function ja(n,e){const t=Yl(n);if(t!==Yl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gy(n).isEqual(gy(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Kl(r.timestampValue),d=Kl(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ud(n.bytesValue).isEqual(ud(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return ir(r.geoPointValue.latitude)===ir(o.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ir(r.integerValue)===ir(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=ir(r.doubleValue),d=ir(o.doubleValue);return l===d?iw(l)===iw(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(zI(l)!==zI(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===d[m]||!ja(l[m],d[m])))return!1;return!0}(n,e);default:return Je()}var o}function my(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function ld(n,e){const t=Yl(n),r=Yl(e);if(t!==r)return Ot(t,r);switch(t){case 0:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=ir(o.integerValue||o.doubleValue),m=ir(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return _y(n.timestampValue,e.timestampValue);case 4:return _y(gy(n),gy(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(o,l){const d=ud(o),m=ud(l);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let E=0;E<d.length&&E<m.length;E++){const b=Ot(d[E],m[E]);if(0!==b)return b}return Ot(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Ot(ir(o.latitude),ir(l.latitude));return 0!==d?d:Ot(ir(o.longitude),ir(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],m=l.values||[];for(let E=0;E<d.length&&E<m.length;++E){const b=ld(d[E],m[E]);if(b)return b}return Ot(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},m=Object.keys(d),E=l.fields||{},b=Object.keys(E);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const R=Ot(m[x],b[x]);if(0!==R)return R;const F=ld(d[m[x]],E[b[x]]);if(0!==F)return F}return Ot(m.length,b.length)}(n.mapValue,e.mapValue);default:throw Je()}}function _y(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Kl(n),r=Kl(e),o=Ot(t.seconds,r.seconds);return 0!==o?o:Ot(t.nanos,r.nanos)}function ow(n){return Fg(n)}function Fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Kl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ud(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=Fg(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const m of o)d?d=!1:l+=",",l+=`${m}:${Fg(r.fields[m])}`;return l+"}"}(n.mapValue):Je();var e}function yy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aw(n){return!!n&&"integerValue"in n}function uw(n){return!!n&&"arrayValue"in n}function QI(n){return!!n&&"nullValue"in n}function JI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vy(n){return!!n&&"mapValue"in n}function Ql(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ad(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ql(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ql(n.arrayValue.values[t]);return e}return Object.assign({},n)}class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(t)}setAll(e){let t=ai.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Ql(d):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());vy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];vy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ad(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new sr(Ql(this.value))}}function lw(n){const e=[];return ad(n.fields,(t,r)=>{const o=new ai([t]);if(vy(r)){const l=lw(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new uf(e)}class Wt{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Wt(e,0,bt.min(),sr.empty(),0)}static newFoundDocument(e,t,r){return new Wt(e,1,t,r,0)}static newNoDocument(e,t){return new Wt(e,2,t,sr.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,sr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Wt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lg{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.R=null}}function XI(n,e=null,t=[],r=[],o=null,l=null,d=null){return new Lg(n,e,t,r,o,l,d)}function Vg(n){const e=Fe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+ow(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Vu(e.startAt)),e.endAt&&(t+="|ub:",t+=Vu(e.endAt)),e.R=t}return e.R}function Ps(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!pf(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ja(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fw(n.startAt,e.startAt)&&fw(n.endAt,e.endAt)}function Jl(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class cn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Ey(e,t,r):"array-contains"===t?new cf(e,r):"in"===t?new df(e,r):"not-in"===t?new hf(e,r):"array-contains-any"===t?new ff(e,r):new cn(e,t,r)}static P(e,t,r){return"in"===t?new co(e,r):new dw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ld(t,this.value)):null!==t&&Yl(this.value)===Yl(t)&&this.v(ld(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ey extends cn{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.v(t)}}class co extends cn{constructor(e,t){super(e,"in",t),this.keys=dd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dw extends cn{constructor(e,t){super(e,"not-in",t),this.keys=dd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dd(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class cf extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uw(t)&&my(t.arrayValue,this.value)}}class df extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&my(this.value.arrayValue,t)}}class hf extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(my(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!my(this.value.arrayValue,t)}}class ff extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>my(this.value.arrayValue,r))}}class Ha{constructor(e,t){this.position=e,this.before=t}}function Vu(n){return`${n.before?"b":"a"}:${n.position.map(e=>ow(e)).join(",")}`}class Ho{constructor(e,t="asc"){this.field=e,this.dir=t}}function pf(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?Ze.comparator(Ze.fromName(d.referenceValue),t.key):ld(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function fw(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class $a{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=E,this.S=null,this.D=null}}function pw(n,e,t,r,o,l,d,m){return new $a(n,e,t,r,o,l,d,m)}function hd(n){return new $a(n)}function Ug(n){return!lf(n.limit)&&"F"===n.limitType}function Bg(n){return!lf(n.limit)&&"L"===n.limitType}function wy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cy(n){for(const e of n.filters)if(e.V())return e.field;return null}function gw(n){return null!==n.collectionGroup}function fd(n){const e=Fe(n);if(null===e.S){e.S=[];const t=Cy(e),r=wy(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Ho(t)),e.S.push(new Ho(ai.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Ho(ai.keyField(),l))}}}return e.S}function ho(n){const e=Fe(n);if(!e.D)if("F"===e.limitType)e.D=XI(e.path,e.collectionGroup,fd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of fd(e))t.push(new Ho(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Ha(e.endAt.position,!e.endAt.before):null,o=e.startAt?new Ha(e.startAt.position,!e.startAt.before):null;e.D=XI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function eT(n,e,t){return new $a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return Ps(ho(n),ho(e))&&n.limitType===e.limitType}function tT(n){return`${Vg(ho(n))}|lt:${n.limitType}`}function nT(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ow(r.value)}`;var r}).join(", ")}]`),lf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Vu(n.startAt)),n.endAt&&(e+=", endAt: "+Vu(n.endAt)),`Target(${e})`}(ho(n))}; limitType=${n.limitType})`}function jg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!hw(t.startAt,fd(t),r)||t.endAt&&hw(t.endAt,fd(t),r)));var t,r}function mw(n){return(e,t)=>{let r=!1;for(const o of fd(n)){const l=Nx(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function Nx(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(o,l,d){const m=l.data.field(o),E=d.data.field(o);return null!==m&&null!==E?ld(m,E):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function _w(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iw(e)?"-0":e}}function rT(n){return{integerValue:""+n}}function iT(n,e){return sw(e)?rT(e):_w(n,e)}class yw{constructor(){this._=void 0}}function Mx(n,e,t){return n instanceof Hg?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof mf?oT(n,e):n instanceof _f?aT(n,e):function(r,o){const l=Px(r,o),d=by(l)+by(r.N);return aw(l)&&aw(r.N)?rT(d):_w(r.k,d)}(n,e)}function sT(n,e,t){return n instanceof mf?oT(n,e):n instanceof _f?aT(n,e):t}function Px(n,e){return n instanceof yf?aw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hg extends yw{}class mf extends yw{constructor(e){super(),this.elements=e}}function oT(n,e){const t=Iy(e);for(const r of n.elements)t.some(o=>ja(o,r))||t.push(r);return{arrayValue:{values:t}}}class _f extends yw{constructor(e){super(),this.elements=e}}function aT(n,e){let t=Iy(e);for(const r of n.elements)t=t.filter(o=>!ja(o,r));return{arrayValue:{values:t}}}class yf extends yw{constructor(e,t){super(),this.k=e,this.N=t}}function by(n){return ir(n.integerValue||n.doubleValue)}function Iy(n){return uw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $g{constructor(e,t){this.field=e,this.transform=t}}class VP{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ty(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Gg{}function UP(n,e,t){n instanceof qg?function(r,o,l){const d=r.value.clone(),m=lT(r.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Uu?function(r,o,l){if(!Ty(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=lT(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(Wg(r)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vw(n,e,t){var o;n instanceof qg?function(r,o,l){if(!Ty(r.precondition,o))return;const d=r.value.clone(),m=ww(r.fieldTransforms,l,o);d.setAll(m),o.convertToFoundDocument(Ew(o),d).setHasLocalMutations()}(n,e,t):n instanceof Uu?function(r,o,l){if(!Ty(r.precondition,o))return;const d=ww(r.fieldTransforms,l,o),m=o.data;m.setAll(Wg(r)),m.setAll(d),o.convertToFoundDocument(Ew(o),m).setHasLocalMutations()}(n,e,t):Ty(n.precondition,o=e)&&o.convertToNoDocument(bt.min())}function vf(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=Px(r.transform,o||null);null!=l&&(null==t&&(t=sr.empty()),t.set(r.field,l))}return t||null}function uT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&od(t,r,(o,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mf&&r instanceof mf||t instanceof _f&&r instanceof _f?od(t.elements,r.elements,ja):t instanceof yf&&r instanceof yf?ja(t.N,r.N):t instanceof Hg&&r instanceof Hg);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Ew(n){return n.isFoundDocument()?n.version:bt.min()}class qg extends Gg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Uu extends Gg{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function Wg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lT(n,e,t){const r=new Map;ot(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,sT(d,m,t[o]))}return r}function ww(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,Mx(l,d,e))}return r}class zg extends Gg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Cw extends Gg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kx{constructor(e){this.count=e}}var vr,zt;function bw(n){switch(n){default:return Je();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function cT(n){if(void 0===n)return _r("GRPC error has no .code"),pe.UNKNOWN;switch(n){case vr.OK:return pe.OK;case vr.CANCELLED:return pe.CANCELLED;case vr.UNKNOWN:return pe.UNKNOWN;case vr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case vr.INTERNAL:return pe.INTERNAL;case vr.UNAVAILABLE:return pe.UNAVAILABLE;case vr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case vr.NOT_FOUND:return pe.NOT_FOUND;case vr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case vr.ABORTED:return pe.ABORTED;case vr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case vr.DATA_LOSS:return pe.DATA_LOSS;default:return Je()}}(zt=vr||(vr={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Er{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new Er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new Er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zg(this.root,e,this.comparator,!0)}}class Zg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Pr.RED,this.left=null!=o?o:Pr.EMPTY,this.right=null!=l?l:Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Pr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Pr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Pr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dy(this.data.getIterator())}getIteratorFrom(e){return new Dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class Dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Ox=new Er(Ze.comparator);function $o(){return Ox}const Kg=new Er(Ze.comparator);function Iw(){return Kg}const Tw=new Er(Ze.comparator);function Ay(){return Tw}const Fx=new or(Ze.comparator);function on(...n){let e=Fx;for(const t of n)e=e.add(t);return e}const Dw=new or(Ot);function Yg(){return Dw}class Sy{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qg.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sy(bt.min(),r,Yg(),$o(),on())}}class Qg{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qg(ui.EMPTY_BYTE_STRING,t,on(),on(),on())}}class Jg{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Aw{constructor(e,t){this.targetId=e,this.O=t}}class dT{constructor(e,t,r=ui.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Sw{constructor(){this.M=0,this.L=xy(),this.B=ui.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=on(),t=on(),r=on();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Je()}}),new Qg(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=xy()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class xw{constructor(e){this.et=e,this.nt=new Map,this.st=$o(),this.it=Rw(),this.rt=new or(Ot)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.O.count,o=this.wt(t);if(o){const l=o.target;if(Jl(l))if(0===r){const d=new Ze(l.path);this.ct(t,d,Wt.newNoDocument(d,bt.min()))}else ot(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,d)=>{const m=this.wt(d);if(m){if(l.current&&Jl(m.target)){const E=new Ze(m.target.path);null!==this.st.get(E)||this.yt(d,E)||this.ct(d,E,Wt.newNoDocument(E,e))}l.j&&(t.set(d,l.G()),l.H())}});let r=on();this.it.forEach((l,d)=>{let m=!0;d.forEachWhile(E=>{const b=this.wt(E);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(l))});const o=new Sy(e,t,this.rt,this.st,r);return this.st=$o(),this.it=Rw(),this.rt=new or(Ot),o}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Sw,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new or(Ot),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Sw),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Rw(){return new Er(Ze.comparator)}function xy(){return new Er(Ze.comparator)}const Nw={asc:"ASCENDING",desc:"DESCENDING"},hT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Lx{constructor(e,t){this.databaseId=e,this.C=t}}function Ef(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(n,e){return n.C?e.toBase64():e.toUint8Array()}function Pw(n,e){return Ef(n,e.toTimestamp())}function kr(n){return ot(!!n),bt.fromTimestamp(function(e){const t=Kl(e);return new Nr(t.seconds,t.nanos)}(n))}function kw(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fT(n){const e=ln.fromString(n);return ot(jw(e)),e}function Xg(n,e){return kw(n.databaseId,e.path)}function fo(n,e){const t=fT(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(Fw(t))}function em(n,e){return kw(n.databaseId,e)}function Ow(n){const e=fT(n);return 4===e.length?ln.emptyPath():Fw(e)}function wf(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Fw(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lw(n,e,t){return{name:Xg(n,e),fields:t.value.mapValue.fields}}function Vw(n,e,t){const r=fo(n,e.name),o=kr(e.updateTime),l=new sr({mapValue:{fields:e.fields}}),d=Wt.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function tm(n,e){let t;if(e instanceof qg)t={update:Lw(n,e.key,e.value)};else if(e instanceof zg)t={delete:Xg(n,e.key)};else if(e instanceof Uu)t={update:Lw(n,e.key,e.data),updateMask:Hx(e.fieldMask)};else{if(!(e instanceof Cw))return Je();t={verify:Xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof Hg)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _f)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yf)return{fieldPath:l.field.canonicalString(),increment:d.N};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Pw(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Je()),t;var o}function Vx(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mr.updateTime(kr(o.updateTime)):void 0!==o.exists?Mr.exists(o.exists):Mr.none():Mr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let m=null;"setToServerValue"in d?(ot("REQUEST_TIME"===d.setToServerValue),m=new Hg):"appendMissingElements"in d?m=new mf(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new _f(d.removeAllFromArray.values||[]):"increment"in d?m=new yf(l,d.increment):Je();const E=ai.fromServerFormat(d.fieldPath);return new $g(E,m)}(n,o)):[];var o;if(e.update){const o=fo(n,e.update.name),l=new sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new uf((e.updateMask.fieldPaths||[]).map(b=>ai.fromServerFormat(b)));return new Uu(o,l,d,t,r)}return new qg(o,l,t,r)}if(e.delete){const o=fo(n,e.delete);return new zg(o,t)}if(e.verify){const o=fo(n,e.verify);return new Cw(o,t)}return Je()}function mT(n,e){return{documents:[em(n,e.path)]}}function Uw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=em(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=em(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const E=m.map(b=>function(x){if("=="===x.op){if(JI(x.value))return{unaryFilter:{field:pd(x.field),op:"IS_NAN"}};if(QI(x.value))return{unaryFilter:{field:pd(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(JI(x.value))return{unaryFilter:{field:pd(x.field),op:"IS_NOT_NAN"}};if(QI(x.value))return{unaryFilter:{field:pd(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pd(x.field),op:Bx(x.op),value:x.value}}}(b));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(m){if(0!==m.length)return m.map(E=>{return{field:pd((b=E).field),direction:ET(b.dir)};var b})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(E=e.limit,n.C||lf(E)?E:{value:E});var E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=yT(e.startAt)),e.endAt&&(t.structuredQuery.endAt=yT(e.endAt)),t}function _T(n){let e=Ow(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ot(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=Bw(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Ho(gd((R=x).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(x){let R;return R="object"==typeof x?x.value:x,lf(R)?null:R}(t.limit));let E=null;t.startAt&&(E=vT(t.startAt));let b=null;return t.endAt&&(b=vT(t.endAt)),pw(e,o,d,l,m,"F",E,b)}function Bw(n){return n?void 0!==n.unaryFilter?[jx(n)]:void 0!==n.fieldFilter?[Cf(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Bw(e)).reduce((e,t)=>e.concat(t)):Je():[]}function yT(n){return{before:n.before,values:n.position}}function vT(n){return new Ha(n.values||[],!!n.before)}function ET(n){return Nw[n]}function Bx(n){return hT[n]}function pd(n){return{fieldPath:n.canonicalString()}}function gd(n){return ai.fromServerFormat(n.fieldPath)}function Cf(n){return cn.create(gd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function jx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=gd(n.unaryFilter.field);return cn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=gd(n.unaryFilter.field);return cn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gd(n.unaryFilter.field);return cn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gd(n.unaryFilter.field);return cn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function Hx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Go(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$x(e)),e=wT(n.get(t),e);return $x(e)}function wT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function $x(n){return n+"\x01\x01"}function qo(n){const e=n.length;if(ot(e>=2),2===e)return ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&Je(),n.charAt(d+1)){case"\x01":const m=n.substring(l,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:Je()}l=d+2}return new ln(r)}class Hw{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Jn{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Jn.store="owner",Jn.key="owner";class Xl{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Xl.store="mutationQueues",Xl.keyPath="userId";class Dn{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}Dn.store="mutations",Dn.keyPath="batchId",Dn.userMutationsIndex="userMutationsIndex",Dn.userMutationsKeyPath=["userId","batchId"];class An{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Go(t)]}static key(e,t,r){return[e,Go(t),r]}}An.store="documentMutations",An.PLACEHOLDER=new An;class Wo{constructor(e,t){this.path=e,this.readTime=t}}class zo{constructor(e,t){this.path=e,this.version=t}}class qn{constructor(e,t,r,o,l,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=d}}qn.store="remoteDocuments",qn.readTimeIndex="readTimeIndex",qn.readTimeIndexPath="readTime",qn.collectionReadTimeIndex="collectionReadTimeIndex",qn.collectionReadTimeIndexPath=["parentPath","readTime"];class Zo{constructor(e){this.byteSize=e}}Zo.store="remoteDocumentGlobal",Zo.key="remoteDocumentGlobalKey";class hs{constructor(e,t,r,o,l,d,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=d,this.query=m}}hs.store="targets",hs.keyPath="targetId",hs.queryTargetsIndexName="queryTargetsIndex",hs.queryTargetsKeyPath=["canonicalId","targetId"];class li{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}li.store="targetDocuments",li.keyPath=["targetId","path"],li.documentTargetsIndex="documentTargetsIndex",li.documentTargetsKeyPath=["path","targetId"];class ks{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}ks.key="targetGlobalKey",ks.store="targetGlobal";class md{constructor(e,t){this.collectionId=e,this.parent=t}}md.store="collectionParents",md.keyPath=["collectionId","parent"];class Ko{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Ko.store="clientMetadata",Ko.keyPath="clientId";class Ga{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ga.store="bundles",Ga.keyPath="bundleId";class bf{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}bf.store="namedQueries",bf.keyPath="name";const CT=[Xl.store,Dn.store,An.store,qn.store,hs.store,Jn.store,ks.store,li.store,Ko.store,Zo.store,md.store,Ga.store,bf.store],bT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let o=0,l=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++l,d&&l===o&&t()},E=>r(E))}),d=!0,l===o&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(o=>o?Se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class _d{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new yr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new If(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=Ry(r.target.error);this.It.reject(new If(e,o))}}static open(e,t,r,o){try{return new _d(t,e.transaction(o,r))}catch(l){throw new If(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Gw(t)}}class Yo{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Yo.Pt((0,k.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),ec(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,k.hl)())return!1;if(Yo.vt())return!0;const e=(0,k.z$)(),t=Yo.Pt(e),r=0<t&&t<10,o=Yo.Vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,me.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new If(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Te(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Te(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new If(e,m))},l.onupgradeneeded=d=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Rt.Nt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Ct(e);const E=_d.open(l.db,e,d?"readonly":"readwrite",r),b=o(E).catch(x=>(E.abort(x),Se.reject(x))).toPromise();return b.catch(()=>{}),yield E.At,b}catch(E){const b="FirebaseError"!==E.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",b),l.close(),!b)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class IT{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return ec(this.$t.delete())}}class If extends Te{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bu(n){return"IndexedDbTransactionError"===n.name}class Gw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ec(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),ec(this.store.add(e))}get(e){return ec(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),ec(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),ec(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(l,d)=>{o.push(d)}).next(()=>o)}qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(l,d,m)=>m.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Se((r,o)=>{t.onerror=l=>{const d=Ry(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Ut(e,t){const r=[];return new Se((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new IT(m),b=t(m.primaryKey,m.value,E);if(b instanceof Se){const x=b.catch(R=>(E.done(),Se.reject(R)));r.push(x)}E.isDone?o():null===E.Mt?m.continue():m.continue(E.Mt)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ec(n){return new Se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ry(r.target.error);t(o)}})}let qw=!1;function Ry(n){const e=Yo.Pt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qw||(qw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ww extends $w{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Yi(n,e){const t=Fe(n);return Yo.Dt(t.Wt,e)}class Ny{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&UP(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&vw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&vw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,r)=>uT(t,r))&&od(this.baseMutations,e.baseMutations,(t,r)=>uT(t,r))}}class My{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ot(e.mutations.length===r.length);let o=Ay();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new My(e,t,r,o)}}class ju{constructor(e,t,r,o,l=bt.min(),d=bt.min(),m=ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class TT{constructor(e){this.Gt=e}}function zw(n,e){if(e.document)return Vw(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ze.fromSegments(e.noDocument.path),r=Df(e.noDocument.readTime),o=Wt.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=Ze.fromSegments(e.unknownDocument.path),r=Df(e.unknownDocument.version);return Wt.newUnknownDocument(t,r)}return Je()}function DT(n,e,t){const r=Zw(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:Xg(m=n.Gt,(E=e).key),fields:E.data.value.mapValue.fields,updateTime:Ef(m,E.version.toTimestamp())};return new qn(null,null,l,e.hasCommittedMutations,r,o)}var m,E;if(e.isNoDocument()){const l=e.key.path.toArray(),d=Tf(e.version),m=e.hasCommittedMutations;return new qn(null,new Wo(l,d),null,m,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),d=Tf(e.version);return new qn(new zo(l,d),null,null,!0,r,o)}return Je()}function Zw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function AT(n){const e=new Nr(n[0],n[1]);return bt.fromTimestamp(e)}function Tf(n){const e=n.toTimestamp();return new Hw(e.seconds,e.nanoseconds)}function Df(n){const e=new Nr(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Af(n,e){const t=(e.baseMutations||[]).map(l=>Vx(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Vx(n.Gt,l)),o=Nr.fromMillis(e.localWriteTimeMs);return new Ny(e.batchId,o,t,r)}function nm(n){const e=Df(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Df(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(ot(1===(o=n.query).documents.length),r=ho(hd(Ow(o.documents[0])))):r=ho(_T(n.query)),new ju(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function ST(n,e){const t=Tf(e.snapshotVersion),r=Tf(e.lastLimboFreeSnapshotVersion);let o;o=Jl(e.target)?mT(n.Gt,e.target):Uw(n.Gt,e.target);const l=e.resumeToken.toBase64();return new hs(e.targetId,Vg(e.target),t,l,e.sequenceNumber,r,o)}function Kw(n){const e=_T({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?eT(e,e.limit,"L"):e}class Gx{getBundleMetadata(e,t){return xT(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Df(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return xT(e).put({bundleId:(r=t).id,createTime:Tf(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return RT(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Kw(o.bundledQuery),readTime:Df(o.readTime)};var o})}saveNamedQuery(e,t){return RT(e).put({name:(r=t).name,readTime:Tf(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xT(n){return Yi(n,Ga.store)}function RT(n){return Yi(n,bf.store)}class qx{constructor(){this.zt=new Yw}addToCollectionParentIndex(e,t){return this.zt.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.zt.getEntries(t))}}class Yw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new or(ln.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new or(ln.comparator)).toArray()}}class Wx{constructor(){this.Ht=new Yw}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:r,parent:Go(o)};return NT(e).put(l)}return Se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[nw(t),""],!1,!0);return NT(e).Bt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(qo(d.parent))}return r})}}function NT(n){return Yi(n,md.store)}const Qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jw(n,e,t){const r=n.store(Dn.store),o=n.store(An.store),l=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.jt({range:d},(x,R,F)=>(m++,F.delete()));l.push(E.next(()=>{ot(1===m)}));const b=[];for(const x of t.mutations){const R=An.key(e,x.key.path,t.batchId);l.push(o.delete(R)),b.push(x.key)}return Se.waitFor(l).next(()=>b)}function rm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);class Py{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){ot(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Py(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hu(e).jt({index:Dn.userMutationsIndex,range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=yd(e),d=Hu(e);return d.add({}).next(m=>{ot("number"==typeof m);const E=new Ny(m,t,r,o),b=function(F,q,ee){const Ae=ee.baseMutations.map(St=>tm(F.Gt,St)),ke=ee.mutations.map(St=>tm(F.Gt,St));return new Dn(q,ee.batchId,ee.localWriteTime.toMillis(),Ae,ke)}(this.k,this.userId,E),x=[];let R=new or((F,q)=>Ot(F.canonicalString(),q.canonicalString()));for(const F of o){const q=An.key(this.userId,F.key.path,m);R=R.add(F.key.path.popLast()),x.push(d.put(b)),x.push(l.put(q,An.PLACEHOLDER))}return R.forEach(F=>{x.push(this.Jt.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Yt[m]=E.keys()}),Se.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Hu(e).get(t).next(r=>r?(ot(r.userId===this.userId),Af(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Se.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Hu(e).jt({index:Dn.userMutationsIndex,range:o},(d,m,E)=>{m.userId===this.userId&&(ot(m.batchId>=r),l=Af(this.k,m)),E.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hu(e).jt({index:Dn.userMutationsIndex,range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hu(e).Bt(Dn.userMutationsIndex,t).next(r=>r.map(o=>Af(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=An.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return yd(e).jt({range:o},(d,m,E)=>{const[b,x,R]=d,F=qo(x);if(b===this.userId&&t.path.isEqual(F))return Hu(e).get(R).next(q=>{if(!q)throw Je();ot(q.userId===this.userId),l.push(Af(this.k,q))});E.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Ot);const o=[];return t.forEach(l=>{const d=An.prefixForPath(this.userId,l.path),m=IDBKeyRange.lowerBound(d),E=yd(e).jt({range:m},(b,x,R)=>{const[F,q,ee]=b,Ae=qo(q);F===this.userId&&l.path.isEqual(Ae)?r=r.add(ee):R.done()});o.push(E)}),Se.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=An.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(l);let m=new or(Ot);return yd(e).jt({range:d},(E,b,x)=>{const[R,F,q]=E,ee=qo(F);R===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(m=m.add(q)):x.done()}).next(()=>this.te(e,m))}te(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Hu(e).get(l).next(d=>{if(null===d)throw Je();ot(d.userId===this.userId),r.push(Af(this.k,d))}))}),Se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Jw(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(An.prefixForUser(this.userId)),o=[];return yd(e).jt({range:r},(l,d,m)=>{if(l[0]===this.userId){const E=qo(l[1]);o.push(E)}else m.done()}).next(()=>{ot(0===o.length)})})}containsKey(e,t){return Xw(e,this.userId,t)}ne(e){return e0(e).get(this.userId).next(t=>t||new Xl(this.userId,-1,""))}}function Xw(n,e,t){const r=An.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return yd(n).jt({range:l,Kt:!0},(m,E,b)=>{const[x,R,F]=m;x===e&&R===o&&(d=!0),b.done()}).next(()=>d)}function Hu(n){return Yi(n,Dn.store)}function yd(n){return Yi(n,An.store)}function e0(n){return Yi(n,Xl.store)}class $u{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new $u(0)}static re(){return new $u(-1)}}class MT{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new $u(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>bt.fromTimestamp(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ae(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>po(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(ot(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return po(e).jt((d,m)=>{const E=nm(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,l.push(this.removeTargetData(e,E)))}).next(()=>Se.waitFor(l)).next(()=>o)}forEachTarget(e,t){return po(e).jt((r,o)=>{const l=nm(o);t(l)})}oe(e){return PT(e).get(ks.key).next(t=>(ot(null!==t),t))}ae(e,t){return PT(e).put(ks.key,t)}ce(e,t){return po(e).put(ST(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vg(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return po(e).jt({range:o,index:hs.queryTargetsIndexName},(d,m,E)=>{const b=nm(m);Ps(t,b.target)&&(l=b,E.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=tc(e);return t.forEach(d=>{const m=Go(d.path);o.push(l.put(new li(r,m))),o.push(this.referenceDelegate.addReference(e,r,d))}),Se.waitFor(o)}removeMatchingKeys(e,t,r){const o=tc(e);return Se.forEach(t,l=>{const d=Go(l.path);return Se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=tc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=tc(e);let l=on();return o.jt({range:r,Kt:!0},(d,m,E)=>{const b=qo(d[1]),x=new Ze(b);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=Go(t.path),o=IDBKeyRange.bound([r],[nw(r)],!1,!0);let l=0;return tc(e).jt({index:li.documentTargetsIndex,Kt:!0,range:o},([d,m],E,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(e,t){return po(e).get(t).next(r=>r?nm(r):null)}}function po(n){return Yi(n,hs.store)}function PT(n){return Yi(n,ks.store)}function tc(n){return Yi(n,li.store)}function go(n){return kT.apply(this,arguments)}function kT(){return(kT=(0,me.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==bT)throw n;Pe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function ky([n,e],[t,r]){const o=Ot(n,t);return 0===o?Ot(e,r):o}class BP{constructor(e){this.he=e,this.buffer=new or(ky),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ky(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Bu(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield go(o)}yield t.me(e)}))}}class FT{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Se.resolve(Ms.I);const r=new BP(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Qw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qw):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,l,d,m,E,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(l=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),Zl()<=qi.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${l} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(b-E)+`ms\nTotal Duration: ${b-x}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:R})))}}class jP{constructor(e,t){this.db=e,this.garbageCollector=new FT(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return et(e,r)}removeReference(e,t,r){return et(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return et(e,t)}Ae(e,t){return function(r,o){let l=!1;return e0(r).Qt(d=>Xw(r,d,o).next(m=>(m&&(l=!0),Se.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ie(e,(d,m)=>{if(m<=t){const E=this.Ae(e,d).next(b=>{if(!b)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d),tc(e).delete([0,Go(d.path)])))});o.push(E)}}).next(()=>Se.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return et(e,t)}Ie(e,t){const r=tc(e);let o,l=Ms.I;return r.jt({index:li.documentTargetsIndex},([d,m],{path:E,sequenceNumber:b})=>{0===d?(l!==Ms.I&&t(new Ze(qo(o)),l),l=b,o=E):l=Ms.I}).next(()=>{l!==Ms.I&&t(new Ze(qo(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function et(n,e){return tc(n).put((r=n.currentSequenceNumber,new li(0,Go(e.path),r)));var r}class Sf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){ad(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return ZI(this.inner)}}class LT{constructor(){this.changes=new Sf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:bt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Wt.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Se.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zx{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Qo(e).put(vd(t),r)}removeEntry(e,t){const r=Qo(e),o=vd(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Qo(e).get(vd(t)).next(r=>this.Pe(t,r))}be(e,t){return Qo(e).get(vd(t)).next(r=>({document:this.Pe(t,r),size:rm(r)}))}getEntries(e,t){let r=$o();return this.ve(e,t,(o,l)=>{const d=this.Pe(o,l);r=r.insert(o,d)}).next(()=>r)}Ve(e,t){let r=$o(),o=new Er(Ze.comparator);return this.ve(e,t,(l,d)=>{const m=this.Pe(l,d);r=r.insert(l,m),o=o.insert(l,rm(d))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Se.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let d=l.getNext();return Qo(e).jt({range:o},(m,E,b)=>{const x=Ze.fromSegments(m);for(;d&&Ze.comparator(d,x)<0;)r(d,null),d=l.getNext();d&&d.isEqual(x)&&(r(d,E),d=l.hasNext()?l.getNext():null),d?b.Lt(d.path.toArray()):b.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=$o();const l=t.path.length+1,d={};if(r.isEqual(bt.min())){const m=t.path.toArray();d.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),E=Zw(r);d.range=IDBKeyRange.lowerBound([m,E],!0),d.index=qn.collectionReadTimeIndex}return Qo(e).jt(d,(m,E,b)=>{if(m.length!==l)return;const x=zw(this.k,E);t.path.isPrefixOf(x.key.path)?jg(t,x)&&(o=o.insert(x.key,x)):b.done()}).next(()=>o)}newChangeBuffer(e){return new Oy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VT(e).get(Zo.key).next(t=>(ot(!!t),t))}Re(e,t){return VT(e).put(Zo.key,t)}Pe(e,t){if(t){const r=zw(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Wt.newInvalidDocument(e)}}class Oy extends LT{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Sf(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new or((l,d)=>Ot(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const m=this.Ce.get(l);if(d.document.isValidDocument()){const E=DT(this.De.k,d.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=rm(E)-m,t.push(this.De.addEntry(e,l,E))}else if(r-=m,this.trackRemovals){const E=DT(this.De.k,Wt.newNoDocument(l,bt.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,E))}else t.push(this.De.removeEntry(e,l))}),o.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((l,d)=>{this.Ce.set(l,d)}),r))}}function VT(n){return Yi(n,Zo.store)}function Qo(n){return Yi(n,qn.store)}function vd(n){return n.path.toArray()}class Xn{constructor(e){this.k=e}Nt(e,t,r,o){ot(r<o&&r>=0&&o<=11);const l=new _d("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Jn.store),(m=e).createObjectStore(Xl.store,{keyPath:Xl.keyPath}),m.createObjectStore(Dn.store,{keyPath:Dn.keyPath,autoIncrement:!0}).createIndex(Dn.userMutationsIndex,Dn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(An.store),Zx(e),function(m){m.createObjectStore(qn.store)}(e));let d=Se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(li.store),m.deleteObjectStore(hs.store),m.deleteObjectStore(ks.store)}(e),Zx(e)),d=d.next(()=>function(m){const E=m.store(ks.store),b=new ks(0,0,bt.min().toTimestamp(),0);return E.put(ks.key,b)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store(Dn.store).Bt().next(b=>{m.deleteObjectStore(Dn.store),m.createObjectStore(Dn.store,{keyPath:Dn.keyPath,autoIncrement:!0}).createIndex(Dn.userMutationsIndex,Dn.userMutationsKeyPath,{unique:!0});const x=E.store(Dn.store),R=b.map(F=>x.put(F));return Se.waitFor(R)})}(e,l))),d=d.next(()=>{!function(m){m.createObjectStore(Ko.store,{keyPath:Ko.keyPath})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ne(l))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore(Zo.store)}(e),this.ke(l)))),r<7&&o>=7&&(d=d.next(()=>this.xe(l))),r<8&&o>=8&&(d=d.next(()=>this.$e(e,l))),r<9&&o>=9&&(d=d.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const E=m.objectStore(qn.store);E.createIndex(qn.readTimeIndex,qn.readTimeIndexPath,{unique:!1}),E.createIndex(qn.collectionReadTimeIndex,qn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(d=d.next(()=>this.Fe(l))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore(Ga.store,{keyPath:Ga.keyPath})})(e),function(m){m.createObjectStore(bf.store,{keyPath:bf.keyPath})}(e)})),d}ke(e){let t=0;return e.store(qn.store).jt((r,o)=>{t+=rm(o)}).next(()=>{const r=new Zo(t);return e.store(Zo.store).put(Zo.key,r)})}Ne(e){const t=e.store(Xl.store),r=e.store(Dn.store);return t.Bt().next(o=>Se.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Bt(Dn.userMutationsIndex,d).next(m=>Se.forEach(m,E=>{ot(E.userId===l.userId);const b=Af(this.k,E);return Jw(e,l.userId,b).next(()=>{})}))}))}xe(e){const t=e.store(li.store),r=e.store(qn.store);return e.store(ks.store).get(ks.key).next(o=>{const l=[];return r.jt((d,m)=>{const E=new ln(d),b=[0,Go(E)];l.push(t.get(b).next(x=>x?Se.resolve():t.put(new li(0,Go(E),o.highestListenSequenceNumber))))}).next(()=>Se.waitFor(l))})}$e(e,t){e.createObjectStore(md.store,{keyPath:md.keyPath});const r=t.store(md.store),o=new Yw,l=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Go(E)})}};return t.store(qn.store).jt({Kt:!0},(d,m)=>{const E=new ln(d);return l(E.popLast())}).next(()=>t.store(An.store).jt({Kt:!0},([d,m,E],b)=>{const x=qo(m);return l(x.popLast())}))}Fe(e){const t=e.store(hs.store);return t.jt((r,o)=>{const l=nm(o),d=ST(this.k,l);return t.put(d)})}}function Zx(n){n.createObjectStore(li.store,{keyPath:li.keyPath}).createIndex(li.documentTargetsIndex,li.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(hs.store,{keyPath:hs.keyPath}).createIndex(hs.queryTargetsIndexName,hs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ks.store)}const Fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class im{constructor(e,t,r,o,l,d,m,E,b,x){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=l,this.window=d,this.document=m,this.Me=b,this.Le=x,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=R=>Promise.resolve(),!im.bt())throw new Te(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jP(this,o),this.Ge=t+"main",this.k=new TT(E),this.ze=new Yo(this.Ge,11,new Xn(this.k)),this.He=new MT(this.referenceDelegate,this.k),this.Jt=new Wx,this.Je=new zx(this.k,this.Jt),this.Ye=new Gx,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===x&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(pe.FAILED_PRECONDITION,Fy);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Ms(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>om(e).put(new Ko(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Bu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return sm(e).get(Jn.key).next(t=>Se.resolve(this.un(t)))}hn(e){return om(e).delete(this.clientId)}ln(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Yi(r,Ko.store);return o.Bt().next(l=>{const d=e.dn(l,18e5),m=l.filter(E=>-1===d.indexOf(E));return Se.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Se.resolve(!0):sm(e).get(Jn.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Te(pe.FAILED_PRECONDITION,Fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||om(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Jn.store,Ko.store],t=>{const r=new Ww(t,Ms.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>om(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Py.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let l;return Pe("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",CT,d=>(l=new Ww(d,this.Be?this.Be.next():Ms.I),"readwrite-primary"===t?this.rn(l).next(m=>!!m||this.on(l)).next(m=>{if(!m)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Te(pe.FAILED_PRECONDITION,bT);return r(l)}).next(m=>this.cn(l).next(()=>m)):this.En(l).next(()=>r(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}En(e){return sm(e).get(Jn.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(pe.FAILED_PRECONDITION,Fy)})}cn(e){const t=new Jn(this.clientId,this.allowTabSynchronization,Date.now());return sm(e).put(Jn.key,t)}static bt(){return Yo.bt()}an(e){const t=sm(e);return t.get(Jn.key).next(r=>this.un(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete(Jn.key)):Se.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(_r(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sm(n){return Yi(n,Jn.store)}function om(n){return Yi(n,Ko.store)}function Ly(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UT{constructor(e,t){this.progress=e,this.In=t}}class t0{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):gw(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new Ze(t)).next(r=>{let o=Iw();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let l=Iw();return this.Jt.getCollectionParents(e,o).next(d=>Se.forEach(d,m=>{const E=(b=t,x=m.child(o),new $a(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.Cn(e,E,r).next(b=>{b.forEach((x,R)=>{l=l.insert(x,R)})})}).next(()=>l))}Cn(e,t,r){let o,l;return this.Je.getDocumentsMatchingQuery(e,t,r).next(d=>(o=d,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(d=>(l=d,this.Nn(e,l,o).next(m=>{o=m;for(const E of l)for(const b of E.mutations){const x=b.key;let R=o.get(x);null==R&&(R=Wt.newInvalidDocument(x),o=o.insert(x,R)),vw(b,R,E.localWriteTime),R.isFoundDocument()||(o=o.remove(x))}}))).next(()=>(o.forEach((d,m)=>{jg(t,m)||(o=o.remove(d))}),o))}Nn(e,t,r){let o=on();for(const d of t)for(const m of d.mutations)m instanceof Uu&&null===r.get(m.key)&&(o=o.add(m.key));let l=r;return this.Je.getEntries(e,o).next(d=>(d.forEach((m,E)=>{E.isFoundDocument()&&(l=l.insert(m,E))}),l))}}class n0{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=on(),o=on();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new n0(e,t.fromCache,r,o)}}class BT{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Mn(e,t):this.On.vn(e,o).next(l=>{const d=this.Ln(t,l);return(Ug(t)||Bg(t))&&this.Bn(t.limitType,d,o,r)?this.Mn(e,t):(Zl()<=qi.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nT(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(m=>(d.forEach(E=>{m=m.insert(E.key,E)}),m)))});var l}Ln(e,t){let r=new or(mw(e));return t.forEach((o,l)=>{jg(e,l)&&(r=r.add(l))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Mn(e,t){return Zl()<=qi.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",nT(t)),this.On.getDocumentsMatchingQuery(e,t,bt.min())}}class Kx{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new Er(Ot),this.Kn=new Sf(l=>Vg(l),Ps),this.jn=bt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new t0(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function xf(n,e,t,r){return new Kx(n,e,t,r)}function jT(n,e){return r0.apply(this,arguments)}function r0(){return(r0=(0,me.Z)(function*(n,e){const t=Fe(n);let r=t.An,o=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",d=>{let m;return t.An.getAllMutationBatches(d).next(E=>(m=E,r=t.persistence.getMutationQueue(e),o=new t0(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(d))).next(E=>{const b=[],x=[];let R=on();for(const F of m){b.push(F.batchId);for(const q of F.mutations)R=R.add(q.key)}for(const F of E){x.push(F.batchId);for(const q of F.mutations)R=R.add(q.key)}return o.vn(d,R).next(F=>({Gn:F,removedBatchIds:b,addedBatchIds:x}))})});return t.An=r,t.Wn=o,t.Un.Fn(t.Wn),l})).apply(this,arguments)}function Yx(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(d,m,E,b){const x=E.batch,R=x.keys();let F=Se.resolve();return R.forEach(q=>{F=F.next(()=>b.getEntry(m,q)).next(ee=>{const Ae=E.docVersions.get(q);ot(null!==Ae),ee.version.compareTo(Ae)<0&&(x.applyToRemoteDocument(ee,E),ee.isValidDocument()&&b.addEntry(ee,E.commitVersion))})}),F.next(()=>d.An.removeMutationBatch(m,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function am(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function HT(n,e){const t=Fe(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const m=[];e.targetChanges.forEach((b,x)=>{const R=o.get(x);if(!R)return;m.push(t.He.removeMatchingKeys(l,b.removedDocuments,x).next(()=>t.He.addMatchingKeys(l,b.addedDocuments,x)));const F=b.resumeToken;if(F.approximateByteSize()>0){const q=R.withResumeToken(F,r).withSequenceNumber(l.currentSequenceNumber);o=o.insert(x,q),ee=R,ke=b,ot((Ae=q).resumeToken.approximateByteSize()>0),(0===ee.resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.He.updateTargetData(l,q))}var ee,Ae,ke});let E=$o();if(e.documentUpdates.forEach((b,x)=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))}),m.push(s0(l,d,e.documentUpdates,r,void 0).next(b=>{E=b})),!r.isEqual(bt.min())){const b=t.He.getLastRemoteSnapshotVersion(l).next(x=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(b)}return Se.waitFor(m).next(()=>d.apply(l)).next(()=>t.Wn.Vn(l,E)).next(()=>E)}).then(l=>(t.qn=o,l))}function s0(n,e,t,r,o){let l=on();return t.forEach(d=>l=l.add(d)),e.getEntries(n,l).next(d=>{let m=$o();return t.forEach((E,b)=>{const x=d.get(E),R=(null==o?void 0:o.get(E))||r;b.isNoDocument()&&b.version.isEqual(bt.min())?(e.removeEntry(E,R),m=m.insert(E,b)):!x.isValidDocument()||b.version.compareTo(x.version)>0||0===b.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(b,R),m=m.insert(E,b)):Pe("LocalStore","Ignoring outdated watch update for ",E,". Current version:",x.version," Watch version:",b.version)}),m})}function $T(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Rf(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(l=>l?(o=l,Se.resolve(o)):t.He.allocateTargetId(r).next(d=>(o=new ju(e,d,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function qa(n,e,t){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,me.Z)(function*(n,e,t){const r=Fe(n),o=r.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Bu(d))throw d;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)})).apply(this,arguments)}function Vy(n,e,t){const r=Fe(n);let o=bt.min(),l=on();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,b){const x=Fe(m),R=x.Kn.get(b);return void 0!==R?Se.resolve(x.qn.get(R)):x.He.getTargetData(E,b)}(r,d,ho(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(d,m.targetId).next(E=>{l=E})}).next(()=>r.Un.getDocumentsMatchingQuery(d,e,t?o:bt.min(),t?l:on())).next(m=>({documents:m,zn:l})))}function GT(n,e){const t=Fe(n),r=Fe(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(d=>d?d.target:null))}function qT(n){const e=Fe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const d=Fe(r);let m=$o(),E=Zw(l);const b=Qo(o),x=IDBKeyRange.lowerBound(E,!0);return b.jt({index:qn.readTimeIndex,range:x},(R,F)=>{const q=zw(d.k,F);m=m.insert(q.key,q),E=F.readTime}).next(()=>({In:m,readTime:AT(E)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function Uy(){return(Uy=(0,me.Z)(function*(n){const e=Fe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Qo(r);let l=bt.min();return o.jt({index:qn.readTimeIndex,reverse:!0},(d,m,E)=>{m.readTime&&(l=AT(m.readTime)),E.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function o0(){return(o0=(0,me.Z)(function*(n,e,t,r){const o=Fe(n);let l=on(),d=$o(),m=Ay();for(const x of t){const R=e.Hn(x.metadata.name);x.document&&(l=l.add(R)),d=d.insert(R,e.Jn(x)),m=m.insert(R,e.Yn(x.metadata.readTime))}const E=o.Qn.newChangeBuffer({trackRemovals:!0}),b=yield Rf(o,(x=r,ho(hd(ln.fromString(`__bundle__/docs/${x}`)))));var x;return o.persistence.runTransaction("Apply bundle documents","readwrite",x=>s0(x,E,d,bt.min(),m).next(R=>(E.apply(x),R)).next(R=>o.He.removeMatchingKeysForTargetId(x,b.targetId).next(()=>o.He.addMatchingKeys(x,l,b.targetId)).next(()=>o.Wn.Vn(x,R)).next(()=>R)))})).apply(this,arguments)}function ZT(n,e){return a0.apply(this,arguments)}function a0(){return(a0=(0,me.Z)(function*(n,e,t=on()){const r=yield Rf(n,ho(Kw(e.bundledQuery))),o=Fe(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=kr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ye.saveNamedQuery(l,e);const m=r.withResumeToken(ui.EMPTY_BYTE_STRING,d);return o.qn=o.qn.insert(m.targetId,m),o.He.updateTargetData(l,m).next(()=>o.He.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.He.addMatchingKeys(l,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(l,e))})})).apply(this,arguments)}class Qx{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Se.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:Kw(r.bundledQuery),readTime:kr(r.readTime)}),Se.resolve();var r}}class KT{constructor(){this.ts=new or(ci.es),this.ns=new or(ci.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new ci(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new ci(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ze(new ln([])),r=new ci(t,e),o=new ci(t,e+1),l=[];return this.ns.forEachInRange([r,o],d=>{this.os(d),l.push(d.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Ze(new ln([])),r=new ci(t,e),o=new ci(t,e+1);let l=on();return this.ns.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new ci(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Ze.comparator(e.key,t.key)||Ot(e.fs,t.fs)}static ss(e,t){return Ot(e.fs,t.fs)||Ze.comparator(e.key,t.key)}}class HP{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new or(ci.es)}checkEmpty(e){return Se.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const l=this.ds;this.ds++;const d=new Ny(l,t,r,o);this.An.push(d);for(const m of o)this.ws=this.ws.add(new ci(m.key,l)),this.Jt.addToCollectionParentIndex(e,m.key.path.popLast());return Se.resolve(d)}lookupMutationBatch(e,t){return Se.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),l=o<0?0:o;return Se.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Se.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),o=new ci(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([r,o],d=>{const m=this._s(d.fs);l.push(m)}),Se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Ot);return t.forEach(o=>{const l=new ci(o,0),d=new ci(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,d],m=>{r=r.add(m.fs)})}),Se.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ze.isDocumentKey(l)||(l=l.child(""));const d=new ci(new Ze(l),0);let m=new or(Ot);return this.ws.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(E.fs)),!0)},d),Se.resolve(this.ys(m))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ot(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Se.forEach(t.mutations,o=>{const l=new ci(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new ci(t,0),o=this.ws.firstAfterOrEqual(r);return Se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Se.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class $P{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Er(Ze.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),d=l?l.size:0,m=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:m,readTime:r}),this.size+=m-d,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.clone():Wt.newInvalidDocument(t))}getEntries(e,t){let r=$o();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.clone():Wt.newInvalidDocument(o))}),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=$o();const l=new Ze(t.path.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:m,value:{document:E,readTime:b}}=d.getNext();if(!t.path.isPrefixOf(m.path))break;b.compareTo(r)<=0||jg(t,E)&&(o=o.insert(E.key,E.clone()))}return Se.resolve(o)}Es(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YT(this)}getSize(e){return Se.resolve(this.size)}}class YT extends LT{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class By{constructor(e){this.persistence=e,this.Is=new Sf(t=>Vg(t),Ps),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.As=0,this.Rs=new KT,this.targetCount=0,this.Ps=$u.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Se.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new $u(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.ce(t),Se.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Is.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Is.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Se.waitFor(l).next(()=>o)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),Se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.Rs.containsKey(t))}}class Jx{constructor(e,t){this.bs={},this.Be=new Ms(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new By(this),this.Jt=new qx,this.Je=new $P(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new TT(t),this.Ye=new Qx(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new HP(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new Xx(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(l=>this.referenceDelegate.Ss(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ds(e,t){return Se.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class Xx extends $w{constructor(e){super(),this.currentSequenceNumber=e}}class jy{constructor(e){this.persistence=e,this.Cs=new KT,this.Ns=null}static ks(e){return new jy(e)}get xs(){if(this.Ns)return this.Ns;throw Je()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.xs,r=>{const o=Ze.fromPath(r);return this.$s(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Se.or([()=>Se.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Nf(n,e){return`firestore_clients_${n}_${e}`}function QT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function u0(n,e){return`firestore_targets_${n}_${e}`}class Hy{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Fs(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Te(o.error.code,o.error.message))),d?new Hy(e,t,o.state,l):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class um{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Te(r.error.code,r.error.message))),l?new um(e,r.state,o):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $y{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Yg();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=sw(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new $y(e,l):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Gy{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gy(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class l0{constructor(){this.activeTargetIds=Yg()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c0{constructor(e,t,r,o,l){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Er(Ot),this.started=!1,this.js=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=Nf(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new l0),this.Gs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const l=e.getItem(Nf(e.persistenceKey,o));if(l){const d=$y.Fs(o,l);d&&(e.Ks=e.Ks.insert(d.clientId,d))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(u0(this.persistenceKey,e));if(r){const o=um.Fs(e,r);o&&(t=o.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u0(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(l){let d=Ms.I;if(null!=l)try{const m=JSON.parse(l);ot("number"==typeof m),d=m}catch(m){_r("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Ms.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const o=new Hy(this.currentUser,e,t,r),l=QT(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Os())}si(e){const t=QT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=u0(this.persistenceKey,e),l=new um(e,t,r);this.setItem(o,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return $y.Fs(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Hy.Fs(new Zr(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return um.Fs(o,t)}Zs(e){return Gy.Fs(e)}fi(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),l=this.ei(r),d=[],m=[];return l.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{l.has(E)||m.push(E)}),this.syncEngine.yi(d,m).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Yg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class wd{constructor(){this.pi=new l0,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new l0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class eR{Ei(e){}shutdown(){}}class d0{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class JT{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class nR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,l){const d=this.Ui(e,t);Pe("RestConnection","Sending: ",d,r);const m={};return this.qi(m,o,l),this.Ki(e,d,m,r).then(E=>(Pe("RestConnection","Received: ",E),E),E=>{throw kg("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}ji(e,t,r,o,l){return this.Bi(e,t,r,o,l)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+of,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}Ui(e,t){return`${this.Mi}/v1/${t}:${tR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((l,d)=>{const m=new HI;m.listenOnce(jI.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ew.NO_ERROR:const b=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),l(b);break;case ew.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),d(new Te(pe.DEADLINE_EXCEEDED,"Request time out"));break;case ew.HTTP_ERROR:const x=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const F=function(q){const ee=q.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(ee)>=0?ee:pe.UNKNOWN}(R.status);d(new Te(F,R.message))}else d(new Te(pe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Te(pe.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}Qi(e,t,r){const o=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=XE(),d=BI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Ax({})),this.qi(m.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Pe("Connection","Creating WebChannel: "+E,m);const b=l.createWebChannel(E,m);let x=!1,R=!1;const F=new JT({Vi:ee=>{R?Pe("Connection","Not sending because WebChannel is closed:",ee):(x||(Pe("Connection","Opening WebChannel transport."),b.open(),x=!0),Pe("Connection","WebChannel sending:",ee),b.send(ee))},Si:()=>b.close()}),q=(ee,Ae,ke)=>{ee.listen(Ae,St=>{try{ke(St)}catch(Et){setTimeout(()=>{throw Et},0)}})};return q(b,hy.EventType.OPEN,()=>{R||Pe("Connection","WebChannel transport opened.")}),q(b,hy.EventType.CLOSE,()=>{R||(R=!0,Pe("Connection","WebChannel transport closed"),F.Fi())}),q(b,hy.EventType.ERROR,ee=>{R||(R=!0,kg("Connection","WebChannel transport errored:",ee),F.Fi(new Te(pe.UNAVAILABLE,"The operation could not be completed")))}),q(b,hy.EventType.MESSAGE,ee=>{var Ae;if(!R){const ke=ee.data[0];ot(!!ke);const St=ke,Et=St.error||(null===(Ae=St[0])||void 0===Ae?void 0:Ae.error);if(Et){Pe("Connection","WebChannel received error:",Et);const dn=Et.status;let Lt=function(al){const sx=vr[al];if(void 0!==sx)return cT(sx)}(dn),ur=Et.message;void 0===Lt&&(Lt=pe.INTERNAL,ur="Unknown error status: "+dn+" with message "+Et.message),R=!0,F.Fi(new Te(Lt,ur)),b.close()}else Pe("Connection","WebChannel received:",ke),F.Oi(ke)}}),q(d,Dx.STAT_EVENT,ee=>{ee.stat===dy.PROXY?Pe("Connection","Detected buffering proxy"):ee.stat===dy.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.$i()},0),F}}function h0(){return"undefined"!=typeof window?window:null}function qy(){return"undefined"!=typeof document?document:null}function Cd(n){return new Lx(n,!0)}class f0{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class p0{constructor(e,t,r,o,l,d,m,E){this.Oe=e,this.nr=r,this.sr=o,this.ir=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new f0(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,me.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,me.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Te(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,me.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XT extends p0{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Je(),o=e.targetChange.targetIds||[],l=function(E,b){return E.C?(ot(void 0===b||"string"==typeof b),ui.fromBase64String(b||"")):(ot(void 0===b||b instanceof Uint8Array),ui.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const b=void 0===E.code?pe.UNKNOWN:cT(E.code);return new Te(b,E.message||"")}(d);t=new dT(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=fo(n,r.document.name),l=kr(r.document.updateTime),d=new sr({mapValue:{fields:r.document.fields}}),m=Wt.newFoundDocument(o,l,d);t=new Jg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=fo(n,r.document),l=r.readTime?kr(r.readTime):bt.min(),d=Wt.newNoDocument(o,l);t=new Jg([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=fo(n,r.document);t=new Jg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Je();{const r=e.filter,l=new kx(r.count||0);t=new Aw(r.targetId,l)}}var E;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return bt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?bt.min():l.readTime?kr(l.readTime):bt.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=wf(this.k),t.addTarget=function(o,l){let d;const m=l.target;return d=Jl(m)?{documents:mT(o,m)}:{query:Uw(o,m)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=Mw(o,l.resumeToken):l.snapshotVersion.compareTo(bt.min())>0&&(d.readTime=Ef(o,l.snapshotVersion.toTimestamp())),d}(this.k,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=wf(this.k),t.removeTarget=e,this.gr(t)}}class rR extends p0{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(ot(void 0!==e),n.map(t=>function(r,o){let l=kr(r.updateTime?r.updateTime:o);return l.isEqual(bt.min())&&(l=kr(o)),new VP(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Cr(r,t)}return ot(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=wf(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tm(this.k,r))};this.gr(t)}}class iR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Fr(){if(this.$r)throw new Te(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.Bi(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(pe.UNKNOWN,o.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.ji(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(pe.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class sR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(_r(t),this.Lr=!1):Pe("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class g0{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(m=>{r.enqueueAndForget((0,me.Z)(function*(){var E;Gu(d)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,me.Z)(function*(b){const x=Fe(b);x.Gr.add(4),yield Mf(x),x.Jr.set("Unknown"),x.Gr.delete(4),yield lm(x)}),function(b){return E.apply(this,arguments)})(d))}))}),this.Jr=new sR(r,o)}}function lm(n){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,me.Z)(function*(n){if(Gu(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function Mf(n){return m0.apply(this,arguments)}function m0(){return(m0=(0,me.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function zy(n,e){const t=Fe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),v0(t)?y0(t):Ff(t).lr()&&_0(t,e))}function cm(n,e){const t=Fe(n),r=Ff(t);t.Wr.delete(e),r.lr()&&eD(t,e),0===t.Wr.size&&(r.lr()?r._r():Gu(t)&&t.Jr.set("Unknown"))}function _0(n,e){n.Yr.X(e.targetId),Ff(n).br(e)}function eD(n,e){n.Yr.X(e),Ff(n).vr(e)}function y0(n){n.Yr=new xw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Ff(n).start(),n.Jr.Br()}function v0(n){return Gu(n)&&!Ff(n).hr()&&n.Wr.size>0}function Gu(n){return 0===Fe(n).Gr.size}function E0(n){n.Yr=void 0}function oR(n){return w0.apply(this,arguments)}function w0(){return(w0=(0,me.Z)(function*(n){n.Wr.forEach((e,t)=>{_0(n,e)})})).apply(this,arguments)}function tD(n,e){return C0.apply(this,arguments)}function C0(){return(C0=(0,me.Z)(function*(n,e){E0(n),v0(n)?(n.Jr.Kr(e),y0(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function aR(n,e,t){return b0.apply(this,arguments)}function b0(){return(b0=(0,me.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof dT&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,l){const d=l.cause;for(const m of l.targetIds)o.Wr.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.Wr.delete(m),o.Yr.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pf(n,r)}else if(e instanceof Jg?n.Yr.ot(e):e instanceof Aw?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(bt.min()))try{const r=yield am(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.Yr.gt(l);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Wr.get(E);b&&o.Wr.set(E,b.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach(m=>{const E=o.Wr.get(m);if(!E)return;o.Wr.set(m,E.withResumeToken(ui.EMPTY_BYTE_STRING,E.snapshotVersion)),eD(o,m);const b=new ju(E.target,m,1,E.sequenceNumber);_0(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Pf(n,r)}var r})).apply(this,arguments)}function Pf(n,e,t){return dm.apply(this,arguments)}function dm(){return(dm=(0,me.Z)(function*(n,e,t){if(!Bu(e))throw e;n.Gr.add(1),yield Mf(n),n.Jr.set("Offline"),t||(t=()=>am(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield lm(n)}))})).apply(this,arguments)}function I0(n,e){return e().catch(t=>Pf(n,t,e))}function nc(n){return T0.apply(this,arguments)}function T0(){return(T0=(0,me.Z)(function*(n){const e=Fe(n),t=Os(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;uR(e);)try{const o=yield $T(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,D0(e,o)}catch(o){yield Pf(e,o)}nD(e)&&A0(e)})).apply(this,arguments)}function uR(n){return Gu(n)&&n.Qr.length<10}function D0(n,e){n.Qr.push(e);const t=Os(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function nD(n){return Gu(n)&&!Os(n).hr()&&n.Qr.length>0}function A0(n){Os(n).start()}function lR(n){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,me.Z)(function*(n){Os(n).kr()})).apply(this,arguments)}function rD(n){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,me.Z)(function*(n){const e=Os(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function GP(n,e,t){return S0.apply(this,arguments)}function S0(){return(S0=(0,me.Z)(function*(n,e,t){const r=n.Qr.shift(),o=My.from(r,e,t);yield I0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield nc(n)})).apply(this,arguments)}function kf(n,e){return iD.apply(this,arguments)}function iD(){return(iD=(0,me.Z)(function*(n,e){var t;e&&Os(n).Sr&&(yield(t=(0,me.Z)(function*(r,o){if(bw(l=o.code)&&l!==pe.ABORTED){const d=r.Qr.shift();Os(r).wr(),yield I0(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield nc(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),nD(n)&&A0(n)})).apply(this,arguments)}function hm(n,e){return Of.apply(this,arguments)}function Of(){return(Of=(0,me.Z)(function*(n,e){const t=Fe(n);e?(t.Gr.delete(2),yield lm(t)):e||(t.Gr.add(2),yield Mf(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function Ff(n){return n.Xr||(n.Xr=function(e,t,r){const o=Fe(e);return o.Fr(),new XT(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:oR.bind(null,n),Ni:tD.bind(null,n),Pr:aR.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Xr.wr(),v0(n)?y0(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),E0(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Os(n){return n.Zr||(n.Zr=function(e,t,r){const o=Fe(e);return o.Fr(),new rR(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:lR.bind(null,n),Ni:kf.bind(null,n),Nr:rD.bind(null,n),Cr:GP.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Zr.wr(),yield nc(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class x0{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new x0(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fm(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Bu(n))return new Te(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Lf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Iw(),this.sortedSet=new Er(this.comparator)}static emptySet(e){return new Lf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Lf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jo{constructor(){this.eo=new Er(Ze.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Je():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class bd{constructor(e,t,r,o,l,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new bd(e,t,Lf.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class qP{constructor(){this.so=void 0,this.listeners=[]}}class Yy{constructor(){this.queries=new Sf(e=>tT(e),gf),this.onlineState="Unknown",this.io=new Set}}function R0(n,e){return N0.apply(this,arguments)}function N0(){return(N0=(0,me.Z)(function*(n,e){const t=Fe(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new qP),o)try{l.so=yield t.onListen(r)}catch(d){const m=fm(d,`Initialization of query '${nT(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&pm(t)})).apply(this,arguments)}function sD(n,e){return M0.apply(this,arguments)}function M0(){return(M0=(0,me.Z)(function*(n,e){const t=Fe(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function cR(n,e){const t=Fe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.oo(o)&&(r=!0);d.so=o}}r&&pm(t)}function dR(n,e,t){const r=Fe(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function pm(n){n.io.forEach(e=>{e.next()})}class Qy{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new bd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=bd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class P0{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class k0{constructor(e){this.k=e}Hn(e){return fo(this.k,e)}Jn(e){return e.metadata.exists?Vw(this.k,e.document,!1):Wt.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return kr(e)}}class hR{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=fR(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new k0(this.k);for(const o of e)if(o.metadata.queries){const l=r.Hn(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||on()).add(l);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function(n,e,t,r){return o0.apply(this,arguments)}(e.localStore,new k0(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield ZT(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new UT(Object.assign({},e.progress),t)})()}}function fR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class oD{constructor(e){this.key=e}}class aD{constructor(e){this.key=e}}class uD{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=on(),this.mutatedKeys=on(),this.Ao=mw(e),this.Ro=new Lf(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new Jo,o=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E=Ug(this.query)&&o.size===this.query.limit?o.last():null,b=Bg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,R)=>{const F=o.get(x),q=jg(this.query,R)?R:null,ee=!!F&&this.mutatedKeys.has(F.key),Ae=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let ke=!1;F&&q?F.data.isEqual(q.data)?ee!==Ae&&(r.track({type:3,doc:q}),ke=!0):this.Vo(F,q)||(r.track({type:2,doc:q}),ke=!0,(E&&this.Ao(q,E)>0||b&&this.Ao(q,b)<0)&&(m=!0)):!F&&q?(r.track({type:0,doc:q}),ke=!0):F&&!q&&(r.track({type:1,doc:F}),ke=!0,(E||b)&&(m=!0)),ke&&(q?(d=d.add(q),l=Ae?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),Ug(this.query)||Bg(this.query))for(;d.size>this.query.limit;){const x=Ug(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{Ro:d,vo:r,Bn:m,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((b,x)=>function(R,F){const q=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return q(R)-q(F)}(b.type,x.type)||this.Ao(b.doc,x.doc)),this.So(r);const d=t?this.Do():[],m=0===this.Io.size&&this.current?1:0,E=m!==this.Eo;return this.Eo=m,0!==l.length||E?{snapshot:new bd(this.query,e.Ro,o,l,e.mutatedKeys,0===m,E,!1),Co:d}:{Co:d}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Jo,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=on(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new aD(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new oD(r))}),t}ko(e){this.To=e.zn,this.Io=on();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return bd.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class lD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cD{constructor(e){this.key=e,this.$o=!1}}class dD{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Fo={},this.Oo=new Sf(m=>tT(m),gf),this.Mo=new Map,this.Lo=new Set,this.Bo=new Er(Ze.comparator),this.Uo=new Map,this.qo=new KT,this.Ko={},this.jo=new Map,this.Qo=$u.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function pR(n,e){return O0.apply(this,arguments)}function O0(){return(O0=(0,me.Z)(function*(n,e){const t=$f(n);let r,o;const l=t.Oo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.xo();else{const d=yield Rf(t.localStore,ho(e)),m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Jy(t,e,r,"current"===m),t.isPrimaryClient&&zy(t.remoteStore,d)}return o})).apply(this,arguments)}function Jy(n,e,t,r){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,me.Z)(function*(n,e,t,r){n.Go=(x,R,F)=>{return(q=(0,me.Z)(function*(ee,Ae,ke,St){let Et=Ae.view.bo(ke);Et.Bn&&(Et=yield Vy(ee.localStore,Ae.query,!1).then(({documents:ur})=>Ae.view.bo(ur,Et)));const dn=St&&St.targetChanges.get(Ae.targetId),Lt=Ae.view.applyChanges(Et,ee.isPrimaryClient,dn);return Id(ee,Ae.targetId,Lt.Co),Lt.snapshot}),function(ee,Ae,ke,St){return q.apply(this,arguments)})(n,x,R,F);var q};const o=yield Vy(n.localStore,e,!0),l=new uD(e,o.zn),d=l.bo(o.documents),m=Qg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=l.applyChanges(d,n.isPrimaryClient,m);Id(n,t,E.Co);const b=new lD(e,t,l);return n.Oo.set(e,b),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),E.snapshot})).apply(this,arguments)}function gR(n,e){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,me.Z)(function*(n,e){const t=Fe(n),r=t.Oo.get(e),o=t.Mo.get(r.targetId);if(o.length>1)return t.Mo.set(r.targetId,o.filter(l=>!gf(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qa(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cm(t.remoteStore,r.targetId),gm(t,r.targetId)}).catch(go))):(gm(t,r.targetId),yield qa(t.localStore,r.targetId,!0))})).apply(this,arguments)}function Uf(){return(Uf=(0,me.Z)(function*(n,e,t){const r=yD(n);try{const o=yield function(l,d){const m=Fe(l),E=Nr.now(),b=d.reduce((R,F)=>R.add(F.key),on());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.Wn.vn(R,b).next(F=>{x=F;const q=[];for(const ee of d){const Ae=vf(ee,x.get(ee.key));null!=Ae&&q.push(new Uu(ee.key,Ae,lw(Ae.value.mapValue),Mr.exists(!0)))}return m.An.addMutationBatch(R,E,q,d)})).then(R=>(R.applyToLocalDocumentSet(x),{batchId:R.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,m){let E=l.Ko[l.currentUser.toKey()];E||(E=new Er(Ot)),E=E.insert(d,m),l.Ko[l.currentUser.toKey()]=E}(r,o.batchId,t),yield qu(r,o.changes),yield nc(r.remoteStore)}catch(o){const l=fm(o,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function Bf(n,e){return F0.apply(this,arguments)}function F0(){return(F0=(0,me.Z)(function*(n,e){const t=Fe(n);try{const r=yield HT(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Uo.get(l);d&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.$o=!0:o.modifiedDocuments.size>0?ot(d.$o):o.removedDocuments.size>0&&(ot(d.$o),d.$o=!1))}),yield qu(t,r,e)}catch(r){yield go(r)}})).apply(this,arguments)}function hD(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((l,d)=>{const m=d.view.ro(e);m.snapshot&&o.push(m.snapshot)}),function(l,d){const m=Fe(l);m.onlineState=d;let E=!1;m.queries.forEach((b,x)=>{for(const R of x.listeners)R.ro(d)&&(E=!0)}),E&&pm(m)}(r.eventManager,e),o.length&&r.Fo.Pr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WP(n,e,t){return L0.apply(this,arguments)}function L0(){return(L0=(0,me.Z)(function*(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),l=o&&o.key;if(l){let d=new Er(Ze.comparator);d=d.insert(l,Wt.newNoDocument(l,bt.min()));const m=on().add(l),E=new Sy(bt.min(),new Map,new or(Ot),d,m);yield Bf(r,E),r.Bo=r.Bo.remove(l),r.Uo.delete(e),$0(r)}else yield qa(r.localStore,e,!1).then(()=>gm(r,e,t)).catch(go)})).apply(this,arguments)}function mR(n,e){return V0.apply(this,arguments)}function V0(){return(V0=(0,me.Z)(function*(n,e){const t=Fe(n),r=e.batch.batchId;try{const o=yield Yx(t.localStore,e);H0(t,r,null),j0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qu(t,o)}catch(o){yield go(o)}})).apply(this,arguments)}function _R(n,e,t){return U0.apply(this,arguments)}function U0(){return(U0=(0,me.Z)(function*(n,e,t){const r=Fe(n);try{const o=yield function(l,d){const m=Fe(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return m.An.lookupMutationBatch(E,d).next(x=>(ot(null!==x),b=x.keys(),m.An.removeMutationBatch(E,x))).next(()=>m.An.performConsistencyCheck(E)).next(()=>m.Wn.vn(E,b))})}(r.localStore,e);H0(r,e,t),j0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qu(r,o)}catch(o){yield go(o)}})).apply(this,arguments)}function B0(){return(B0=(0,me.Z)(function*(n,e){const t=Fe(n);Gu(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=Fe(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.An.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=fm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function j0(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function H0(n,e,t){const r=Fe(n);let o=r.Ko[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||fD(n,r)})}function fD(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(cm(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),$0(n))}function Id(n,e,t){for(const r of t)r instanceof oD?(n.qo.addReference(r.key,e),vR(n,r)):r instanceof aD?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||fD(n,r.key)):Je()}function vR(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.Lo.add(r),$0(n))}function $0(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Ze(ln.fromString(e)),r=n.Qo.next();n.Uo.set(r,new cD(t)),n.Bo=n.Bo.insert(t,r),zy(n.remoteStore,new ju(ho(hd(t.path)),r,2,Ms.I))}}function qu(n,e,t){return jf.apply(this,arguments)}function jf(){return(jf=(0,me.Z)(function*(n,e,t){const r=Fe(n),o=[],l=[],d=[];var m;r.Oo.isEmpty()||(r.Oo.forEach((m,E)=>{d.push(r.Go(E,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b.fromCache?"not-current":"current"),o.push(b);const x=n0.$n(E.targetId,b);l.push(x)}}))}),yield Promise.all(d),r.Fo.Pr(o),yield(m=(0,me.Z)(function*(E,b){const x=Fe(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Se.forEach(b,F=>Se.forEach(F.kn,q=>x.persistence.referenceDelegate.addReference(R,F.targetId,q)).next(()=>Se.forEach(F.xn,q=>x.persistence.referenceDelegate.removeReference(R,F.targetId,q)))))}catch(R){if(!Bu(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const F=R.targetId;if(!R.fromCache){const q=x.qn.get(F),Ae=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);x.qn=x.qn.insert(F,Ae)}}}),function(E,b){return m.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function Td(n,e){return tv.apply(this,arguments)}function tv(){return(tv=(0,me.Z)(function*(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield jT(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(d=>{d.forEach(m=>{m.reject(new Te(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qu(t,r.Gn)}var o})).apply(this,arguments)}function ER(n,e){const t=Fe(n),r=t.Uo.get(e);if(r&&r.$o)return on().add(r.key);{let o=on();const l=t.Mo.get(e);if(!l)return o;for(const d of l){const m=t.Oo.get(d);o=o.unionWith(m.view.Po)}return o}}function zP(n,e){return G0.apply(this,arguments)}function G0(){return(G0=(0,me.Z)(function*(n,e){const t=Fe(n),r=yield Vy(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&Id(t,e.targetId,o.Co),o})).apply(this,arguments)}function nv(n){return q0.apply(this,arguments)}function q0(){return(q0=(0,me.Z)(function*(n){const e=Fe(n);return qT(e.localStore).then(t=>qu(e,t))})).apply(this,arguments)}function wR(n,e,t,r){return rv.apply(this,arguments)}function rv(){return(rv=(0,me.Z)(function*(n,e,t,r){const o=Fe(n),l=yield function(d,m){const E=Fe(d),b=Fe(E.An);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.Zt(x,m).next(R=>R?E.Wn.vn(x,R):Se.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield nc(o.remoteStore):"acknowledged"===t||"rejected"===t?(H0(o,e,r||null),j0(o,e),m=e,Fe(Fe(o.localStore).An).ee(m)):Je(),yield qu(o,l)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function mm(){return(mm=(0,me.Z)(function*(n,e){const t=Fe(n);if($f(t),yD(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield W0(t,r.toArray());t.Wo=!0,yield hm(t.remoteStore,!0);for(const l of o)zy(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Mo.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(gm(t,d),qa(t.localStore,d,!0))),cm(t.remoteStore,d)}),yield o,yield W0(t,r),function(l){const d=Fe(l);d.Uo.forEach((m,E)=>{cm(d.remoteStore,E)}),d.qo.hs(),d.Uo=new Map,d.Bo=new Er(Ze.comparator)}(t),t.Wo=!1,yield hm(t.remoteStore,!1)}})).apply(this,arguments)}function W0(n,e,t){return iv.apply(this,arguments)}function iv(){return(iv=(0,me.Z)(function*(n,e,t){const r=Fe(n),o=[],l=[];for(const d of e){let m;const E=r.Mo.get(d);if(E&&0!==E.length){m=yield Rf(r.localStore,ho(E[0]));for(const b of E){const x=r.Oo.get(b),R=yield zP(r,x);R.snapshot&&l.push(R.snapshot)}}else{const b=yield GT(r.localStore,d);m=yield Rf(r.localStore,b),yield Jy(r,gD(b),d,!1)}o.push(m)}return r.Fo.Pr(l),o})).apply(this,arguments)}function gD(n){return pw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CR(n){const e=Fe(n);return Fe(Fe(e.localStore).persistence).Tn()}function mD(n,e,t,r){return z0.apply(this,arguments)}function z0(){return(z0=(0,me.Z)(function*(n,e,t,r){const o=Fe(n);if(o.Wo)Pe("SyncEngine","Ignoring unexpected query state notification.");else if(o.Mo.has(e))switch(t){case"current":case"not-current":{const l=yield qT(o.localStore),d=Sy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield qu(o,l,d);break}case"rejected":yield qa(o.localStore,e,!0),gm(o,e,r);break;default:Je()}})).apply(this,arguments)}function _D(n,e,t){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,me.Z)(function*(n,e,t){const r=$f(n);if(r.Wo){for(const o of e){if(r.Mo.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const l=yield GT(r.localStore,o),d=yield Rf(r.localStore,l);yield Jy(r,gD(l),d.targetId,!1),zy(r.remoteStore,d)}for(const o of t)r.Mo.has(o)&&(yield qa(r.localStore,o,!1).then(()=>{cm(r.remoteStore,o),gm(r,o)}).catch(go))}})).apply(this,arguments)}function $f(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ER.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.Fo.Pr=cR.bind(null,e.eventManager),e.Fo.zo=dR.bind(null,e.eventManager),e}function yD(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_R.bind(null,e),e}class an{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.k=Cd(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return xf(this.persistence,new BT,e.initialUser,this.k)}Yo(e){return new Jx(jy.ks,this.k)}Jo(e){return new wd}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Wu extends an{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield function(n){return Uy.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield yD(r.ta.syncEngine),yield nc(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return xf(this.persistence,new BT,e.initialUser,this.k)}Xo(e){return new OT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=Ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new im(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h0(),qy(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new wd}}class Gf extends Wu{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.ta.syncEngine;r.sharedClientState instanceof c0&&(r.sharedClientState.syncEngine={mi:wR.bind(null,o),gi:mD.bind(null,o),yi:_D.bind(null,o),Tn:CR.bind(null,o),_i:nv.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var l=(0,me.Z)(function*(d){yield function(n,e){return mm.apply(this,arguments)}(r.ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}Jo(e){const t=h0();if(!c0.bt(t))throw new Te(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new c0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Dd{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>hD(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Td.bind(null,r.syncEngine),yield hm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yy}createDatastore(e){const t=Cd(e.databaseInfo.databaseId),r=new nR(e.databaseInfo);return new iR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>hD(this.syncEngine,m,0),d=d0.bt()?new d0:new eR,new g0(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,m,E,b){const x=new dD(r,o,l,d,m,E);return b&&(x.Wo=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Fe(t);Pe("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield Mf(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bR(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ht{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mo{constructor(e,t){this.sa=e,this.k=t,this.metadata=new yr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,me.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),o=Number(r);isNaN(o)&&e.aa(`length string (${r}) is not valid number`);const l=yield e.ca(o);return new P0(JSON.parse(l),t.length+o)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,me.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,me.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Z0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(l,d){const m=Fe(l),E=wf(m.k)+"/documents",b={documents:d.map(q=>Xg(m.k,q))},x=yield m.ji("BatchGetDocuments",E,b),R=new Map;x.forEach(q=>{const ee=function(n,e){return"found"in e?function(t,r){ot(!!r.found);const o=fo(t,r.found.name),l=kr(r.found.updateTime),d=new sr({mapValue:{fields:r.found.fields}});return Wt.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){ot(!!r.missing),ot(!!r.readTime);const o=fo(t,r.missing),l=kr(r.readTime);return Wt.newNoDocument(o,l)}(n,e):Je()}(m.k,q);R.set(ee.key.toString(),ee)});const F=[];return d.forEach(q=>{const ee=R.get(q.toString());ot(!!ee),F.push(ee)}),F}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Ze.fromPath(o);e.mutations.push(new Cw(l,e.precondition(l)))}),yield(r=(0,me.Z)(function*(o,l){const d=Fe(o),m=wf(d.k)+"/documents",E={writes:l.map(b=>tm(d.k,b))};yield d.Bi("Commit",m,E)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Te(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ad{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.la=5,this.ur=new f0(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,me.Z)(function*(){const t=new Z0(e.datastore),r=e.da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.wa(l)}))}).catch(o=>{e.wa(o)})}))}da(e){try{const t=this.updateFunction(e);return!lf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bw(t)}return!1}}class ZP{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Zr.UNAUTHENTICATED,this.clientId=py.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=fm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function K0(n,e){return sv.apply(this,arguments)}function sv(){return(sv=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(l){r.isEqual(l)||(yield jT(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function IR(n,e){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Q0(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(l=(0,me.Z)(function*(d,m){const E=Fe(d);E.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const b=Gu(E);E.Gr.add(3),yield Mf(E),b&&E.Jr.set("Unknown"),yield E.remoteSyncer.handleCredentialChange(m),E.Gr.delete(3),yield lm(E)}),function(d,m){return l.apply(this,arguments)})(e.remoteStore,o);var l}),n.onlineComponents=e})).apply(this,arguments)}function Q0(n){return fs.apply(this,arguments)}function fs(){return(fs=(0,me.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield K0(n,new an)),n.offlineComponents})).apply(this,arguments)}function bn(n){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,me.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield IR(n,new Dd)),n.onlineComponents})).apply(this,arguments)}function J0(n){return Q0(n).then(e=>e.persistence)}function X0(n){return Q0(n).then(e=>e.localStore)}function eC(n){return bn(n).then(e=>e.remoteStore)}function ym(n){return bn(n).then(e=>e.syncEngine)}function Xo(n){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,me.Z)(function*(n){const e=yield bn(n),t=e.eventManager;return t.onListen=pR.bind(null,e.syncEngine),t.onUnlisten=gR.bind(null,e.syncEngine),t})).apply(this,arguments)}function tC(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,l,d,m,E){const b=new ht({next:R=>{l.enqueueAndForget(()=>sD(o,x));const F=R.docs.has(d);!F&&R.fromCache?E.reject(new Te(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&R.fromCache&&m&&"server"===m.source?E.reject(new Te(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new Qy(hd(d.path),b,{includeMetadataChanges:!0,wo:!0});return R0(o,x)}(yield Xo(n),n.asyncQueue,e,t,r)})),r.promise}function qf(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,l,d,m,E){const b=new ht({next:R=>{l.enqueueAndForget(()=>sD(o,x)),R.fromCache&&"server"===m.source?E.reject(new Te(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new Qy(d,b,{includeMetadataChanges:!0,wo:!0});return R0(o,x)}(yield Xo(n),n.asyncQueue,e,t,r)})),r.promise}class ov{constructor(e,t,r,o,l,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Rd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rd&&e.projectId===this.projectId&&e.database===this.database}}const iC=new Map;function av(n,e,t){if(!t)throw new Te(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vm(n,e,t,r){if(!0===e&&!0===r)throw new Te(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ED(n){if(!Ze.isDocumentKey(n))throw new Te(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uv(n){if(Ze.isDocumentKey(n))throw new Te(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(n);throw new Te(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function SR(n,e){if(e<=0)throw new Te(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ft{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ft({}),this._settingsFrozen=!1,e instanceof Rd?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rd(o.options.projectId)}(e))}get app(){if(!this._app)throw new Te(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ft(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kP;switch(t.type){case"gapi":const r=t.client;return ot(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new qI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Te(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iC.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),iC.delete(e),t.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class Wa extends Di{constructor(e,t,r){super(e,t,hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Ze(e))}withConverter(e){return new Wa(this.firestore,e,this._path)}}function xR(n,e,...t){if(n=(0,k.m9)(n),av("collection","path",e),n instanceof lv){const r=ln.fromString(e,...t);return uv(r),new Wa(n,null,r)}{if(!(n instanceof Sn||n instanceof Wa))throw new Te(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return uv(r),new Wa(n.firestore,null,r)}}function cv(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=py.A()),av("doc","path",e),n instanceof lv){const r=ln.fromString(e,...t);return ED(r),new Sn(n,null,new Ze(r))}{if(!(n instanceof Sn||n instanceof Wa))throw new Te(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return ED(r),new Sn(n.firestore,n instanceof Wa?n.converter:null,new Ze(r))}}function di(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Sn||n instanceof Wa)&&(e instanceof Sn||e instanceof Wa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wD(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Di&&e instanceof Di&&n.firestore===e.firestore&&gf(n._query,e._query)&&n.converter===e.converter}class RR{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new f0(this,"async_queue_retry"),this.Ra=()=>{const t=qy();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=qy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=qy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new yr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,me.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!Bu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,_r("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const o=x0.createAndSchedule(this,e,t,r,l=>this.Va(l));return this.pa.push(o),o}Pa(){this.Ta&&Je()}verifyOperationInProgress(){}Sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function wm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class NR{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends lv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new RR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dv(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||dv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dv(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ov(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new ZP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function sC(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield K0(n,t),yield IR(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function CD(n){if(n._initialized||n._terminated)throw new Te(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(ui.fromBase64String(e))}catch(t){throw new Te(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new za(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nd{constructor(e){this._methodName=e}}class Cm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const bm=/^__.*__$/;class ek{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new qg(e,this.data,t,this.fieldTransforms)}}class aC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class fv{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.Ma(e),o}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.ka(),o}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Zu(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(bD(this.xa)&&bm.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class UR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||Cd(e)}ja(e,t,r,o=!1){return new fv({xa:e,methodName:t,Ka:r,path:ai.emptyPath(),Oa:!1,qa:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Md(n){const e=n._freezeSettings(),t=Cd(n._databaseId);return new UR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pv(n,e,t,r,o,l={}){const d=n.ja(l.merge||l.mergeFields?2:0,e,t,o);cC("Data must be an object, but it was:",d,r);const m=DD(r,d);let E,b;if(l.merge)E=new uf(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const R of l.mergeFields){const F=gv(e,R,t);if(!d.contains(F))throw new Te(pe.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);hi(x,F)||x.push(F)}E=new uf(x),b=d.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,b=d.fieldTransforms;return new ek(new sr(m),E,b)}class Zf extends Nd{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zf}}function ID(n,e,t){return new fv({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class uC extends Nd{_toFieldTransform(e){return new $g(e.path,new Hg)}isEqual(e){return e instanceof uC}}class tk extends Nd{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=ID(this,e,!0),r=this.Qa.map(l=>Pd(l,t)),o=new mf(r);return new $g(e.path,o)}isEqual(e){return this===e}}class nk extends Nd{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=ID(this,e,!0),r=this.Qa.map(l=>Pd(l,t)),o=new _f(r);return new $g(e.path,o)}isEqual(e){return this===e}}class rk extends Nd{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new yf(e.k,iT(e.k,this.Wa));return new $g(e.path,t)}isEqual(e){return this===e}}function Im(n,e,t,r){const o=n.ja(1,e,t);cC("Data must be an object, but it was:",o,r);const l=[],d=sr.empty();ad(r,(E,b)=>{const x=hC(e,E,t);b=(0,k.m9)(b);const R=o.La(x);if(b instanceof Zf)l.push(x);else{const F=Pd(b,R);null!=F&&(l.push(x),d.set(x,F))}});const m=new uf(l);return new aC(d,m,o.fieldTransforms)}function lC(n,e,t,r,o,l){const d=n.ja(1,e,t),m=[gv(e,r,t)],E=[o];if(l.length%2!=0)throw new Te(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<l.length;F+=2)m.push(gv(e,l[F])),E.push(l[F+1]);const b=[],x=sr.empty();for(let F=m.length-1;F>=0;--F)if(!hi(b,m[F])){const q=m[F];let ee=E[F];ee=(0,k.m9)(ee);const Ae=d.La(q);if(ee instanceof Zf)b.push(q);else{const ke=Pd(ee,Ae);null!=ke&&(b.push(q),x.set(q,ke))}}const R=new uf(b);return new aC(x,R,d.fieldTransforms)}function TD(n,e,t,r=!1){return Pd(t,n.ja(r?4:3,e))}function Pd(n,e){if(AD(n=(0,k.m9)(n)))return cC("Unsupported field value:",e,n),DD(n,e);if(n instanceof Nd)return function(t,r){if(!bD(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let m=Pd(d,r.Ba(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iT(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Nr.fromDate(t);return{timestampValue:Ef(r.k,o)}}if(t instanceof Nr){const o=new Nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ef(r.k,o)}}if(t instanceof Cm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof za)return{bytesValue:Mw(r.k,t._byteString)};if(t instanceof Sn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${zf(t)}`)}(n,e)}function DD(n,e){const t={};return ZI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ad(n,(r,o)=>{const l=Pd(o,e.Fa(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function AD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nr||n instanceof Cm||n instanceof za||n instanceof Sn||n instanceof Nd)}function cC(n,e,t){if(!AD(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zf(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function gv(n,e,t){if((e=(0,k.m9)(e))instanceof zu)return e._internalPath;if("string"==typeof e)return hC(n,e);throw Zu("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const dC=new RegExp("[~\\*/\\[\\]]");function hC(n,e,t){if(e.search(dC)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zu(...e.split("."))._internalPath}catch(r){throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zu(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(l||d)&&(E+=" (found",l&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Te(pe.INVALID_ARGUMENT,m+n+E)}function hi(n,e){return n.some(t=>t.isEqual(e))}class Kf{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ea(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ea extends Kf{data(){return super.data()}}function Yf(n,e){return"string"==typeof e?hC(n,e):e instanceof zu?e._internalPath:e._delegate._internalPath}class kd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Za extends Kf{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qf extends Za{data(e={}){return super.data(e)}}class Ku{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new kd(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qf(this._firestore,this._userDataWriter,r.key,r,new kd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Qf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Qf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new kd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==d.type&&(E=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:BR(d.type),doc:m,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function SD(n,e){return n instanceof Za&&e instanceof Za?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ku&&e instanceof Ku&&n._firestore===e._firestore&&wD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xD(n){if(Bg(n)&&0===n.explicitOrderBy.length)throw new Te(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jf{}function rc(n,...e){for(const t of e)n=t._apply(n);return n}class ik extends Jf{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=Md(e.firestore),r=function(o,l,d,m,E,b,x){let R;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on FieldPath.documentId().`);if("in"===b||"not-in"===b){kD(x,b);const q=[];for(const ee of x)q.push(PD(m,o,ee));R={arrayValue:{values:q}}}else R=PD(m,o,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||kD(x,b),R=TD(d,"where",x,"in"===b||"not-in"===b);const F=cn.create(E,b,R);return function(q,ee){if(ee.V()){const ke=Cy(q);if(null!==ke&&!ke.isEqual(ee.field))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${ee.field.toString()}'`);const St=wy(q);null!==St&&OD(0,ee.field,St)}const Ae=function(ke,St){for(const Et of ke.filters)if(St.indexOf(Et.op)>=0)return Et.op;return null}(q,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Ae)throw new Te(pe.INVALID_ARGUMENT,Ae===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Ae.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Di(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new $a(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class HR extends Jf{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ho(o,l);return function(m,E){if(null===wy(m)){const b=Cy(m);null!==b&&OD(0,b,E.field)}}(r,d),d}(e._query,this.Ga,this.Ja);return new Di(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new $a(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $R extends Jf{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new Di(e.firestore,e.converter,eT(e._query,this.Ya,this.Xa))}}class qR extends Jf{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=MD(e,this.type,this.Za,this.tc);return new Di(e.firestore,e.converter,(o=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class mv extends Jf{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=MD(e,this.type,this.Za,this.tc);return new Di(e.firestore,e.converter,(o=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MD(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Kf)return function(o,l,d,m,E){if(!m)throw new Te(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const x of fd(o))if(x.field.isKeyField())b.push(yy(l,m.key));else{const R=m.data.field(x.field);if(YI(R))throw new Te(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const F=x.field.canonicalString();throw new Te(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(R)}return new Ha(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Md(n.firestore);return function(l,d,m,E,b,x){const R=l.explicitOrderBy;if(b.length>R.length)throw new Te(pe.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let q=0;q<b.length;q++){const ee=b[q];if(R[q].field.isKeyField()){if("string"!=typeof ee)throw new Te(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ee}`);if(!gw(l)&&-1!==ee.indexOf("/"))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${E}() must be a plain document ID, but '${ee}' contains a slash.`);const Ae=l.path.child(ln.fromString(ee));if(!Ze.isDocumentKey(Ae))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${E}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const ke=new Ze(Ae);F.push(yy(d,ke))}else{const Ae=TD(m,E,ee);F.push(Ae)}}return new Ha(F,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function PD(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Te(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&-1!==t.indexOf("/"))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!Ze.isDocumentKey(r))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yy(n,new Ze(r))}if(t instanceof Sn)return yy(n,t._key);throw new Te(pe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function kD(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function OD(n,e,t){if(!t.isEqual(e))throw new Te(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fC{convertValue(e,t="none"){switch(Yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ud(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return ad(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Cm(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lo(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gy(e));default:return null}}convertTimestamp(e){const t=Kl(e);return new Nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);ot(jw(r));const o=new Rd(r.get(1),r.get(3)),l=new Ze(r.popFirst(5));return o.isEqual(t)||_r(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function _v(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class KR extends fC{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}class FD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Md(e)}set(e,t,r){this._verifyNotCommitted();const o=_o(e,this._firestore),l=_v(o.converter,t,r),d=pv(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Mr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=_o(e,this._firestore);let d;return d="string"==typeof(t=(0,k.m9)(t))||t instanceof zu?lC(this._dataReader,"WriteBatch.update",l._key,t,r,o):Im(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_o(e,this._firestore);return this._mutations=this._mutations.concat(new zg(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _o(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Te(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ic extends fC{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function jD(n,e,t){n=Qt(n,Sn);const r=Qt(n.firestore,Wn),o=_v(n.converter,e,t);return Ka(r,[pv(Md(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Mr.none())])}function HD(n,e,t,...r){n=Qt(n,Sn);const o=Qt(n.firestore,Wn),l=Md(o);let d;return d="string"==typeof(e=(0,k.m9)(e))||e instanceof zu?lC(l,"updateDoc",n._key,e,t,r):Im(l,"updateDoc",n._key,e),Ka(o,[d.toMutation(n._key,Mr.exists(!0))])}function $D(n,...e){var t,r,o;n=(0,k.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||wm(e[d])||(l=e[d],d++);const m={includeMetadataChanges:l.includeMetadataChanges};if(wm(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,b,x;if(n instanceof Sn)b=Qt(n.firestore,Wn),x=hd(n._key.path),E={next:R=>{e[d]&&e[d](pC(b,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Qt(n,Di);b=Qt(R.firestore,Wn),x=R._query;const F=new ic(b);E={next:q=>{e[d]&&e[d](new Ku(b,F,R,q))},error:e[d+1],complete:e[d+2]},xD(n._query)}return function(R,F,q,ee){const Ae=new ht(ee),ke=new Qy(F,Ae,q);return R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return R0(yield Xo(R),ke)})),()=>{Ae.na(),R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return sD(yield Xo(R),ke)}))}}(Fr(b),x,m,E)}function Ka(n,e){return function(t,r){const o=new yr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e,t){return Uf.apply(this,arguments)}(yield ym(t),r,o)})),o.promise}(Fr(n),e)}function pC(n,e,t){const r=t.docs.get(e._key),o=new ic(n);return new Za(n,o,e._key,r,new kd(t.hasPendingWrites,t.fromCache),e.converter)}class gC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Md(e)}get(e){const t=_o(e,this._firestore),r=new KR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Je();const l=o[0];if(l.isFoundDocument())return new Kf(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Kf(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const o=_o(e,this._firestore),l=_v(o.converter,t,r),d=pv(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=_o(e,this._firestore);let d;return d="string"==typeof(t=(0,k.m9)(t))||t instanceof zu?lC(this._dataReader,"Transaction.update",l._key,t,r,o):Im(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=_o(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_o(e,this._firestore),r=new ic(this._firestore);return super.get(e).then(o=>new Za(this._firestore,r,t._key,o._document,new kd(!1,!1),t.converter))}}function Dm(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vv(){if("undefined"==typeof Uint8Array)throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function WD(){if("undefined"==typeof atob)throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){of=wi.SDK_VERSION,(0,wi._registerComponent)(new ao.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Wn(o,new Rx(t.getProvider("auth-internal")),new WI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,wi.registerVersion)(sd,"3.4.1",n),(0,wi.registerVersion)(sd,"3.4.1","esm2017")}();class Am{constructor(e){this._delegate=e}static fromBase64String(e){return WD(),new Am(za.fromBase64String(e))}static fromUint8Array(e){return vv(),new Am(za.fromUint8Array(e))}toBase64(){return WD(),this._delegate.toBase64()}toUint8Array(){return vv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _C(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class zD{enableIndexedDbPersistence(e,t){return function(n,e){CD(n=Qt(n,Wn));const t=Fr(n),r=n._freezeSettings(),o=new Dd;return sC(t,o,new Wu(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){CD(n=Qt(n,Wn));const e=Fr(n),t=n._freezeSettings(),r=new Dd;return sC(e,r,new Gf(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Te(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Yo.bt())return Promise.resolve();const o=r+"main";yield Yo.delete(o)}),function(r){return t.apply(this,arguments)})(Ly(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ev{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Rd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const l=(n=Qt(n,lv))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&kg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Zr.MOCK_USER;else{d=(0,k.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Te(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zr(E)}n._authCredentials=new xx(new fy(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield J0(n),t=yield eC(n);return e.setNetworkEnabled(!0),function(r){const o=Fe(r);return o.Gr.delete(0),lm(o)}(t)}))}(Fr(n=Qt(n,Wn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield J0(n),t=yield eC(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const l=Fe(o);l.Gr.add(0),yield Mf(l),l.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Qt(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vm("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e){return B0.apply(this,arguments)}(yield ym(e),t)})),t.promise}(Fr(n=Qt(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new ht(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Xo(n),o=t,Fe(r).io.add(o),void o.next();var r,o})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Xo(n),o=t,void Fe(r).io.delete(o);var r,o}))}}(Fr(n=Qt(n,Wn)),wm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tp(this,xR(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ls(this,cv(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gn(this,function(n,e){if(n=Qt(n,lv),av("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Di(n,null,(t=e,new $a(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(o=n,bn(o).then(l=>l.datastore));var o;new Ad(n.asyncQueue,r,e,t).run()})),t.promise}(Fr(n=Qt(n,Wn)),t=>e(new gC(n,t)))}(this._delegate,t=>e(new yC(this,t)))}batch(){return Fr(this._delegate),new vC(new FD(this._delegate,e=>Ka(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Fr(n=Qt(n,Wn)),r=new NR;return function(n,e,t,r){const o=function(l,d){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,E=function(E,b){if(E instanceof Uint8Array)return bR(E,b);if(E instanceof ArrayBuffer)return bR(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new mo(E,d);var E}(t,Cd(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function(n,e,t){const r=Fe(n);var o;(o=(0,me.Z)(function*(l,d,m){try{const E=yield d.getMetadata();if(yield function(F,q){const ee=Fe(F),Ae=kr(q.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",ke=>ee.Ye.getBundleMetadata(ke,q.id)).then(ke=>!!ke&&ke.createTime.compareTo(Ae)>=0)}(l.localStore,E))return yield d.close(),void m._completeWith((F=E,{taskState:"Success",documentsLoaded:F.totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}));m._updateProgress(fR(E));const b=new hR(E,l.localStore,d.k);let x=yield d.Ho();for(;x;){const F=yield b.yo(x);F&&m._updateProgress(F),x=yield d.Ho()}const R=yield b.complete();yield qu(l,R.In,void 0),yield function(F,q){const ee=Fe(F);return ee.persistence.runTransaction("Save bundle","readwrite",Ae=>ee.Ye.saveBundleMetadata(Ae,q))}(l.localStore,E),m._completeWith(R.progress)}catch(E){kg("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E)}var F}),function(l,d,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield ym(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Fe(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Ye.getNamedQuery(l,r))}(yield X0(n),e)}))}(Fr(n=Qt(n,Wn)),e).then(t=>t?new Di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gn(this,t):null)}}class Sm extends fC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Am(new za(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ls.forKey(t,this.firestore,null)}}class yC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Sm(e)}get(e){const t=np(e);return this._delegate.get(t).then(r=>new xm(this._firestore,new Za(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=np(e);return r?(Dm("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=np(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=np(e);return this._delegate.delete(t),this}}class vC{constructor(e){this._delegate=e}set(e,t,r){const o=np(e);return r?(Dm("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=np(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=np(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Od{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Qf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Od.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Od(e,new Sm(e),t),o.set(t,l)),l}}Od.INSTANCES=new WeakMap;class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sm(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ls(t,new Sn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Ls(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tp(this.firestore,xR(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Sn&&di(this._delegate,e)}set(e,t){t=Dm("DocumentReference.set",t);try{return t?jD(this._delegate,e,t):jD(this._delegate,e)}catch(r){throw Ai(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HD(this._delegate,e):HD(this._delegate,e,t,...r)}catch(o){throw Ai(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Ka(Qt(n.firestore,Wn),[new zg(n._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const t=ZD(e),r=EC(e,o=>new xm(this.firestore,new Za(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return $D(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,Sn);const e=Qt(n.firestore,Wn),t=Fr(e),r=new ic(e);return function(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,l,d){try{const m=yield function(E,b){const x=Fe(E);return x.persistence.runTransaction("read document","readonly",R=>x.Wn.Rn(R,b))}(o,l);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Te(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=fm(m,`Failed to get document '${l} from cache`);d.reject(E)}}),function(o,l,d){return r.apply(this,arguments)})(yield X0(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Za(e,r,n._key,o,new kd(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,Sn);const e=Qt(n.firestore,Wn);return tC(Fr(e),n._key,{source:"server"}).then(t=>pC(e,n,t))}(this._delegate):function(n){n=Qt(n,Sn);const e=Qt(n.firestore,Wn);return tC(Fr(e),n._key).then(t=>pC(e,n,t))}(this._delegate),t.then(r=>new xm(this.firestore,new Za(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function Ai(n,e,t){return n.message=n.message.replace(e,t),n}function ZD(n){for(const e of n)if("object"==typeof e&&!_C(e))return e;return{}}function EC(n,e){var t,r;let o;return o=_C(n[0])?n[0]:_C(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class xm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ls(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SD(this._delegate,e._delegate)}}class wv extends xm{data(e){const t=this._delegate.data(e);return function(n,e){n||Je()}(void 0!==t),t}}class gn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sm(e)}where(e,t,r){try{return new gn(this.firestore,rc(this._delegate,function(n,e,t){const r=e,o=Yf("where",n);return new ik(o,r,t)}(e,t,r)))}catch(o){throw Ai(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gn(this.firestore,rc(this._delegate,function(n,e="asc"){const t=e,r=Yf("orderBy",n);return new HR(r,t)}(e,t)))}catch(r){throw Ai(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gn(this.firestore,rc(this._delegate,function(n){return SR("limit",n),new $R("limit",n,"F")}(e)))}catch(t){throw Ai(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gn(this.firestore,rc(this._delegate,function(n){return SR("limitToLast",n),new $R("limitToLast",n,"L")}(e)))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gn(this.firestore,rc(this._delegate,function(...n){return new qR("startAt",n,!0)}(...e)))}catch(t){throw Ai(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gn(this.firestore,rc(this._delegate,function(...n){return new qR("startAfter",n,!1)}(...e)))}catch(t){throw Ai(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gn(this.firestore,rc(this._delegate,function(...n){return new mv("endBefore",n,!0)}(...e)))}catch(t){throw Ai(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gn(this.firestore,rc(this._delegate,function(...n){return new mv("endAt",n,!1)}(...e)))}catch(t){throw Ai(t,"endAt()","Query.endAt()")}}isEqual(e){return wD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,Di);const e=Qt(n.firestore,Wn),t=Fr(e),r=new ic(e);return function(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,l,d){try{const m=yield Vy(o,l,!0),E=new uD(l,m.zn),b=E.bo(m.documents),x=E.applyChanges(b,!1);d.resolve(x.snapshot)}catch(m){const E=fm(m,`Failed to execute query '${l} against cache`);d.reject(E)}}),function(o,l,d){return r.apply(this,arguments)})(yield X0(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ku(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,Di);const e=Qt(n.firestore,Wn),t=Fr(e),r=new ic(e);return qf(t,n._query,{source:"server"}).then(o=>new Ku(e,r,n,o))}(this._delegate):function(n){n=Qt(n,Di);const e=Qt(n.firestore,Wn),t=Fr(e),r=new ic(e);return xD(n._query),qf(t,n._query).then(o=>new Ku(e,r,n,o))}(this._delegate),t.then(r=>new wC(this.firestore,new Ku(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZD(e),r=EC(e,o=>new wC(this.firestore,new Ku(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return $D(this._delegate,t,r)}withConverter(e){return new gn(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}class ep{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ep(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wv(this._firestore,r))})}isEqual(e){return SD(this._delegate,e._delegate)}}class tp extends gn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ls(this.firestore,e):null}doc(e){try{return new Ls(this.firestore,void 0===e?cv(this._delegate):cv(this._delegate,e))}catch(t){throw Ai(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Qt(n.firestore,Wn),r=cv(n),o=_v(n.converter,e);return Ka(t,[pv(Md(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ls(this.firestore,t))}isEqual(e){return di(this._delegate,e._delegate)}withConverter(e){return new tp(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function np(n){return Qt(n,Sn)}class Fd{constructor(...e){this._delegate=new zu(...e)}static documentId(){return new Fd(ai.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof zu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ld{constructor(e){this._delegate=e}static serverTimestamp(){const e=new uC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ld(e)}static delete(){const e=new Zf("deleteField");return e._methodName="FieldValue.delete",new Ld(e)}static arrayUnion(...e){const t=function(...n){return new tk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ld(t)}static arrayRemove(...e){const t=function(...n){return new nk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ld(t)}static increment(e){const t=function(n){return new rk("increment",n)}(e);return t._methodName="FieldValue.increment",new Ld(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const CC={Firestore:Ev,GeoPoint:Cm,Timestamp:Nr,Blob:Am,Transaction:yC,WriteBatch:vC,DocumentReference:Ls,DocumentSnapshot:xm,Query:gn,QueryDocumentSnapshot:wv,QuerySnapshot:wC,CollectionReference:tp,FieldPath:Fd,FieldValue:Ld,setLogLevel:function(n){!function(n){zl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new ao.wA("firestore-compat",t=>((e,t)=>new Ev(e,t,new zD))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},CC)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.10")}(Ph.Z);var sc=U(9765),bC=U(6682),Vd=U(309),Ud=U(5345);function Kr(n,e){return"function"==typeof e?t=>t.pipe(Kr((r,o)=>(0,fn.D)(n(r,o)).pipe((0,st.U)((l,d)=>e(r,l,o,d))))):t=>t.lift(new Cv(n))}class Cv{constructor(e){this.project=e}call(e,t){return t.subscribe(new IC(e,this.project))}}class IC extends Ud.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Ud.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Ud.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var ok=U(7771),TC=U(5319),YD=U(7971),QD=U(8858);class bv extends sc.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new JD(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,l=r.length;let d;if(this.closed)throw new YD.N;if(this.isStopped||this.hasError?d=TC.w.EMPTY:(this.observers.push(e),d=new QD.W(this,e)),o&&e.add(e=new Vd.ht(e,o)),t)for(let m=0;m<l&&!e.closed;m++)e.next(r[m]);else for(let m=0;m<l&&!e.closed;m++)e.next(r[m].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||ok.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,l=o.length;let d=0;for(;d<l&&!(e-o[d].time<r);)d++;return l>t&&(d=Math.max(d,l-t)),d>0&&o.splice(0,d),o}}class JD{constructor(e,t){this.time=e,this.value=t}}function XD(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,d,l=0,m=!1,E=!1;return function(x){let R;l++,!o||m?(m=!1,o=new bv(n,e,r),R=o.subscribe(this),d=x.subscribe({next(F){o.next(F)},error(F){m=!0,o.error(F)},complete(){E=!0,d=void 0,o.complete()}}),E&&(d=void 0)):R=o.subscribe(this),this.add(()=>{l--,R.unsubscribe(),R=void 0,d&&!E&&t&&0===l&&(d.unsubscribe(),d=void 0,o=void 0)})}}(r))}const Iv=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),AC=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var Yu=U(9193);function Tv(n){return e=>0===n?(0,Yu.c)():e.lift(new oN(n))}class oN{constructor(e){if(this.total=e,this.total<0)throw new AC}call(e,t){return t.subscribe(new tA(e,this.total))}}class tA extends Gi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function SC(n=null){return e=>e.lift(new aN(n))}class aN{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new uN(e,this.defaultValue))}}class uN extends Gi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function xC(n=rA){return e=>e.lift(new lN(n))}class lN{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new nA(e,this.errorFactory))}}class nA extends Gi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function rA(){return new Iv}var RC=U(4487);function oc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((o,l)=>n(o,l,r)):RC.y,Tv(1),t?SC(e):xC(()=>new Iv))}function iA(n,e){return e?Kr(()=>n,e):Kr(()=>n)}var NC=U(3101);U(2329);const cN=new Map,dN={activated:!1,tokenObservers:[]},hN={initialized:!1,enabled:!1};function Yr(n){return cN.get(n)||dN}function Qa(n,e){cN.set(n,e)}function MC(){return hN}class fk{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Av(n){if(!Yr(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function PC(n,e){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,l)}catch(R){throw ps.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw ps.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw ps.create("fetch-parse-error",{originalErrorMessage:R.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(E[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+b,issuedAtTimeMillis:x}})).apply(this,arguments)}function cA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const ac="firebase-app-check-store";let OC=null;function yN(){return OC||(OC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ps.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(ac,{keyPath:"compositeKey"})}}}catch(t){e(ps.create("storage-open",{originalErrorMessage:t.message}))}}),OC)}function fA(){return(fA=(0,me.Z)(function*(n,e){const r=(yield yN()).transaction(ac,"readwrite"),l=r.objectStore(ac).put({compositeKey:n,value:e});return new Promise((d,m)=>{l.onsuccess=E=>{d()},r.onerror=E=>{var b;m(ps.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Nv=new qi.Yd("@firebase/app-check");function wN(n,e){return(0,k.hl)()?function(n,e){return function(n,e){return fA.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Nv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CN(){return MC().enabled}function bN(){return VC.apply(this,arguments)}function VC(){return(VC=(0,me.Z)(function*(){const n=MC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const IN={error:"UNKNOWN_ERROR"};function TN(n){return k.US.encodeString(JSON.stringify(n),!1)}function Mv(n){return km.apply(this,arguments)}function km(){return(km=(0,me.Z)(function*(n,e=!1){const t=n.app;Av(t);const r=Yr(t);let l,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&Pv(E)&&(o=E)}if(!e&&o&&Pv(o))return{token:o.token};let m,d=!1;if(CN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PC(cA(t,yield bN()),n.platformLoggerProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const E=yield r.exchangeTokenPromise;return yield wN(t,E),Qa(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Nv.warn(E.message):Nv.error(E),l=E}return o?(m={token:o.token},Qa(t,Object.assign(Object.assign({},r),{token:o})),yield wN(t,o)):m=jC(l),d&&_A(t,m),m})).apply(this,arguments)}function Ji(n,e){const t=Yr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Qa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function mA(n){const{app:e}=n,t=Yr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new fk((0,me.Z)(function*(){let r;if(r=Yr(e).token?yield Mv(n,!0):yield Mv(n),r.error)throw r.error}),()=>!0,()=>{const t=Yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Qa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _A(n,e){const t=Yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Pv(n){return n.expireTimeMillis-Date.now()>0}function jC(n){return{token:TN(IN),error:n}}class yA{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Yr(this.app);for(const t of e)Ji(this.app,t.next);return Promise.resolve()}}const $C="app-check-internal";(0,wi._registerComponent)(new ao.wA("app-check",n=>function(n,e){return new yA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($C).initialize()})),(0,wi._registerComponent)(new ao.wA($C,n=>function(n){return{getToken:e=>Mv(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,l=Yr(o),d={next:t,error:r,type:e};if(Qa(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&Pv(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),mA(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>mA(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ji(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wi.registerVersion)("@firebase/app-check","0.5.2");class Fm{constructor(){return(0,pn.vb)("app-check")}}"undefined"!=typeof window&&window;var LN=U(7841);const qC=new f.OlP("angularfire2.auth.use-emulator"),Vm=new f.OlP("angularfire2.auth.settings"),wr=new f.OlP("angularfire2.auth.tenant-id"),NA=new f.OlP("angularfire2.auth.langugage-code"),Lv=new f.OlP("angularfire2.auth.use-device-language"),Vv=new f.OlP("angularfire.auth.persistence"),WC=(n,e,t,r,o,l,d,m)=>(0,si.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,l&&E.useDeviceLanguage(),d)for(const[b,x]of Object.entries(d))E.settings[b]=x;return m&&E.setPersistence(m),E},[t,r,o,l,d,m]);let ip=(()=>{class n{constructor(t,r,o,l,d,m,E,b,x,R,F,q){const ee=new sc.xQ,Ae=(0,rt.of)(void 0).pipe((0,Vd.QV)(d.outsideAngular),Kr(()=>l.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,2755)))),(0,st.U)(()=>(0,si.on)(t,l,r)),(0,st.U)(ke=>WC(ke,l,m,b,x,R,E,F)),XD({bufferSize:1,refCount:!1}));if(fl(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,rt.of)(null);else{Ae.pipe(oc()).subscribe();const St=Ae.pipe(Kr(Lt=>Lt.getRedirectResult().then(ur=>ur,()=>null)),pn.iC,XD({bufferSize:1,refCount:!1})),Et=Ae.pipe(Kr(Lt=>new _n.y(ur=>({unsubscribe:l.runOutsideAngular(()=>Lt.onAuthStateChanged(al=>ur.next(al),al=>ur.error(al),()=>ur.complete()))})))),dn=Ae.pipe(Kr(Lt=>new _n.y(ur=>({unsubscribe:l.runOutsideAngular(()=>Lt.onIdTokenChanged(al=>ur.next(al),al=>ur.error(al),()=>ur.complete()))}))));this.authState=St.pipe(iA(Et),(0,NC.R)(d.outsideAngular),(0,Vd.QV)(d.insideAngular)),this.user=St.pipe(iA(dn),(0,NC.R)(d.outsideAngular),(0,Vd.QV)(d.insideAngular)),this.idToken=this.user.pipe(Kr(Lt=>Lt?(0,fn.D)(Lt.getIdToken()):(0,rt.of)(null))),this.idTokenResult=this.user.pipe(Kr(Lt=>Lt?(0,fn.D)(Lt.getIdTokenResult()):(0,rt.of)(null))),this.credential=(0,bC.T)(St,ee,this.authState.pipe(Uo(Lt=>!Lt))).pipe((0,st.U)(Lt=>(null==Lt?void 0:Lt.user)?Lt:null),(0,NC.R)(d.outsideAngular),(0,Vd.QV)(d.insideAngular))}return(0,si.pX)(this,Ae,l,{spy:{apply:(ke,St,Et)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&Et.then(dn=>ee.next(dn))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(si.Dh),f.LFG(si.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(pn.HU),f.LFG(qC,8),f.LFG(Vm,8),f.LFG(wr,8),f.LFG(NA,8),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function zC(n,e){return function(n,e=F_.z){return new _n.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Uv(n,e){return zC(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function sp(n,e){return Uv(n,e).pipe(Bl(void 0),qc(),(0,st.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(x=>x.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),l}))}function Bv(n,e,t){return sp(n,t).pipe(Vo((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return op(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return op(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return op(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),og(),(0,st.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function op(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function jv(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZC{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Bl(void 0),qc(),Uo(([r,o])=>o.length>0||!r),(0,st.U)(([r,o])=>o),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=jv(e);return Bv(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return Uv(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new Lr(this.ref.doc(e),this.afs)}}class Lr{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=kA(r,t);return new ZC(o,l,this.afs)}snapshotChanges(){return function(n,e){return zC(n,e).pipe(Bl(void 0),qc(),(0,st.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(pn.iC)}}class kk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Uo(t=>t.length>0),pn.iC):sp(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=jv(e);return Bv(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return Uv(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),pn.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(pn.iC)}}const MA=new f.OlP("angularfire2.enableFirestorePersistence"),PA=new f.OlP("angularfire2.firestore.persistenceSettings"),Ok=new f.OlP("angularfire2.firestore.settings"),Hv=new f.OlP("angularfire2.firestore.use-emulator");function kA(n,e=(t=>t)){return{query:e(n),ref:n}}let jN=(()=>{class n{constructor(t,r,o,l,d,m,E,b,x,R,F,q,ee,Ae,ke,St,Et){this.schedulers=E;const dn=(0,si.on)(t,m,r),Lt=x;R&&WC(dn,m,F,ee,Ae,ke,q,St),[this.firestore,this.persistenceEnabled$]=(0,si.cc)(`${dn.name}.firestore`,"AngularFirestore",dn.name,()=>{const ur=m.runOutsideAngular(()=>dn.firestore());if(l&&ur.settings(l),Lt&&ur.useEmulator(...Lt),o&&!fl(d)){const al=()=>{try{return(0,fn.D)(ur.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(sx){return"undefined"!=typeof console&&console.warn(sx),(0,rt.of)(!1)}};return[ur,m.runOutsideAngular(al)]}return[ur,(0,rt.of)(!1)]},[l,Lt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=kA(o,r),m=this.schedulers.ngZone.run(()=>l);return new ZC(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new kk(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Lr(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(si.Dh),f.LFG(si.xv,8),f.LFG(MA,8),f.LFG(Ok,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(pn.HU),f.LFG(PA,8),f.LFG(Hv,8),f.LFG(ip,8),f.LFG(qC,8),f.LFG(Vm,8),f.LFG(wr,8),f.LFG(NA,8),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Fk=(()=>{class n{constructor(){LN.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:MA,useValue:!0},{provide:PA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[jN]}),n})();var Lk=U(8819);class OA extends Gi.L{notifyNext(e,t,r,o,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class HN extends Gi.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var $N=U(7444);function FA(n,e,t,r,o=new HN(n,t,r)){if(!o.closed)return e instanceof _n.y?e.subscribe(o):(0,$N.s)(e)(o)}class Vk{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new qN(e,this.observables,this.project))}}class qN extends OA{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let l=0;l<o;l++)this.toRespond.push(l);for(let l=0;l<o;l++)this.add(FA(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class zN{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Uk(e,this.predicate))}}class Uk extends Gi.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const ZN="@firebase/database";let KC="";function VA(n){KC=n}class KN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const yo=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KN(e)}}catch(e){}return new YN},jd=yo("localStorage"),YC=yo("sessionStorage"),ap=new qi.Yd("@firebase/database"),UA=function(){let n=1;return function(){return n++}}(),QN=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Um=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Um.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Hd=null,BA=!0;const up=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ap.logLevel=qi.in.VERBOSE,Hd=ap.log.bind(ap),e&&YC.set("logging_enabled",!0)):"function"==typeof n?Hd=n:(Hd=null,YC.remove("logging_enabled"))},Vr=function(...n){if(!0===BA&&(BA=!1,null===Hd&&!0===YC.get("logging_enabled")&&up(!0)),Hd){const e=Um.apply(null,n);Hd(e)}},$v=function(n){return function(...e){Vr(n,...e)}},QC=function(...n){const e="FIREBASE INTERNAL ERROR: "+Um(...n);ap.error(e)},Qu=function(...n){const e=`FIREBASE FATAL ERROR: ${Um(...n)}`;throw ap.error(e),new Error(e)},gs=function(...n){const e="FIREBASE WARNING: "+Um(...n);ap.warn(e)},lp=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ju="[MIN_NAME]",Ja="[MAX_NAME]",cp=function(n,e){if(n===e)return 0;if(n===Ju||e===Ja)return-1;if(e===Ju||n===Ja)return 1;{const t=dp(n),r=dp(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},XN=function(n,e){return n===e?0:n<e?-1:1},Bm=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},JC=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=JC(n[e[r]]);return t+="}",t},vo=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const XC=function(n){(0,k.hu)(!lp(n),"Invalid JSON number");const r=1023;let o,l,d,m,E;0===n?(l=0,d=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=m+r,d=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(E=52;E;E-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(E=11;E;E-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(o?1:0),b.reverse();const x=b.join("");let R="";for(E=0;E<64;E+=8){let F=parseInt(x.substr(E,8),2).toString(16);1===F.length&&(F="0"+F),R+=F}return R.toLowerCase()},$A=new RegExp("^-?(0*)\\d{1,10}$"),Gv=-2147483648,jm=2147483647,dp=function(n){if($A.test(n)){const e=Number(n);if(e>=Gv&&e<=jm)return e}return null},Xu=function(n){try{n()}catch(e){setTimeout(()=>{throw gs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},hp=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class GA{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tM{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gs(e)}}let Hm=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ZA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eb="websocket",qm="long_polling";class Wm{constructor(e,t,r,o,l=!1,d="",m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zm(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===eb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==qm)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return fi(t,(l,d)=>{o.push(l+"="+d)}),r+o.join("&")}class nM{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const tb={},nb={};function rb(n){const e=n.toString();return tb[e]||(tb[e]=new nM),tb[e]}class rM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Xu(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ta{constructor(e,t,r,o,l,d,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$v(e),this.stats_=rb(t),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),zm(t,qm,E))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pp((...l)=>{const[d,m,E,b,x]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=m,this.password=E;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,m]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ZA.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ta.forceAllow_=!0}static forceDisallow(){ta.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ta.forceAllow_&&(ta.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),o=vo(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class pp{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=UA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=pp.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){Vr("frame writing exception"),m.stack&&Vr(m.stack),Vr(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+o+"="+d.seg+"&ts"+o+"="+d.ts+"&d"+o+"="+d.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Ym=null;"undefined"!=typeof MozWebSocket?Ym=MozWebSocket:"undefined"!=typeof WebSocket&&(Ym=WebSocket);let Qm=(()=>{class n{constructor(t,r,o,l,d,m,E){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$v(this.connId),this.stats_=rb(r),this.connURL=n.connectionURL_(r,m,E,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l){const d={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&ZA.test(location.hostname)&&(d.r="f"),r&&(d.s=r),o&&(d.ls=o),l&&(d.ac=l),zm(t,eb,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jd.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${KC}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,m=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;m&&(l.proxy={origin:m}),this.mySock=new Ym(this.connURL,[],l)}else this.mySock=new Ym(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Ym&&!n.forceDisallow_}static previouslyFailed(){return jd.isInMemoryStorage||!0===jd.get("previous_websocket_failure")}markConnectionHealthy(){jd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,k.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=vo(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Zv{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ta,Qm]}initTransports_(e){const t=Qm&&Qm.isAvailable();let r=t&&!Qm.previouslyFailed();if(e.webSocketOnly&&(t||gs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qm];else{const o=this.transports_=[];for(const l of Zv.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class dM{constructor(e,t,r,o,l,d,m,E,b,x){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=E,this.onKill_=b,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$v("c:"+this.id+":"),this.transportManager_=new Zv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=hp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Bm("t",e),r=Bm("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Bm("t",e),r=Bm("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Bm("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?QC("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QC("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&gs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dS{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hS{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ub extends hS{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ub}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nn(){return new mn("")}function Nt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $d(n){return n.pieces_.length-n.pieceNum_}function In(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new mn(n.pieces_,e)}function fS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function s(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function a(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new mn(e,0)}function u(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new mn(t,0)}function c(n){return n.pieceNum_>=n.pieces_.length}function h(n,e){const t=Nt(n),r=Nt(e);if(null===t)return e;if(t===r)return h(In(n),In(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function _(n,e){const t=s(n,0),r=s(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=cp(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function v(n,e){if($d(n)!==$d(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function C(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($d(n)>$d(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class T{constructor(e,t){this.errorPrefix_=t,this.parts_=s(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);O(this)}}function O(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+H(n))}function H(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Z extends hS{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Z}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ue=1e3;let nl,Qr=(()=>{class n extends dS{constructor(t,r,o,l,d,m,E,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=m,this.appCheckTokenProvider_=E,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=$v("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ue,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Z.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ub.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,d={r:l,a:t,b:r};this.log_((0,k.Pz)(d)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new k.BH,o={p:t._path.toString(),q:t._queryObject},l={action:"g",request:o,onComplete:m=>{const E=m.d;"ok"===m.s?(this.onDataUpdate_(o.p,E,!1,null),r.resolve(E)):r.reject(E)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[d];void 0===m||l!==m||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,l){this.initConnection_();const d=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+d),this.listens.has(m)||this.listens.set(m,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(m).has(d),"listen() called twice for same path/queryId.");const E={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(m).set(d,E),this.connected_&&this.sendListen_(E)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const d={p:o};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,E=>{const b=E.d,x=E.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",E),"ok"!==x&&this.removeListen_(o,l),t.onComplete&&t.onComplete(x,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const o=(0,k.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();gs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const d=l.s,m=l.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const d={p:t};l&&(d.q=o,d.t=l),this.sendRequest("n",d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,m=>{l&&setTimeout(()=>{l(m.s,m.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,d){this.initConnection_();const m={p:r,d:o};void 0!==d&&(m.h=d),this.outstandingPuts_.push({action:t,request:m,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):QC("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ue,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ue,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ue),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let E=!1,b=null;const x=function(){b?b.close():(E=!0,l())};t.realtime_={close:x,sendRequest:function(q){(0,k.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(q)}};const F=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[q,ee]=yield Promise.all([t.authTokenProvider_.getToken(F),t.appCheckTokenProvider_.getToken(F)]);E?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),t.authToken_=q&&q.accessToken,t.appCheckToken_=ee&&ee.token,b=new dM(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Ae=>{gs(Ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(q){t.log_("Failed to get token: "+q),E||(t.repoInfo_.nodeAdmin&&gs(q),x())}}})()}interrupt(t){Vr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ue,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(d=>JC(d)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new mn(t).toString();let l;if(this.listens.has(o)){const d=this.listens.get(o);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){Vr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+KC.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ub.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class It{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new It(e,t)}}class tl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new It(Ju,e),o=new It(Ju,t);return 0!==this.compare(r,o)}minPost(){return It.MIN}}class Gd extends tl{static get __EMPTY_NODE(){return nl}static set __EMPTY_NODE(e){nl=e}compare(e,t){return cp(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return It.MIN}maxPost(){return new It(Ja,nl)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new It(e,nl)}toString(){return".key"}}const Eo=new Gd;class mp{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,o&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gM,Us=(()=>{class n{constructor(t,r,o,l,d){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:xi.EMPTY_NODE,this.right=null!=d?d:xi.EMPTY_NODE}copy(t,r,o,l,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const d=o(t,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return xi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return xi.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class xi{constructor(e,t=xi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new xi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Us.BLACK,null,null))}remove(e){return new xi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Us.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mp(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mp(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mp(this.root_,null,this.comparator_,!0,e)}}function MF(n,e){return cp(n.name,e.name)}function pM(n,e){return cp(n,e)}xi.EMPTY_NODE=new class{copy(e,t,r,o,l){return this}insert(e,t,r){return new Us(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Hk=function(n){return"number"==typeof n?"number:"+XC(n):"string:"+n},$k=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===gM||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===gM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Gk,qk,Wk,Kv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$k(this.priorityNode_)}static set __childrenNodeConstructor(t){Gk=t}static get __childrenNodeConstructor(){return Gk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return c(t)?this:".priority"===Nt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Nt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,k.hu)(".priority"!==o||1===$d(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Hk(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?XC(this.value_):this.value_,this.lazyHash_=QN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(o);return(0,k.hu)(l>=0,"Unknown leaf type: "+r),(0,k.hu)(d>=0,"Unknown leaf type: "+o),l===d?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Bn=new class extends tl{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?cp(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return It.MIN}maxPost(){return new It(Ja,new Kv("[PRIORITY-POST]",Wk))}makePost(e,t){const r=qk(e);return new It(t,new Kv("[PRIORITY-POST]",r))}toString(){return".priority"}},LF=Math.log(2);class VF{constructor(e){this.count=parseInt(Math.log(e+1)/LF,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pS=function(n,e,t,r){n.sort(e);const o=function(E,b){const x=b-E;let R,F;if(0===x)return null;if(1===x)return R=n[E],F=t?t(R):R,new Us(F,R.node,Us.BLACK,null,null);{const q=parseInt(x/2,10)+E,ee=o(E,q),Ae=o(q+1,b);return R=n[q],F=t?t(R):R,new Us(F,R.node,Us.BLACK,ee,Ae)}},m=function(E){let b=null,x=null,R=n.length;const F=function(ee,Ae){const ke=R-ee,St=R;R-=ee;const Et=o(ke+1,St),dn=n[ke],Lt=t?t(dn):dn;q(new Us(Lt,dn.node,Ae,null,Et))},q=function(ee){b?(b.left=ee,b=ee):(x=ee,b=ee)};for(let ee=0;ee<E.count;++ee){const Ae=E.nextBitIsOne(),ke=Math.pow(2,E.count-(ee+1));Ae?F(ke,Us.BLACK):(F(ke,Us.BLACK),F(ke,Us.RED))}return x}(new VF(n.length));return new xi(r||e,m)};let mM;const Yv={};class qd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Yv&&Bn,"ChildrenNode.ts has not been loaded"),mM=mM||new qd({".priority":Yv},{".priority":Bn}),mM}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xi?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Eo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(It.Wrap);let m,d=l.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=l.getNext();m=o?pS(r,e.getCompare()):Yv;const E=e.toString(),b=Object.assign({},this.indexSet_);b[E]=e;const x=Object.assign({},this.indexes_);return x[E]=m,new qd(x,b)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(o,l)=>{const d=(0,k.DV)(this.indexSet_,l);if((0,k.hu)(d,"Missing index implementation for "+l),o===Yv){if(d.isDefinedOn(e.node)){const m=[],E=t.getIterator(It.Wrap);let b=E.getNext();for(;b;)b.name!==e.name&&m.push(b),b=E.getNext();return m.push(e),pS(m,d.getCompare())}return Yv}{const m=t.get(e.name);let E=o;return m&&(E=E.remove(new It(e.name,m))),E.insert(e,e.node)}});return new qd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,o=>{if(o===Yv)return o;{const l=t.get(e.name);return l?o.remove(new It(e.name,l)):o}});return new qd(r,this.indexSet_)}}let cb,At=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&$k(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cb||(cb=new n(new xi(pM),null,qd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?cb:r}}getChild(t){const r=Nt(t);return null===r?this:this.getImmediateChild(r).getChild(In(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new It(t,r);let l,d;r.isEmpty()?(l=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const m=l.isEmpty()?cb:this.priorityNode_;return new n(l,m,d)}}updateChild(t,r){const o=Nt(t);if(null===o)return r;{(0,k.hu)(".priority"!==Nt(t)||1===$d(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(In(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,d=!0;if(this.forEachChild(Bn,(m,E)=>{r[m]=E.val(t),o++,d&&n.INTEGER_REGEXP_.test(m)?l=Math.max(l,Number(m)):d=!1}),!t&&d&&l<2*o){const m=[];for(const E in r)m[E]=r[E];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Hk(this.getPriority().val())+":"),this.forEachChild(Bn,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":QN(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const d=l.getPredecessorKey(new It(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new It(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new It(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,It.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,It.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)>0;)l.getNext(),d=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===db?-1:0}withIndex(t){if(t===Eo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Eo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Bn),l=r.getIterator(Bn);let d=o.getNext(),m=l.getNext();for(;d&&m;){if(d.name!==m.name||!d.node.equals(m.node))return!1;d=o.getNext(),m=l.getNext()}return null===d&&null===m}return!1}return!1}}resolveIndex_(t){return t===Eo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const db=new class extends At{constructor(){super(new xi(pM),At.EMPTY_NODE,qd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return At.EMPTY_NODE}isEmpty(){return!1}};function ar(n,e=null){if(null===n)return At.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Kv(n,ar(e));if(n instanceof Array){let t=At.EMPTY_NODE;return fi(n,(r,o)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const l=ar(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(ar(e))}{const t=[];let r=!1;if(fi(n,(d,m)=>{if("."!==d.substring(0,1)){const E=ar(m);E.isEmpty()||(r=r||!E.getPriority().isEmpty(),t.push(new It(d,E)))}}),0===t.length)return At.EMPTY_NODE;const l=pS(t,MF,d=>d.name,pM);if(r){const d=pS(t,Bn.getCompare());return new At(l,ar(e),new qd({".priority":d},{".priority":Bn}))}return new At(l,ar(e),qd.Default)}}Object.defineProperties(It,{MIN:{value:new It(Ju,At.EMPTY_NODE)},MAX:{value:new It(Ja,db)}}),Gd.__EMPTY_NODE=At.EMPTY_NODE,Kv.__childrenNodeConstructor=At,function(n){gM=n}(db),function(n){Wk=n}(db),function(n){qk=n}(ar);class _M extends tl{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!c(e)&&".priority"!==Nt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?cp(e.name,t.name):l}makePost(e,t){const r=ar(e),o=At.EMPTY_NODE.updateChild(this.indexPath_,r);return new It(t,o)}maxPost(){const e=At.EMPTY_NODE.updateChild(this.indexPath_,db);return new It(Ja,e)}toString(){return s(this.indexPath_,0).join("/")}}const yM=new class extends tl{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?cp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return It.MIN}maxPost(){return It.MAX}makePost(e,t){const r=ar(e);return new It(t,r)}toString(){return".value"}},Qv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HF=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Qv.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let d=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)d+=Qv.charAt(e[o]);return(0,k.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),Kk=function(n){if(n===""+jm)return"-";const e=dp(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ja;const l=Qv.charAt(Qv.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},Yk=function(n){if(n===""+Gv)return Ju;const e=dp(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+jm:(delete t[t.length-1],t.join("")):(t[t.length-1]=Qv.charAt(Qv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Qk(n){return{type:"value",snapshotNode:n}}function Jv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function hb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function fb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class EM{constructor(e){this.index_=e}updateChild(e,t,r,o,l,d){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(hb(t,m)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Jv(t,r)):d.trackChildChange(fb(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Bn,(o,l)=>{t.hasChild(o)||r.trackChildChange(hb(o,l))}),t.isLeafNode()||t.forEachChild(Bn,(o,l)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(l)||r.trackChildChange(fb(o,l,d))}else r.trackChildChange(Jv(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?At.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pb{constructor(e){this.indexedFilter_=new EM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pb.getStartPost_(e),this.endPost_=pb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,d){return this.matches(new It(t,r))||(r=At.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=At.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(At.EMPTY_NODE);const l=this;return t.forEachChild(Bn,(d,m)=>{l.matches(new It(d,m))||(o=o.updateImmediateChild(d,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class GF{constructor(e){this.rangedFilter_=new pb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,d){return this.rangedFilter_.matches(new It(t,r))||(r=At.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,d):this.fullLimitUpdateChild_(e,t,r,l,d)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=At.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=At.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const m=l.getNext();let E;if(E=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!E)break;o=o.updateImmediateChild(m.name,m.node),d++}}else{let l,d,m,E;if(o=t.withIndex(this.index_),o=o.updatePriority(At.EMPTY_NODE),this.reverse_){E=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const R=this.index_.getCompare();m=(F,q)=>R(q,F)}else E=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let b=0,x=!1;for(;E.hasNext();){const R=E.getNext();!x&&m(l,R)<=0&&(x=!0),x&&b<this.limit_&&m(R,d)<=0?b++:o=o.updateImmediateChild(R.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let d;if(this.reverse_){const R=this.index_.getCompare();d=(F,q)=>R(q,F)}else d=this.index_.getCompare();const m=e;(0,k.hu)(m.numChildren()===this.limit_,"");const E=new It(t,r),b=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),x=this.rangedFilter_.matches(E);if(m.hasChild(t)){const R=m.getImmediateChild(t);let F=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=F&&(F.name===t||m.hasChild(F.name));)F=o.getChildAfterChild(this.index_,F,this.reverse_);const q=null==F?1:d(F,E);if(x&&!r.isEmpty()&&q>=0)return null!=l&&l.trackChildChange(fb(t,r,R)),m.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(hb(t,R));const Ae=m.updateImmediateChild(t,At.EMPTY_NODE);return null!=F&&this.rangedFilter_.matches(F)?(null!=l&&l.trackChildChange(Jv(F.name,F.node)),Ae.updateImmediateChild(F.name,F.node)):Ae}}return r.isEmpty()?e:x&&d(b,E)>=0?(null!=l&&(l.trackChildChange(hb(b.name,b.node)),l.trackChildChange(Jv(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(b.name,At.EMPTY_NODE)):e}}class gS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ju}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ja}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bn}copy(){const e=new gS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function CM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function mS(n,e){const t=n.copy();return t.index_=e,t}function Jk(n){const e={};if(n.isDefault())return e;let t;return n.index_===Bn?t="$priority":n.index_===yM?t="$value":n.index_===Eo?t="$key":((0,k.hu)(n.index_ instanceof _M,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Xk(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Bn&&(e.i=n.index_.toString()),e}class _S extends dS{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=$v("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const d=_S.getListenId_(e,r),m={};this.listens_[d]=m;const E=Jk(e._queryParams);this.restRequest_(l+".json",E,(b,x)=>{let R=x;if(404===b&&(R=null,b=null),null===b&&this.onDataUpdate_(l,R,!1,r),(0,k.DV)(this.listens_,d)===m){let F;F=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(F,null)}})}unlisten(e,t){const r=_S.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Jk(e._queryParams),r=e._path.toString(),o=new k.BH;return this.restRequest_(r+".json",t,(l,d)=>{let m=d;404===l&&(m=null,l=null),null===l?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let E=null;if(m.status>=200&&m.status<300){try{E=(0,k.cI)(m.responseText)}catch(b){gs("Failed to parse JSON response for "+d+": "+m.responseText)}r(null,E)}else 401!==m.status&&404!==m.status&&gs("Got unsuccessful REST response for "+d+" Status: "+m.status),r(m.status);r=null}},m.open("GET",d,!0),m.send()})}}class YF{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yS(){return{value:null,children:new Map}}function Xv(n,e,t){if(c(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Nt(e);n.children.has(r)||n.children.set(r,yS()),Xv(n.children.get(r),e=In(e),t)}}function bM(n,e){if(c(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Bn,(r,o)=>{Xv(n,new mn(r),o)}),bM(n,e)}}if(n.children.size>0){const t=Nt(e);return e=In(e),n.children.has(t)&&bM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function IM(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{IM(o,new mn(e.toString()+"/"+r),t)})}class JF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fi(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class tL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new JF(e);const r=1e4+2e4*Math.random();hp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;fi(e,(o,l)=>{l>0&&(0,k.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),hp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xa||(Xa={})),Xa))();function AM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(c(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new mn(e));return new vS(nn(),t,this.revert)}}return(0,k.hu)(Nt(this.path)===e,"operationForChild called for unrelated child."),new vS(In(this.path),this.affectedTree,this.revert)}}class gb{constructor(e,t){this.source=e,this.path=t,this.type=Xa.LISTEN_COMPLETE}operationForChild(e){return c(this.path)?new gb(this.source,nn()):new gb(this.source,In(this.path))}}class Jm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xa.OVERWRITE}operationForChild(e){return c(this.path)?new Jm(this.source,nn(),this.snap.getImmediateChild(e)):new Jm(this.source,In(this.path),this.snap)}}class eE{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xa.MERGE}operationForChild(e){if(c(this.path)){const t=this.children.subtree(new mn(e));return t.isEmpty()?null:t.value?new Jm(this.source,nn(),t.value):new eE(this.source,nn(),t)}return(0,k.hu)(Nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new eE(this.source,In(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _p{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(c(e))return this.isFullyInitialized()&&!this.filtered_;const t=Nt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mb(n,e,t,r,o,l){const d=r.filter(m=>m.type===t);d.sort((m,E)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new It(e.childName,e.snapshotNode),o=new It(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,m,E)),d.forEach(m=>{const E=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,l);o.forEach(b=>{b.respondsTo(m.type)&&e.push(b.createEvent(E,n.query_))})})}function ES(n,e){return{eventCache:n,serverCache:e}}function _b(n,e,t,r){return ES(new _p(e,t,r),n.serverCache)}function tO(n,e,t,r){return ES(n.eventCache,new _p(e,t,r))}function wS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SM;class jn{constructor(e,t=(()=>(SM||(SM=new xi(XN)),SM))()){this.value=e,this.children=t}static fromObject(e){let t=new jn(null);return fi(e,(r,o)=>{t=t.set(new mn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nn(),value:this.value};if(c(e))return null;{const r=Nt(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(In(e),t);return null!=l?{path:u(new mn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(c(e))return this;{const t=Nt(e),r=this.children.get(t);return null!==r?r.subtree(In(e)):new jn(null)}}set(e,t){if(c(e))return new jn(t,this.children);{const r=Nt(e),l=(this.children.get(r)||new jn(null)).set(In(e),t),d=this.children.insert(r,l);return new jn(this.value,d)}}remove(e){if(c(e))return this.children.isEmpty()?new jn(null):new jn(null,this.children);{const t=Nt(e),r=this.children.get(t);if(r){const o=r.remove(In(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new jn(null):new jn(this.value,l)}return this}}get(e){if(c(e))return this.value;{const t=Nt(e),r=this.children.get(t);return r?r.get(In(e)):null}}setTree(e,t){if(c(e))return t;{const r=Nt(e),l=(this.children.get(r)||new jn(null)).setTree(In(e),t);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new jn(this.value,d)}}fold(e){return this.fold_(nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(u(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,nn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(c(e))return null;{const l=Nt(e),d=this.children.get(l);return d?d.findOnPath_(In(e),u(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nn(),t)}foreachOnPath_(e,t,r){if(c(e))return this;{this.value&&r(t,this.value);const o=Nt(e),l=this.children.get(o);return l?l.foreachOnPath_(In(e),u(t,o),r):new jn(null)}}foreach(e){this.foreach_(nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(u(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class rl{constructor(e){this.writeTree_=e}static empty(){return new rl(new jn(null))}}function yb(n,e,t){if(c(e))return new rl(new jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const d=h(o,e);return l=l.updateChild(d,t),new rl(n.writeTree_.set(o,l))}{const o=new jn(t),l=n.writeTree_.setTree(e,o);return new rl(l)}}}function xM(n,e,t){let r=n;return fi(t,(o,l)=>{r=yb(r,u(e,o),l)}),r}function nO(n,e){if(c(e))return rl.empty();{const t=n.writeTree_.setTree(e,new jn(null));return new rl(t)}}function RM(n,e){return null!=e_(n,e)}function e_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(h(t.path,e)):null}function rO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Bn,(r,o)=>{e.push(new It(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new It(r,o.value))}),e}function yp(n,e){if(c(e))return n;{const t=e_(n,e);return new rl(null!=t?new jn(t):n.writeTree_.subtree(e))}}function NM(n){return n.writeTree_.isEmpty()}function tE(n,e){return iO(nn(),n.writeTree_,e)}function iO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,k.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=iO(u(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(u(n,".priority"),r)),t}}function CS(n,e){return lO(e,n)}function dL(n,e){if(n.snap)return C(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&C(u(n.path,t),e))return!0;return!1}function fL(n){return n.visible}function sO(n,e,t){let r=rl.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const d=l.path;let m;if(l.snap)C(t,d)?(m=h(t,d),r=yb(r,m,l.snap)):C(d,t)&&(m=h(d,t),r=yb(r,nn(),l.snap.getChild(m)));else{if(!l.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(C(t,d))m=h(t,d),r=xM(r,m,l.children);else if(C(d,t))if(m=h(d,t),c(m))r=xM(r,nn(),l.children);else{const E=(0,k.DV)(l.children,Nt(m));if(E){const b=E.getChild(In(m));r=yb(r,nn(),b)}}}}}return r}function oO(n,e,t,r,o){if(r||o){const l=yp(n.visibleWrites,e);return!o&&NM(l)?t:o||null!=t||RM(l,nn())?tE(sO(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(C(b.path,e)||C(e,b.path))},e),t||At.EMPTY_NODE):null}{const l=e_(n.visibleWrites,e);if(null!=l)return l;{const d=yp(n.visibleWrites,e);return NM(d)?t:null!=t||RM(d,nn())?tE(d,t||At.EMPTY_NODE):null}}}function bS(n,e,t,r){return oO(n.writeTree,n.treePath,e,t,r)}function MM(n,e){return function(n,e,t){let r=At.EMPTY_NODE;const o=e_(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Bn,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(t){const l=yp(n.visibleWrites,e);return t.forEachChild(Bn,(d,m)=>{const E=tE(yp(l,new mn(d)),m);r=r.updateImmediateChild(d,E)}),rO(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return rO(yp(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function aO(n,e,t,r){return function(n,e,t,r,o){(0,k.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=u(e,t);if(RM(n.visibleWrites,l))return null;{const d=yp(n.visibleWrites,l);return NM(d)?o.getChild(t):tE(d,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function IS(n,e){return function(n,e){return e_(n.visibleWrites,e)}(n.writeTree,u(n.treePath,e))}function PM(n,e,t){return function(n,e,t,r){const o=u(e,t),l=e_(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?tE(yp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function uO(n,e){return lO(u(n.treePath,e),n.writeTree)}function lO(n,e){return{treePath:n,writeTree:e}}class wL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,fb(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,hb(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,Jv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,fb(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cO=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new _p(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xm(this.viewCache_),l=function(n,e,t,r,o,l){return function(n,e,t,r,o,l,d){let m;const E=yp(n.visibleWrites,e),b=e_(E,nn());if(null!=b)m=b;else{if(null==t)return[];m=tE(E,t)}if(m=m.withIndex(d),m.isEmpty()||m.isLeafNode())return[];{const x=[],R=d.getCompare(),F=l?m.getReverseIteratorFrom(r,d):m.getIteratorFrom(r,d);let q=F.getNext();for(;q&&x.length<o;)0!==R(q,r)&&x.push(q),q=F.getNext();return x}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function dO(n,e,t,r,o,l){const d=e.eventCache;if(null!=IS(r,t))return e;{let m,E;if(c(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=Xm(e),R=MM(r,b instanceof At?b:At.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),R,l)}else{const b=bS(r,Xm(e));m=n.filter.updateFullNode(e.eventCache.getNode(),b,l)}else{const b=Nt(t);if(".priority"===b){(0,k.hu)(1===$d(t),"Can't have a priority with additional path components");const x=d.getNode();E=e.serverCache.getNode();const R=aO(r,t,x,E);m=null!=R?n.filter.updatePriority(x,R):d.getNode()}else{const x=In(t);let R;if(d.isCompleteForChild(b)){E=e.serverCache.getNode();const F=aO(r,t,d.getNode(),E);R=null!=F?d.getNode().getImmediateChild(b).updateChild(x,F):d.getNode().getImmediateChild(b)}else R=PM(r,b,e.serverCache);m=null!=R?n.filter.updateChild(d.getNode(),b,R,x,o,l):d.getNode()}}return _b(e,m,d.isFullyInitialized()||c(t),n.filter.filtersNodes())}}function TS(n,e,t,r,o,l,d,m){const E=e.serverCache;let b;const x=d?n.filter:n.filter.getIndexedFilter();if(c(t))b=x.updateFullNode(E.getNode(),r,null);else if(x.filtersNodes()&&!E.isFiltered()){const q=E.getNode().updateChild(t,r);b=x.updateFullNode(E.getNode(),q,null)}else{const q=Nt(t);if(!E.isCompleteForPath(t)&&$d(t)>1)return e;const ee=In(t),ke=E.getNode().getImmediateChild(q).updateChild(ee,r);b=".priority"===q?x.updatePriority(E.getNode(),ke):x.updateChild(E.getNode(),q,ke,ee,cO,null)}const R=tO(e,b,E.isFullyInitialized()||c(t),x.filtersNodes());return dO(n,R,t,o,new kM(o,R,l),m)}function OM(n,e,t,r,o,l,d){const m=e.eventCache;let E,b;const x=new kM(o,e,l);if(c(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,d),E=_b(e,b,!0,n.filter.filtersNodes());else{const R=Nt(t);if(".priority"===R)b=n.filter.updatePriority(e.eventCache.getNode(),r),E=_b(e,b,m.isFullyInitialized(),m.isFiltered());else{const F=In(t),q=m.getNode().getImmediateChild(R);let ee;if(c(F))ee=r;else{const Ae=x.getCompleteChild(R);ee=null!=Ae?".priority"===fS(F)&&Ae.getChild(a(F)).isEmpty()?Ae:Ae.updateChild(F,r):At.EMPTY_NODE}E=q.equals(ee)?e:_b(e,n.filter.updateChild(m.getNode(),R,ee,F,x,d),m.isFullyInitialized(),n.filter.filtersNodes())}}return E}function hO(n,e){return n.eventCache.isCompleteForChild(e)}function fO(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function FM(n,e,t,r,o,l,d,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,E=e;b=c(t)?r:new jn(null).setTree(t,r);const x=e.serverCache.getNode();return b.children.inorderTraversal((R,F)=>{if(x.hasChild(R)){const ee=fO(0,e.serverCache.getNode().getImmediateChild(R),F);E=TS(n,E,new mn(R),ee,o,l,d,m)}}),b.children.inorderTraversal((R,F)=>{const q=!e.serverCache.isCompleteForChild(R)&&void 0===F.value;if(!x.hasChild(R)&&!q){const Ae=fO(0,e.serverCache.getNode().getImmediateChild(R),F);E=TS(n,E,new mn(R),Ae,o,l,d,m)}}),E}class NL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new EM(r.getIndex()),l=function(n){return n.loadsAllData()?new EM(n.getIndex()):n.hasLimit()?new GF(n):new pb(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=t.serverCache,m=t.eventCache,E=o.updateFullNode(At.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(At.EMPTY_NODE,m.getNode(),null),x=new _p(E,d.isFullyInitialized(),o.filtersNodes()),R=new _p(b,m.isFullyInitialized(),l.filtersNodes());this.viewCache_=ES(R,x),this.eventGenerator_=new nL(this.query_)}get query(){return this.query_}}function kL(n,e){const t=Xm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!c(e)&&!t.getImmediateChild(Nt(e)).isEmpty())?t.getChild(e):null}function pO(n){return 0===n.eventRegistrations_.length}function gO(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(t,o);d&&r.push(d)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(d)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function mO(n,e,t,r){e.type===Xa.MERGE&&null!==e.source.queryId&&((0,k.hu)(Xm(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(wS(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function(n,e,t,r,o){const l=new wL;let d,m;if(t.type===Xa.OVERWRITE){const b=t;b.source.fromUser?d=OM(n,e,b.path,b.snap,r,o,l):((0,k.hu)(b.source.fromServer,"Unknown source."),m=b.source.tagged||e.serverCache.isFiltered()&&!c(b.path),d=TS(n,e,b.path,b.snap,r,o,m,l))}else if(t.type===Xa.MERGE){const b=t;b.source.fromUser?d=function(n,e,t,r,o,l,d){let m=e;return r.foreach((E,b)=>{const x=u(t,E);hO(e,Nt(x))&&(m=OM(n,m,x,b,o,l,d))}),r.foreach((E,b)=>{const x=u(t,E);hO(e,Nt(x))||(m=OM(n,m,x,b,o,l,d))}),m}(n,e,b.path,b.children,r,o,l):((0,k.hu)(b.source.fromServer,"Unknown source."),m=b.source.tagged||e.serverCache.isFiltered(),d=FM(n,e,b.path,b.children,r,o,m,l))}else if(t.type===Xa.ACK_USER_WRITE){const b=t;d=b.revert?function(n,e,t,r,o,l){let d;if(null!=IS(r,t))return e;{const m=new kM(r,e,o),E=e.eventCache.getNode();let b;if(c(t)||".priority"===Nt(t)){let x;if(e.serverCache.isFullyInitialized())x=bS(r,Xm(e));else{const R=e.serverCache.getNode();(0,k.hu)(R instanceof At,"serverChildren would be complete if leaf node"),x=MM(r,R)}x=x,b=n.filter.updateFullNode(E,x,l)}else{const x=Nt(t);let R=PM(r,x,e.serverCache);null==R&&e.serverCache.isCompleteForChild(x)&&(R=E.getImmediateChild(x)),b=null!=R?n.filter.updateChild(E,x,R,In(t),m,l):e.eventCache.getNode().hasChild(x)?n.filter.updateChild(E,x,At.EMPTY_NODE,In(t),m,l):E,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=bS(r,Xm(e)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=e.serverCache.isFullyInitialized()||null!=IS(r,nn()),_b(e,b,d,n.filter.filtersNodes())}}(n,e,b.path,r,o,l):function(n,e,t,r,o,l,d){if(null!=IS(o,t))return e;const m=e.serverCache.isFiltered(),E=e.serverCache;if(null!=r.value){if(c(t)&&E.isFullyInitialized()||E.isCompleteForPath(t))return TS(n,e,t,E.getNode().getChild(t),o,l,m,d);if(c(t)){let b=new jn(null);return E.getNode().forEachChild(Eo,(x,R)=>{b=b.set(new mn(x),R)}),FM(n,e,t,b,o,l,m,d)}return e}{let b=new jn(null);return r.foreach((x,R)=>{const F=u(t,x);E.isCompleteForPath(F)&&(b=b.set(x,E.getNode().getChild(F)))}),FM(n,e,t,b,o,l,m,d)}}(n,e,b.path,b.affectedTree,r,o,l)}else{if(t.type!==Xa.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);d=function(n,e,t,r,o){const l=e.serverCache;return dO(n,tO(e,l.getNode(),l.isFullyInitialized()||c(t),l.isFiltered()),t,r,cO,o)}(n,e,t.path,r,l)}const E=l.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=wS(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(Qk(wS(e)))}}(e,d,E),{viewCache:d,changes:E}}(n.processor_,o,e,t,r);return function(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,k.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,_O(n,l.changes,l.viewCache.eventCache.getNode(),null)}function _O(n,e,t,r){return function(n,e,t,r){const o=[],l=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),mb(n,o,"child_removed",e,r,t),mb(n,o,"child_added",e,r,t),mb(n,o,"child_moved",l,r,t),mb(n,o,"child_changed",e,r,t),mb(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let DS,SS;class yO{constructor(){this.views=new Map}}function LM(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,k.hu)(null!=l,"SyncTree gave us an op for an invalid query."),mO(l,e,t,r)}{let l=[];for(const d of n.views.values())l=l.concat(mO(d,e,t,r));return l}}function vO(n,e,t,r,o){const d=n.views.get(e._queryIdentifier);if(!d){let m=bS(t,o?r:null),E=!1;m?E=!0:r instanceof At?(m=MM(t,r),E=!1):(m=At.EMPTY_NODE,E=!1);const b=ES(new _p(m,E,!1),new _p(r,o,!1));return new NL(e,b)}return d}function EO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function vp(n,e){let t=null;for(const r of n.views.values())t=t||kL(r,e);return t}function wO(n,e){return e._queryParams.loadsAllData()?AS(n):n.views.get(e._queryIdentifier)}function CO(n,e){return null!=wO(n,e)}function Ep(n){return null!=AS(n)}function AS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let GL=1;class bO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jn(null),this.pendingWriteTree_={visibleWrites:rl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VM(n,e,t,r,o){return function(n,e,t,r,o){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=yb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?nE(n,new Jm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wp(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const m=n.allWrites[d];m.visible&&(d>=t&&dL(m,r.path)?o=!1:C(r.path,m.path)&&(l=!0)),d--}return!!o&&(l?(function(n){n.visibleWrites=sO(n.allWrites,fL,nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=nO(n.visibleWrites,r.path):fi(r.children,E=>{n.visibleWrites=nO(n.visibleWrites,u(r.path,E))}),!0))}(n.pendingWriteTree_,e)){let l=new jn(null);return null!=r.snap?l=l.set(nn(),!0):fi(r.children,d=>{l=l.set(new mn(d),!0)}),nE(n,new vS(r.path,l,t))}return[]}function vb(n,e,t){return nE(n,new Jm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function UM(n,e,t,r){const o=e._path,l=n.syncPointTree_.get(o);let d=[];if(l&&("default"===e._queryIdentifier||CO(l,e))){const m=function(n,e,t,r){const o=e._queryIdentifier,l=[];let d=[];const m=Ep(n);if("default"===o)for(const[E,b]of n.views.entries())d=d.concat(gO(b,t,r)),pO(b)&&(n.views.delete(E),b.query._queryParams.loadsAllData()||l.push(b.query));else{const E=n.views.get(o);E&&(d=d.concat(gO(E,t,r)),pO(E)&&(n.views.delete(o),E.query._queryParams.loadsAllData()||l.push(E.query)))}return m&&!Ep(n)&&l.push(new((0,k.hu)(DS,"Reference.ts has not been loaded"),DS)(e._repo,e._path)),{removed:l,events:d}}(l,e,t,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const E=m.removed;d=m.events;const b=-1!==E.findIndex(R=>R._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(o,(R,F)=>Ep(F));if(b&&!x){const R=n.syncPointTree_.subtree(o);if(!R.isEmpty()){const F=function(n){return n.fold((e,t,r)=>{if(t&&Ep(t))return[AS(t)];{let o=[];return t&&(o=EO(t)),fi(r,(l,d)=>{o=o.concat(d)}),o}})}(R);for(let q=0;q<F.length;++q){const ee=F[q],Ae=ee.query,ke=AO(n,ee);n.listenProvider_.startListening(Eb(Ae),RS(n,Ae),ke.hashFn,ke.onComplete)}}}if(!x&&E.length>0&&!r)if(b){const R=null;n.listenProvider_.stopListening(Eb(e),R)}else E.forEach(R=>{const F=n.queryToTagMap.get(NS(R));n.listenProvider_.stopListening(Eb(R),F)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=NS(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,E)}return d}function IO(n,e,t){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(R,F)=>{const q=h(R,r);o=o||vp(F,q),l=l||Ep(F)});let m,d=n.syncPointTree_.get(r);d?(l=l||Ep(d),o=o||vp(d,nn())):(d=new yO,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=o?m=!0:(m=!1,o=At.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((F,q)=>{const ee=vp(q,nn());ee&&(o=o.updateImmediateChild(F,ee))}));const E=CO(d,e);if(!E&&!e._queryParams.loadsAllData()){const R=NS(e);(0,k.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const F=GL++;n.queryToTagMap.set(R,F),n.tagToQueryMap.set(F,R)}let x=function(n,e,t,r,o,l){const d=vO(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function(n,e){n.eventRegistrations_.push(e)}(d,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Bn,(l,d)=>{r.push(Jv(l,d))}),t.isFullyInitialized()&&r.push(Qk(t.getNode())),_O(n,r,t.getNode(),e)}(d,t)}(d,e,t,CS(n.pendingWriteTree_,r),o,m);if(!E&&!l){const R=wO(d,e);x=x.concat(function(n,e,t){const r=e._path,o=RS(n,e),l=AO(n,t),d=n.listenProvider_.startListening(Eb(e),o,l.hashFn,l.onComplete),m=n.syncPointTree_.subtree(r);if(o)(0,k.hu)(!Ep(m.value),"If we're adding a query, it shouldn't be shadowed");else{const E=m.fold((b,x,R)=>{if(!c(b)&&x&&Ep(x))return[AS(x).query];{let F=[];return x&&(F=F.concat(EO(x).map(q=>q.query))),fi(R,(q,ee)=>{F=F.concat(ee)}),F}});for(let b=0;b<E.length;++b){const x=E[b];n.listenProvider_.stopListening(Eb(x),RS(n,x))}}return d}(n,e,R))}return x}function xS(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(d,m)=>{const b=vp(m,h(d,e));if(b)return b});return oO(o,e,l,t,!0)}function nE(n,e){return TO(e,n.syncPointTree_,null,CS(n.pendingWriteTree_,nn()))}function TO(n,e,t,r){if(c(n.path))return DO(n,e,t,r);{const o=e.get(nn());null==t&&null!=o&&(t=vp(o,nn()));let l=[];const d=Nt(n.path),m=n.operationForChild(d),E=e.children.get(d);if(E&&m){const b=t?t.getImmediateChild(d):null,x=uO(r,d);l=l.concat(TO(m,E,b,x))}return o&&(l=l.concat(LM(o,n,r,t))),l}}function DO(n,e,t,r){const o=e.get(nn());null==t&&null!=o&&(t=vp(o,nn()));let l=[];return e.children.inorderTraversal((d,m)=>{const E=t?t.getImmediateChild(d):null,b=uO(r,d),x=n.operationForChild(d);x&&(l=l.concat(DO(x,m,E,b)))}),o&&(l=l.concat(LM(o,n,r,t))),l}function AO(n,e){const t=e.query,r=RS(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||At.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=BM(n,t);if(r){const o=jM(r),l=o.path,d=o.queryId,m=h(l,e);return HM(n,l,new gb(AM(d),m))}return[]}(n,t._path,r):function(n,e){return nE(n,new gb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return UM(n,t,null,l)}}}}function RS(n,e){const t=NS(e);return n.queryToTagMap.get(t)}function NS(n){return n._path.toString()+"$"+n._queryIdentifier}function BM(n,e){return n.tagToQueryMap.get(e)}function jM(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new mn(n.substr(0,e))}}function HM(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),LM(r,t,CS(n.pendingWriteTree_,e),null)}function Eb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,k.hu)(SS,"Reference.ts has not been loaded"),SS)(n._repo,n._path):n}class $M{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $M(t)}node(){return this.node_}}class GM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=u(this.path_,e);return new GM(this.syncTree_,t)}node(){return xS(this.syncTree_,this.path_)}}const SO=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?rV(n[".sv"],e,t):"object"==typeof n[".sv"]?iV(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},rV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,k.hu)(!1,"Unexpected server value: "+n)}},iV=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,k.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return"number"!=typeof d?r:d+r},xO=function(n,e,t,r){return WM(e,new GM(t,n),r)},qM=function(n,e,t){return WM(n,new $M(e),t)};function WM(n,e,t){const r=n.getPriority().val(),o=SO(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const d=n,m=SO(d.getValue(),e,t);return m!==d.getValue()||o!==d.getPriority().val()?new Kv(m,ar(o)):n}{const d=n;return l=d,o!==d.getPriority().val()&&(l=l.updatePriority(new Kv(o))),d.forEachChild(Bn,(m,E)=>{const b=WM(E,e.getImmediateChild(m),t);b!==E&&(l=l.updateImmediateChild(m,b))}),l}}class zM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function MS(n,e){let t=e instanceof mn?e:new mn(e),r=n,o=Nt(t);for(;null!==o;){const l=(0,k.DV)(r.node.children,o)||{children:{},childCount:0};r=new zM(o,r,l),t=In(t),o=Nt(t)}return r}function t_(n){return n.node.value}function ZM(n,e){n.node.value=e,KM(n)}function RO(n){return n.node.childCount>0}function PS(n,e){fi(n.node.children,(t,r)=>{e(new zM(t,n,r))})}function NO(n,e,t,r){t&&!r&&e(n),PS(n,o=>{NO(o,e,!0,r)}),t&&r&&e(n)}function wb(n){return new mn(null===n.parent?n.name:wb(n.parent)+"/"+n.name)}function KM(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===t_(n)&&!RO(n)}(t),o=(0,k.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,KM(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,KM(n))}(n.parent,n.name,n)}const uV=/[\[\].#$\/\u0000-\u001F\u007F]/,lV=/[\[\].#$\u0000-\u001F\u007F]/,YM=10485760,kS=function(n){return"string"==typeof n&&0!==n.length&&!uV.test(n)},MO=function(n){return"string"==typeof n&&0!==n.length&&!lV.test(n)},Cb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!lp(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},cc=function(n,e,t,r){r&&void 0===e||bb((0,k.gK)(n,"value"),e,t)},bb=function(n,e,t){const r=t instanceof mn?new T(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+H(r));if("function"==typeof e)throw new Error(n+"contains a function "+H(r)+" with contents = "+e.toString());if(lp(e))throw new Error(n+"contains "+e.toString()+" "+H(r));if("string"==typeof e&&e.length>YM/3&&(0,k.ug)(e)>YM)throw new Error(n+"contains a string greater than "+YM+" utf8 bytes "+H(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if(fi(e,(d,m)=>{if(".value"===d)o=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!kS(d)))throw new Error(n+" contains an invalid key ("+d+") "+H(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),O(n)})(r,d),bb(n,m,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+H(r)+" in addition to actual children.")}},PO=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];fi(e,(d,m)=>{const E=new mn(d);if(bb(o,m,u(t,E)),".priority"===fS(E)&&!Cb(m))throw new Error(o+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(E)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=s(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!kS(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(_);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&C(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},QM=function(n,e,t){if(!t||void 0!==e){if(lp(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cb(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ib=function(n,e,t,r){if(!(r&&void 0===t||kS(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tb=function(n,e,t,r){if(!(r&&void 0===t||MO(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eu=function(n,e){if(".info"===Nt(e))throw new Error(n+" failed = Can't modify data under /.info/")},kO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!kS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MO(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function OS(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!v(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function JM(n,e,t){OS(n,t),OO(n,r=>v(r,e))}function tu(n,e,t){OS(n,t),OO(n,r=>C(r,e)||C(e,r))}function OO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(pV(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function pV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Hd&&Vr("event: "+t.toString()),Xu(r)}}}const FO="repo_interrupt";class mV{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yS(),this.transactionQueueTree_=new zM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LO(n){const t=n.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Db(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:LO(n)})}function VO(n,e,t,r,o){n.dataUpdateCount++;const l=new mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(r){const E=(0,k.UI)(t,b=>ar(b));d=function(n,e,t,r){const o=BM(n,r);if(o){const l=jM(o),d=l.path,m=l.queryId,E=h(d,e),b=jn.fromObject(t);return HM(n,d,new eE(AM(m),E,b))}return[]}(n.serverSyncTree_,l,E,o)}else{const E=ar(t);d=function(n,e,t,r){const o=BM(n,r);if(null!=o){const l=jM(o),d=l.path,m=l.queryId,E=h(d,e);return HM(n,d,new Jm(AM(m),E,t))}return[]}(n.serverSyncTree_,l,E,o)}else if(r){const E=(0,k.UI)(t,b=>ar(b));d=function(n,e,t){const r=jn.fromObject(t);return nE(n,new eE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,E)}else{const E=ar(t);d=vb(n.serverSyncTree_,l,E)}let m=l;d.length>0&&(m=iE(n,l)),tu(n.eventQueue_,m,d)}function UO(n,e){XM(n,"connected",e),!1===e&&function(n){rE(n,"onDisconnectEvents");const e=Db(n),t=yS();IM(n.onDisconnect_,nn(),(o,l)=>{const d=xO(o,l,n.serverSyncTree_,e);Xv(t,o,d)});let r=[];IM(t,nn(),(o,l)=>{r=r.concat(vb(n.serverSyncTree_,o,l));const d=rP(n,o);iE(n,d)}),n.onDisconnect_=yS(),tu(n.eventQueue_,nn(),r)}(n)}function XM(n,e,t){const r=new mn("/.info/"+e),o=ar(t);n.infoData_.updateSnapshot(r,o);const l=vb(n.infoSyncTree_,r,o);tu(n.eventQueue_,r,l)}function FS(n){return n.nextWriteId_++}function eP(n,e,t,r,o){rE(n,"set",{path:e.toString(),value:t,priority:r});const l=Db(n),d=ar(t,r),m=xS(n.serverSyncTree_,e),E=qM(d,m,l),b=FS(n),x=VM(n.serverSyncTree_,e,E,b,!0);OS(n.eventQueue_,x),n.server_.put(e.toString(),d.val(!0),(F,q)=>{const ee="ok"===F;ee||gs("set at "+e+" failed: "+F);const Ae=wp(n.serverSyncTree_,b,!ee);tu(n.eventQueue_,e,Ae),Cp(0,o,F,q)});const R=rP(n,e);iE(n,R),tu(n.eventQueue_,R,[])}function CV(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&bM(n.onDisconnect_,e),Cp(0,t,r,o)})}function BO(n,e,t,r){const o=ar(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,d)=>{"ok"===l&&Xv(n.onDisconnect_,e,o),Cp(0,r,l,d)})}function tP(n,e,t){let r;r=".info"===Nt(e._path)?UM(n.infoSyncTree_,e,t):UM(n.serverSyncTree_,e,t),JM(n.eventQueue_,e._path,r)}function jO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FO)}function rE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vr(t,...e)}function Cp(n,e,t,r){e&&Xu(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const d=new Error(l);d.code=o,e(d)}})}function nP(n,e,t){return xS(n.serverSyncTree_,e,t)||At.EMPTY_NODE}function LS(n,e=n.transactionQueueTree_){if(e||VS(n,e),t_(e)){const t=$O(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=nP(n,e,r);let l=o;const d=o.hash();for(let b=0;b<t.length;b++){const x=t[b];(0,k.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const R=h(e,x.path);l=l.updateChild(R,x.currentOutputSnapshotRaw)}const m=l.val(!0),E=e;n.server_.put(E.toString(),m,b=>{rE(n,"transaction put response",{path:E.toString(),status:b});let x=[];if("ok"===b){const R=[];for(let F=0;F<t.length;F++)t[F].status=2,x=x.concat(wp(n.serverSyncTree_,t[F].currentWriteId)),t[F].onComplete&&R.push(()=>t[F].onComplete(null,!0,t[F].currentOutputSnapshotResolved)),t[F].unwatcher();VS(n,MS(n.transactionQueueTree_,e)),LS(n,n.transactionQueueTree_),tu(n.eventQueue_,e,x);for(let F=0;F<R.length;F++)Xu(R[F])}else{if("datastale"===b)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{gs("transaction at "+E.toString()+" failed: "+b);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=b}iE(n,e)}},d)}(n,wb(e),t)}else RO(e)&&PS(e,t=>{LS(n,t)})}function iE(n,e){const t=HO(n,e),r=wb(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const d=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const E=e[m],b=h(t,E.path);let R,x=!1;if((0,k.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)x=!0,R=E.abortReason,o=o.concat(wp(n.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=25)x=!0,R="maxretry",o=o.concat(wp(n.serverSyncTree_,E.currentWriteId,!0));else{const F=nP(n,E.path,d);E.currentInputSnapshot=F;const q=e[m].update(F.val());if(void 0!==q){bb("transaction failed: Data returned ",q,E.path);let ee=ar(q);"object"==typeof q&&null!=q&&(0,k.r3)(q,".priority")||(ee=ee.updatePriority(F.getPriority()));const ke=E.currentWriteId,St=Db(n),Et=qM(ee,F,St);E.currentOutputSnapshotRaw=ee,E.currentOutputSnapshotResolved=Et,E.currentWriteId=FS(n),d.splice(d.indexOf(ke),1),o=o.concat(VM(n.serverSyncTree_,E.path,Et,E.currentWriteId,E.applyLocally)),o=o.concat(wp(n.serverSyncTree_,ke,!0))}else x=!0,R="nodata",o=o.concat(wp(n.serverSyncTree_,E.currentWriteId,!0))}tu(n.eventQueue_,t,o),o=[],x&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===R?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(R),!1,null)))}VS(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)Xu(r[m]);LS(n,n.transactionQueueTree_)}(n,$O(n,t),r),r}function HO(n,e){let t,r=n.transactionQueueTree_;for(t=Nt(e);null!==t&&void 0===t_(r);)r=MS(r,t),t=Nt(e=In(e));return r}function $O(n,e){const t=[];return GO(n,e,t),t.sort((r,o)=>r.order-o.order),t}function GO(n,e,t){const r=t_(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);PS(e,o=>{GO(n,o,t)})}function VS(n,e){const t=t_(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,ZM(e,t.length>0?t:void 0)}PS(e,r=>{VS(n,r)})}function rP(n,e){const t=wb(HO(n,e)),r=MS(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{iP(n,o)}),iP(n,r),NO(r,o=>{iP(n,o)}),t}function iP(n,e){const t=t_(e);if(t){const r=[];let o=[],l=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,k.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,t[d].status=3,t[d].abortReason="set"):((0,k.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(wp(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?ZM(e,void 0):t.length=l+1,tu(n.eventQueue_,wb(e),o);for(let d=0;d<r.length;d++)Xu(r[d])}}const sP=function(n,e){const t=MV(n),r=t.namespace;return"firebase.com"===t.domain&&Qu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Wm(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new mn(t.pathString)}},MV=function(n){let e="",t="",r="",o="",l="",d=!0,m="https",E=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(m=n.substring(0,b-1),n=n.substring(b+2));let x=n.indexOf("/");-1===x&&(x=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(x,R)),x<R&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(l){}e+="/"+o}return e}(n.substring(x,R)));const F=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));b=e.indexOf(":"),b>=0?(d="https"===m||"wss"===m,E=parseInt(e.substring(b+1),10)):b=e.length;const q=e.slice(0,b);if("localhost"===q.toLowerCase())t="localhost";else if(q.split(".").length<=2)t=q;else{const ee=e.indexOf(".");r=e.substring(0,ee).toLowerCase(),t=e.substring(ee+1),l=r}"ns"in F&&(l=F.ns)}return{host:e,port:E,domain:t,subdomain:r,secure:d,scheme:m,pathString:o,namespace:l}};class qO{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class WO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ZO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return CV(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){eu("OnDisconnect.remove",this._path);const e=new k.BH;return BO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){eu("OnDisconnect.set",this._path),cc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return BO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){eu("OnDisconnect.setWithPriority",this._path),cc("OnDisconnect.setWithPriority",e,this._path,!1),QM("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function(n,e,t,r,o){const l=ar(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(d,m)=>{"ok"===d&&Xv(n.onDisconnect_,e,l),Cp(0,o,d,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){eu("OnDisconnect.update",this._path),PO("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function(n,e,t,r){if((0,k.xb)(t))return Vr("onDisconnect().update() called with empty data.  Don't do anything."),void Cp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&fi(t,(d,m)=>{const E=ar(m);Xv(n.onDisconnect_,u(e,d),E)}),Cp(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class wo{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return c(this._path)?null:fS(this._path)}get ref(){return new nu(this._repo,this._path)}get _queryIdentifier(){const e=Xk(this._queryParams),t=JC(e);return"{}"===t?"default":t}get _queryObject(){return Xk(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof wo))return!1;const t=this._repo===e._repo,r=v(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function US(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Eo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ju)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Ja)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Bn){if(null!=e&&!Cb(e)||null!=t&&!Cb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof _M||n.getIndex()===yM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function BS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nu extends wo{constructor(e,t){super(e,t,new gS,!1)}get parent(){const e=a(this._path);return null===e?null:new nu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class n_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new mn(e),r=r_(this.ref,e);return new n_(this._node.getChild(t),r,Bn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new n_(o,r_(this.ref,r),Bn)))}hasChild(e){const t=new mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KO(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?r_(n._root,e):n._root}function YO(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=sP(e,n._repo.repoInfo_.nodeAdmin);kO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Qu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),KO(n,t.path.toString())}function r_(n,e){return null===Nt((n=(0,k.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tb("child","path",t,!1)):Tb("child","path",e,!1),new nu(n._repo,u(n._path,e));var t}function oP(n,e){n=(0,k.m9)(n),eu("set",n._path),cc("set",e,n._path,!1);const t=new k.BH;return eP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function LV(n,e){PO("update",e,n._path,!1);const t=new k.BH;return function(n,e,t,r){rE(n,"update",{path:e.toString(),value:t});let o=!0;const l=Db(n),d={};if(fi(t,(m,E)=>{o=!1,d[m]=xO(u(e,m),ar(E),n.serverSyncTree_,l)}),o)Vr("update() called with empty data.  Don't do anything."),Cp(0,r,"ok",void 0);else{const m=FS(n),E=function(n,e,t,r){!function(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=xM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=jn.fromObject(t);return nE(n,new eE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,d,m);OS(n.eventQueue_,E),n.server_.merge(e.toString(),t,(b,x)=>{const R="ok"===b;R||gs("update at "+e+" failed: "+b);const F=wp(n.serverSyncTree_,m,!R),q=F.length>0?iE(n,e):e;tu(n.eventQueue_,q,F),Cp(0,r,b,x)}),fi(t,b=>{const x=rP(n,u(e,b));iE(n,x)}),tu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function VV(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,x)=>{const R=h(b,t);r=r||vp(x,R)});let o=n.syncPointTree_.get(t);o?r=r||vp(o,nn()):(o=new yO,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,d=l?new _p(r,!0,!1):null;return function(n){return wS(n.viewCache_)}(vO(o,e,CS(n.pendingWriteTree_,e._path),l?d.getNode():At.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=ar(r).withIndex(e._queryParams.getIndex()),l=vb(n.serverSyncTree_,e._path,o);return JM(n.eventQueue_,e._path,l),Promise.resolve(o)},r=>(rE(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new n_(e,new nu(n._repo,n._path),n._queryParams.getIndex()))}class jS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new qO("value",this,new n_(e.snapshotNode,new nu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WO(this,e,t):null}matches(e){return e instanceof jS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WO(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=r_(new nu(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new qO(e.type,this,new n_(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof HS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ab(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const E=t,b=(x,R)=>{tP(n._repo,n,m),E(x,R)};b.userCallback=t.userCallback,b.context=t.context,t=b}const d=new zO(t,l||void 0),m="value"===e?new jS(d):new HS(e,d);return function(n,e,t){let r;r=".info"===Nt(e._path)?IO(n.infoSyncTree_,e,t):IO(n.serverSyncTree_,e,t),JM(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>tP(n._repo,n,m)}function aP(n,e,t,r){return Ab(n,"value",e,t,r)}function QO(n,e,t,r){return Ab(n,"child_added",e,t,r)}function JO(n,e,t,r){return Ab(n,"child_changed",e,t,r)}function XO(n,e,t,r){return Ab(n,"child_moved",e,t,r)}function e1(n,e,t,r){return Ab(n,"child_removed",e,t,r)}function t1(n,e,t){let r=null;const o=t?new zO(t):null;"value"===e?r=new jS(o):e&&(r=new HS(e,o)),tP(n._repo,n,r)}class il{}class n1 extends il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("endAt",this._value,e._path,!0);const t=CM(e._queryParams,this._value,this._key);if(BS(t),bp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class BV extends il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Eo?("string"==typeof e&&(e=Yk(e)),o=CM(n,e,t)):(r=null==t?Ju:Yk(t),o=CM(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(BS(t),bp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class r1 extends il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("startAt",this._value,e._path,!0);const t=wM(e._queryParams,this._value,this._key);if(BS(t),bp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class $V extends il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){cc("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Eo)"string"==typeof e&&(e=Kk(e)),r=wM(n,e,t);else{let o;o=null==t?Ja:Kk(t),r=wM(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(BS(t),bp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wo(e._repo,e._path,t,e._orderByCalled)}}class qV extends il{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class zV extends il{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class KV extends il{constructor(e){super(),this._path=e}_apply(e){US(e,"orderByChild");const t=new mn(this._path);if(c(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _M(t),o=mS(e._queryParams,r);return bp(o),new wo(e._repo,e._path,o,!0)}}class QV extends il{_apply(e){US(e,"orderByKey");const t=mS(e._queryParams,Eo);return bp(t),new wo(e._repo,e._path,t,!0)}}class XV extends il{_apply(e){US(e,"orderByPriority");const t=mS(e._queryParams,Bn);return bp(t),new wo(e._repo,e._path,t,!0)}}class tU extends il{_apply(e){US(e,"orderByValue");const t=mS(e._queryParams,yM);return bp(t),new wo(e._repo,e._path,t,!0)}}class rU extends il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(cc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new n1(this._value,this._key)._apply(new r1(this._value,this._key)._apply(e))}}function sl(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,k.hu)(!DS,"__referenceConstructor has already been defined"),DS=n})(nu),function(n){(0,k.hu)(!SS,"__referenceConstructor has already been defined"),SS=n}(nu);const uP={};function s1(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let E,b,d=sP(l,o),m=d.repoInfo;"undefined"!=typeof process&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(E=!0,l=`http://${b}?ns=${m.namespace}`,d=sP(l,o),m=d.repoInfo):E=!d.repoInfo.secure;const x=o&&E?new Hm(Hm.OWNER):new tM(n.name,n.options,e);kO("Invalid Firebase Database URL",d),c(d.path)||Qu("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function(n,e,t,r){let o=uP[e.name];o||(o={},uP[e.name]=o);let l=o[n.toURLString()];return l&&Qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new mV(n,false,t,r),o[n.toURLString()]=l,l}(m,n,x,new GA(n.name,t));return new cU(R,n)}class cU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=rb(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new _S(n.repoInfo_,(r,o,l,d)=>{VO(n,r,o,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>UO(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qr(n.repoInfo_,e,(r,o,l,d)=>{VO(n,r,o,l,d)},r=>{UO(n,r)},r=>{!function(n,e){fi(e,(t,r)=>{XM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return nb[t]||(nb[t]=e()),nb[t]}(n.repoInfo_,()=>new tL(n.stats_,n.server_)),n.infoData_=new YF,n.infoSyncTree_=new bO({startListening:(r,o,l,d)=>{let m=[];const E=n.infoData_.getNode(r._path);return E.isEmpty()||(m=vb(n.infoSyncTree_,r._path,E),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),XM(n,"connected",!1),n.serverSyncTree_=new bO({startListening:(r,o,l,d)=>(n.server_.listen(r,l,o,(m,E)=>{const b=d(m,E);tu(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nu(this._repo,nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=uP[e];(!t||t[n.key]!==n)&&Qu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Qu("Cannot call "+e+" on a deleted database.")}}function pU(n,e){up(n,e)}class vU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Qr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Qr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},VA(wi.SDK_VERSION),(0,wi._registerComponent)(new ao.wA("database",(e,{instanceIdentifier:t})=>s1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,wi.registerVersion)(ZN,"0.12.4",void 0),(0,wi.registerVersion)(ZN,"0.12.4","esm2017");const bU=new qi.Yd("@firebase/database-compat"),o1=function(n){bU.warn("FIREBASE WARNING: "+n)};class DU{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,o1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class AU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ip{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Tb("DataSnapshot.child","path",e,!1),new Ip(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Tb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ip(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new na(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const d=Xi.getCancelAndContextArgs_("Query.on",r,o),m=(b,x)=>{t.call(d.context,new Ip(this.database,b),x)};m.userCallback=t,m.context=d.context;const E=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(e){case"value":return aP(this._delegate,m,E),t;case"child_added":return QO(this._delegate,m,E),t;case"child_removed":return e1(this._delegate,m,E),t;case"child_changed":return JO(this._delegate,m,E),t;case"child_moved":return XO(this._delegate,m,E),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,t1(this._delegate,e,o)}else t1(this._delegate,e)}get(){return VV(this._delegate).then(e=>new Ip(this.database,e))}once(e,t,r,o){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const l=Xi.getCancelAndContextArgs_("Query.once",r,o),d=new k.BH,m=(b,x)=>{const R=new Ip(this.database,b);t&&t.call(l.context,R,x),d.resolve(R)};m.userCallback=t,m.context=l.context;const E=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(e){case"value":aP(this._delegate,m,E,{onlyOnce:!0});break;case"child_added":QO(this._delegate,m,E,{onlyOnce:!0});break;case"child_removed":e1(this._delegate,m,E,{onlyOnce:!0});break;case"child_changed":JO(this._delegate,m,E,{onlyOnce:!0});break;case"child_moved":XO(this._delegate,m,E,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Xi(this.database,sl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qV(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Xi(this.database,sl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new zV(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Xi(this.database,sl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Tb("orderByChild","path",n,!1),new KV(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Xi(this.database,sl(this._delegate,new QV))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Xi(this.database,sl(this._delegate,new XV))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Xi(this.database,sl(this._delegate,new tU))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Xi(this.database,sl(this._delegate,function(n=null,e){return Ib("startAt","key",e,!0),new r1(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Xi(this.database,sl(this._delegate,function(n,e){return Ib("startAfter","key",e,!0),new $V(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Xi(this.database,sl(this._delegate,function(n,e){return Ib("endAt","key",e,!0),new n1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Xi(this.database,sl(this._delegate,function(n,e){return Ib("endBefore","key",e,!0),new BV(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Xi(this.database,sl(this._delegate,function(n,e){return Ib("equalTo","key",e,!0),new rU(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Xi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,k.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,k.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new na(this.database,new nu(this._delegate._repo,this._delegate._path))}}class na extends Xi{constructor(e,t){super(e,new wo(t._repo,t._path,new gS,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new na(this.database,r_(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new na(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new na(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=oP(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,o1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eu("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=LV(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(eu("setWithPriority",n._path),cc("setWithPriority",e,n._path,!1),QM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return eP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return eu("remove",n._path),oP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,k.m9)(n),eu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new k.BH,m=aP(n,()=>{});return function(n,e,t,r,o,l){rE(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:UA(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=nP(n,e,void 0);d.currentInputSnapshot=m;const E=d.update(m.val());if(void 0===E)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{bb("transaction failed: Data returned ",E,d.path),d.status=0;const b=MS(n.transactionQueueTree_,e),x=t_(b)||[];let R;x.push(d),ZM(b,x),"object"==typeof E&&null!==E&&(0,k.r3)(E,".priority")?(R=(0,k.DV)(E,".priority"),(0,k.hu)(Cb(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(xS(n.serverSyncTree_,e)||At.EMPTY_NODE).getPriority().val();const F=Db(n),q=ar(E,R),ee=qM(q,m,F);d.currentOutputSnapshotRaw=q,d.currentOutputSnapshotResolved=ee,d.currentWriteId=FS(n);const Ae=VM(n.serverSyncTree_,e,ee,d.currentWriteId,d.applyLocally);tu(n.eventQueue_,e,Ae),LS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(E,b,x)=>{let R=null;E?l.reject(E):(R=new n_(x,new nu(n._repo,n._path),Bn),l.resolve(new vU(b,R)))},m,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new AU(l.committed,new Ip(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),eu("setPriority",n._path),QM("setPriority",e,!1);const t=new k.BH;return eP(n._repo,u(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),eu("push",n._path),cc("push",e,n._path,!0);const t=LO(n._repo),r=HF(t),o=r_(n,r),l=r_(n,r);let d;return d=null!=e?oP(l,e).then(()=>l):Promise.resolve(l),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}(this._delegate,e),o=r.then(d=>new na(this.database,d));t&&o.then(()=>t(null),d=>t(d));const l=new na(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return eu("Reference.onDisconnect",this._delegate._path),new DU(new ZO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Sb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Qu("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Hm(Hm.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);l=new Hm(d)}!function(n,e,t,r){n.repoInfo_=new Wm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof na){const t=YO(this._delegate,e.toString());return new na(this,t)}{const t=KO(this._delegate,e);return new na(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=YO(this._delegate,e);return new na(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),jO(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(FO)}(n._repo)}(this._delegate)}}Sb.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var xU=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){VA(t);const d=new ao.zt("auth-internal",new ao.H0("database-standalone"));return d.setComponent(new ao.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Sb(s1(n,d,void 0,e,l),n),namespace:o}}});const RU=Sb.ServerValue;function a1(n){return null==n}function u1(n){return"function"==typeof n.set}function l1(n,e){return u1(e)?e:n.ref(e)}function c1(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(u1(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function xb(n,e,t="on",r=F_.z){return new _n.y(o=>{let l=null;return l=n[t](e,(d,m)=>{r.schedule(()=>{o.next({snapshot:d,prevKey:m})}),"once"===t&&r.schedule(()=>o.complete())},d=>{r.schedule(()=>o.error(d))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,st.U)(o=>{const{snapshot:l,prevKey:d}=o;let m=null;return l.exists()&&(m=l.key),{type:e,payload:l,prevKey:d,key:m}}),(0,Lk.B)())}function d1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function FU(n,e){const{payload:t,prevKey:r,key:o}=e,l=d1(n,o),d=function(n,e){if(a1(e))return 0;{const t=d1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(E=>{const b={payload:E,type:"value",prevKey:m,key:E.key};return m=E.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const m=n[l-1];(m&&m.key||null)!==r&&(n=n.filter(E=>E.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===o?e:m);case"child_moved":if(l>-1){const m=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,m),n}return n;default:return n}}function h1(n){return(a1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function f1(n,e,t){return function(n,e,t){return xb(n,"value","once",t).pipe(Kr(r=>{const o=[(0,rt.of)(r)];return e.forEach(l=>o.push(xb(n,l,"on",t))),(0,bC.T)(...o).pipe(Vo(FU,[]))}),og())}(n,e=h1(e),t)}function p1(n,e,t){const r=(e=h1(e)).map(o=>xb(n,o,"on",t));return(0,bC.T)(...r)}function g1(n,e){return function(r,o){return c1(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function BU(n){return function(t){return t?c1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function m1(n,e){return function(){return xb(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new ao.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Sb(o,r)},"PUBLIC").setServiceProps({Reference:na,Query:Xi,Database:Sb,DataSnapshot:Ip,enableLogging:pU,INTERNAL:xU,ServerValue:RU}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.4")}(Ph.Z);const $U=new f.OlP("angularfire2.realtimeDatabaseURL"),GU=new f.OlP("angularfire2.database.use-emulator");let qU=(()=>{class n{constructor(t,r,o,l,d,m,E,b,x,R,F,q,ee,Ae,ke){this.schedulers=m;const St=E,Et=(0,si.on)(t,d,r);b&&WC(Et,d,x,F,q,ee,R,Ae),this.database=(0,si.cc)(`${Et.name}.database.${o}`,"AngularFireDatabase",Et.name,()=>{const dn=d.runOutsideAngular(()=>Et.database(o||void 0));return St&&dn.useEmulator(...St),dn},[St])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>l1(this.database,t));let l=o;return r&&(l=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:g1(r,"update"),set:g1(r,"set"),push:o=>r.push(o),remove:BU(r),snapshotChanges:o=>f1(n,o,t).pipe(pn.iC),stateChanges:o=>p1(n,o,t).pipe(pn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return xb(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new Vk(n,t))}}(e),(0,st.U)(([o,l])=>{const d=o.lastKeyToLoad,m=l.map(E=>E.key);return{actions:l,lastKeyToLoad:d,loadedKeys:m}}),function(n){return e=>e.lift(new zN(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,st.U)(o=>o.actions))}(n,p1(n,e).pipe(Vo((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(pn.iC),valueChanges:(o,l)=>f1(n,o,t).pipe((0,st.U)(m=>m.map(E=>l&&l.idField?Object.assign(Object.assign({},E.payload.val()),{[l.idField]:E.key}):E.payload.val())),pn.iC)}}(l,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>m1(n,e.schedulers.outsideAngular)().pipe(pn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>m1(n,e.schedulers.outsideAngular)().pipe(pn.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>l1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(si.Dh),f.LFG(si.xv,8),f.LFG($U,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(pn.HU),f.LFG(GU,8),f.LFG(ip,8),f.LFG(qC,8),f.LFG(Vm,8),f.LFG(wr,8),f.LFG(NA,8),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WU=(()=>{class n{constructor(){LN.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[qU]}),n})();class ol extends sc.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new YD.N;return this._value}next(e){super.next(this._value=e)}}var zU=U(6693);const _1={};class KU{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new YU(e,this.resultSelector))}}class YU extends OA{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(_1),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(FA(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,d=this.toRespond?o[r]===_1?--this.toRespond:this.toRespond:0;o[r]=t,0===d&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function y1(n){return new _n.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,fn.D)(t):(0,Yu.c)()).subscribe(e)})}var QU=U(2441);function i_(n){return function(t){const r=new JU(n),o=t.lift(r);return r.caught=o}}class JU{constructor(e){this.selector=e}call(e,t){return t.subscribe(new XU(e,this.selector,this.caught))}}class XU extends Ud.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Ud.IY(this);this.add(r);const o=(0,Ud.ft)(t,r);o!==r&&this.add(o)}}}var Bs=U(9773);function Rb(n,e){return(0,Bs.zg)(n,e,1)}function lP(n){return function(t){return 0===n?(0,Yu.c)():t.lift(new e2(n))}}class e2{constructor(e){if(this.total=e,this.total<0)throw new AC}call(e,t){return t.subscribe(new t2(e,this.total))}}class t2 extends Gi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let l=0;l<r;l++){const d=t++%r;e.next(o[d])}}e.complete()}}var ra=U(3342),r2=U(1307);class s2{constructor(e){this.callback=e}call(e,t){return t.subscribe(new o2(e,this.callback))}}class o2 extends Gi.L{constructor(e,t){super(e),this.add(new TC.w(t))}}class Wd{constructor(e,t){this.id=e,this.url=t}}class cP extends Wd{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nb extends Wd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class v1 extends Wd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class a2 extends Wd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class u2 extends Wd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l2 extends Wd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c2 extends Wd{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d2 extends Wd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h2 extends Wd{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E1{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class w1{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f2{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p2{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g2{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m2{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class _2{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sE(n){return new _2(n)}const b1="ngNavigationCancelingError";function dP(n){const e=Error("NavigationCancelingError: "+n);return e[b1]=!0,e}function v2(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],m=n[l];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function dc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!I1(n[o],e[o]))return!1;return!0}function I1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function T1(n){return Array.prototype.concat.apply([],n)}function D1(n){return n.length>0?n[n.length-1]:null}function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hc(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,fn.D)(Promise.resolve(n)):(0,rt.of)(n)}const C2={exact:function x1(n,e,t){if(!o_(n.segments,e.segments)||!$S(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!x1(n.children[r],e.children[r],t))return!1;return!0},subset:R1},A1={exact:function(n,e){return dc(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>I1(n[t],e[t]))},ignored:()=>!0};function S1(n,e,t){return C2[t.paths](n.root,e.root,t.matrixParams)&&A1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R1(n,e,t){return N1(n,e,e.segments,t)}function N1(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!o_(o,t)||e.hasChildren()||!$S(o,t,r))}if(n.segments.length===t.length){if(!o_(n.segments,t)||!$S(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!R1(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(o_(n.segments,o)&&$S(n.segments,o,r)&&n.children[jt])&&N1(n.children[jt],e,l,r)}}function $S(n,e,t){return e.every((r,o)=>A1[t](n[o].parameters,r.parameters))}class s_{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sE(this.queryParams)),this._queryParamMap}toString(){return A2.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,es(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return GS(this)}}class Mb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sE(this.parameters)),this._parameterMap}toString(){return O1(this)}}function o_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class hP{}class M1{parse(e){const t=new F2(e);return new s_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${Pb(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${qS(t)}=${qS(o)}`).join("&"):`${qS(t)}=${qS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const A2=new M1;function GS(n){return n.segments.map(e=>O1(e)).join("/")}function Pb(n,e){if(!n.hasChildren())return GS(n);if(e){const t=n.children[jt]?Pb(n.children[jt],!1):"",r=[];return es(n.children,(o,l)=>{l!==jt&&r.push(`${l}:${Pb(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return es(n.children,(r,o)=>{o===jt&&(t=t.concat(e(r,o)))}),es(n.children,(r,o)=>{o!==jt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===jt?[Pb(n.children[jt],!1)]:[`${o}:${Pb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${GS(n)}/${t[0]}`:`${GS(n)}/(${t.join("//")})`}}function P1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qS(n){return P1(n).replace(/%3B/gi,";")}function fP(n){return P1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function WS(n){return decodeURIComponent(n)}function k1(n){return WS(n.replace(/\+/g,"%20"))}function O1(n){return`${fP(n.path)}${function(n){return Object.keys(n).map(e=>`;${fP(e)}=${fP(n[e])}`).join("")}(n.parameters)}`}const N2=/^[^\/()?;=#]+/;function zS(n){const e=n.match(N2);return e?e[0]:""}const M2=/^[^=?&#]+/,k2=/^[^?&#]+/;class F2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Zt(e,t)),r}parseSegment(){const e=zS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Mb(WS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zS(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=zS(this.remaining);o&&(r=o,this.capture(r))}e[WS(t)]=WS(r)}parseQueryParam(e){const t=function(n){const e=n.match(M2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(k2);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=k1(t),l=k1(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zS(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=jt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[jt]:new Zt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class F1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=pP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return gP(e,this._root).map(t=>t.value)}}function pP(n,e){if(n===e.value)return e;for(const t of e.children){const r=pP(n,t);if(r)return r}return null}function gP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gP(n,t);if(r.length)return r.unshift(e),r}return[]}class zd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kb(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class L1 extends F1{constructor(e,t){super(e),this.snapshot=t,mP(this,e)}toString(){return this.snapshot.toString()}}function V1(n,e){const t=function(n,e){const d=new ZS([],{},{},"",{},jt,e,null,n.root,-1,{});return new B1("",new zd(d,[]))}(n,e),r=new ol([new Mb("",{})]),o=new ol({}),l=new ol({}),d=new ol({}),m=new ol(""),E=new oE(r,o,d,m,l,jt,e,t.root);return E.snapshot=t.root,new L1(new zd(E,[]),t)}class oE{constructor(e,t,r,o,l,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>sE(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>sE(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function U1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ZS{constructor(e,t,r,o,l,d,m,E,b,x,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=b,this._lastPathIndex=x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sE(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sE(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class B1 extends F1{constructor(e,t){super(t),this.url=e,mP(this,t)}toString(){return j1(this._root)}}function mP(n,e){e.value._routerState=n,e.children.forEach(t=>mP(n,t))}function j1(n){const e=n.children.length>0?` { ${n.children.map(j1).join(", ")} } `:"";return`${n.value}${e}`}function _P(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),dc(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),dc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yP(n,e){return dc(n.params,e.params)&&function(n,e){return o_(n,e)&&n.every((t,r)=>dc(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||yP(n.parent,e.parent))}function KS(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return KS(n,r,o);return KS(n,r)})}(n,e,t);return new zd(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return H1(e,d),d}}const r=function(n){return new oE(new ol(n.url),new ol(n.params),new ol(n.queryParams),new ol(n.fragment),new ol(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>KS(n,l));return new zd(r,o)}}function H1(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)H1(n.children[t],e.children[t])}function YS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ob(n){return"object"==typeof n&&null!=n&&n.outlets}function vP(n,e,t,r,o){let l={};return r&&es(r,(d,m)=>{l[m]=Array.isArray(d)?d.map(E=>`${E}`):`${d}`}),new s_(t.root===n?e:$1(t.root,n,e),l,o)}function $1(n,e,t){const r={};return es(n.children,(o,l)=>{r[l]=o===e?t:$1(o,e,t)}),new Zt(n.segments,r)}class G1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&YS(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Ob);if(o&&o!==D1(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class EP{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function q1(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return QS(n,e,t);const r=function(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],m=t[r];if(Ob(m))break;const E=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!z1(E,b,d))return l;r+=2}else{if(!z1(E,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Zt(n.segments.slice(0,r.pathIndex),{});return l.children[jt]=new Zt(n.segments.slice(r.pathIndex),n.children),QS(l,0,o)}return r.match&&0===o.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?wP(n,e,t):r.match?QS(n,0,o):wP(n,e,t)}function QS(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function(n){return Ob(n[0])?n[0].outlets:{[jt]:n}}(t),o={};return es(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=q1(n.children[d],e,l))}),es(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new Zt(n.segments,o)}}function wP(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Ob(l)){const E=Z2(l.outlets);return new Zt(r,E)}if(0===o&&YS(t[0])){r.push(new Mb(n.segments[e].path,W1(t[0]))),o++;continue}const d=Ob(l)?l.outlets[jt]:`${l}`,m=o<t.length-1?t[o+1]:null;d&&m&&YS(m)?(r.push(new Mb(d,W1(m))),o+=2):(r.push(new Mb(d,{})),o++)}return new Zt(r,{})}function Z2(n){const e={};return es(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wP(new Zt([],{}),0,t))}),e}function W1(n){const e={};return es(n,(t,r)=>e[r]=`${t}`),e}function z1(n,e,t){return n==t.path&&dc(e,t.parameters)}class Y2{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_P(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=kb(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),es(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=kb(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=kb(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new m2(l.value.snapshot))}),e.children.length&&this.forwardEvent(new p2(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(_P(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Z1(m.route)}else{const m=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function Z1(n){_P(n.value),n.children.forEach(Z1)}class CP{constructor(e,t){this.routes=e,this.module=t}}function Tp(n){return"function"==typeof n}function a_(n){return n instanceof s_}const Fb=Symbol("INITIAL_VALUE");function Lb(){return Kr(n=>function(...n){let e,t;return(0,Wr.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Mo.k)(n[0])&&(n=n[0]),(0,zU.n)(n,t).lift(new KU(e))}(n.map(e=>e.pipe(Tv(1),Bl(Fb)))).pipe(Vo((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==Fb?o:(l===Fb&&(r=!0),r||!1!==l&&d!==t.length-1&&!a_(l)?o:l),e)},Fb),Uo(e=>e!==Fb),(0,st.U)(e=>a_(e)?e:!0===e),Tv(1)))}let K1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[xP]},encapsulation:2}),n})();function Y1(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];rB(r,iB(e,r))}}function rB(n,e){n.children&&Y1(n.children,e)}function iB(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function bP(n){const e=n.children&&n.children.map(bP),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=K1),t}function ru(n){return n.outlet||jt}function Q1(n,e){const t=n.filter(r=>ru(r)===e);return t.push(...n.filter(r=>ru(r)!==e)),t}const J1={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function JS(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},J1):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||v2)(t,n,e);if(!l)return Object.assign({},J1);const d={};es(l.posParams,(E,b)=>{d[b]=E.path});const m=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function XS(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>ex(n,e,r)&&ru(r)!==jt)}(n,t,r)){const d=new Zt(e,function(n,e,t,r){const o={};o[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&ru(l)!==jt){const d=new Zt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ru(l)]=d}return o}(n,e,r,new Zt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>ex(n,e,r))}(n,t,r)){const d=new Zt(n.segments,function(n,e,t,r,o,l){const d={};for(const m of r)if(ex(n,t,m)&&!o[ru(m)]){const E=new Zt([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[ru(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new Zt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function ex(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function X1(n,e,t,r){return!!(ru(n)===r||r!==jt&&ex(e,t,n))&&("**"===n.path||JS(e,n,t).matched)}function eF(n,e,t){return 0===e.length&&!n.children[t]}class Vb{constructor(e){this.segmentGroup=e||null}}class tF{constructor(e){this.urlTree=e}}function tx(n){return new _n.y(e=>e.error(new Vb(n)))}function nF(n){return new _n.y(e=>e.error(new tF(n)))}function lB(n){return new _n.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class hB{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=XS(this.urlTree.root,[],[],this.config).segmentGroup,t=new Zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe((0,st.U)(l=>this.createUrlTree(IP(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(i_(l=>{if(l instanceof tF)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Vb?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe((0,st.U)(o=>this.createUrlTree(IP(o),e.queryParams,e.fragment))).pipe(i_(o=>{throw o instanceof Vb?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Zt([],{[jt]:e}):e;return new s_(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(l=>new Zt([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,fn.D)(o).pipe(Rb(l=>{const d=r.children[l],m=Q1(t,l);return this.expandSegmentGroup(e,m,d,l).pipe((0,st.U)(E=>({segment:E,outlet:l})))}),Vo((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Uo((o,l)=>n(o,l,r)):RC.y,lP(1),t?SC(e):xC(()=>new Iv))}())}expandSegment(e,t,r,o,l,d){return(0,fn.D)(r).pipe(Rb(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,d).pipe(i_(b=>{if(b instanceof Vb)return(0,rt.of)(null);throw b}))),oc(m=>!!m),i_((m,E)=>{if(m instanceof Iv||"EmptyError"===m.name){if(eF(t,o,l))return(0,rt.of)(new Zt([],{}));throw new Vb(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,d,m){return X1(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):tx(t):tx(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nF(l):this.lineralizeSegments(r,l).pipe((0,Bs.zg)(d=>{const m=new Zt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:m,consumedSegments:E,lastChild:b,positionalParamSegments:x}=JS(t,o,l);if(!m)return tx(t);const R=this.applyRedirectCommands(E,o.redirectTo,x);return o.redirectTo.startsWith("/")?nF(R):this.lineralizeSegments(o,R).pipe((0,Bs.zg)(F=>this.expandSegment(e,t,r,F.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,rt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,st.U)(F=>(r._loadedConfig=F,new Zt(o,{})))):(0,rt.of)(new Zt(o,{}));const{matched:d,consumedSegments:m,lastChild:E}=JS(t,r,o);if(!d)return tx(t);const b=o.slice(E);return this.getChildConfig(e,r,o).pipe((0,Bs.zg)(R=>{const F=R.module,q=R.routes,{segmentGroup:ee,slicedSegments:Ae}=XS(t,m,b,q),ke=new Zt(ee.segments,ee.children);if(0===Ae.length&&ke.hasChildren())return this.expandChildren(F,q,ke).pipe((0,st.U)(Lt=>new Zt(m,Lt)));if(0===q.length&&0===Ae.length)return(0,rt.of)(new Zt(m,{}));const St=ru(r)===l;return this.expandSegment(F,ke,q,Ae,St?jt:l,!0).pipe((0,st.U)(dn=>new Zt(m.concat(dn.segments),dn.children)))}))}getChildConfig(e,t,r){return t.children?(0,rt.of)(new CP(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,rt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Bs.zg)(o=>o?this.configLoader.load(e.injector,t).pipe((0,st.U)(l=>(t._loadedConfig=l,l))):function(n){return new _n.y(e=>e.error(dP(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,rt.of)(new CP([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,rt.of)(!0);const l=o.map(d=>{const m=e.get(d);let E;if(function(n){return n&&Tp(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Tp(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return hc(E)});return(0,rt.of)(l).pipe(Lb(),(0,ra.b)(d=>{if(!a_(d))return;const m=dP(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,st.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,rt.of)(r);if(o.numberOfChildren>1||!o.children[jt])return lB(e.redirectTo);o=o.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new s_(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return es(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return es(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Zt(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function IP(n){const e={};for(const r of Object.keys(n.children)){const l=IP(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}class rF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nx{constructor(e,t){this.component=e,this.route=t}}function gB(n,e,t){const r=n._root;return Ub(r,e?e._root:null,t,[r.value])}function rx(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ub(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=kb(e);return n.children.forEach(d=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const E=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!o_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!o_(n.url,e.url)||!dc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yP(n,e)||!dc(n.queryParams,e.queryParams);case"paramsChange":default:return!yP(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new rF(r)):(l.data=d.data,l._resolvedData=d._resolvedData),Ub(n,e,l.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new nx(m.outlet.component,d))}else d&&Bb(e,m,o),o.canActivateChecks.push(new rF(r)),Ub(n,null,l.component?m?m.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),es(l,(d,m)=>Bb(d,t.getContext(m),o)),o}function Bb(n,e,t){const r=kb(n),o=n.value;es(r,(l,d)=>{Bb(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new nx(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class SB{}function iF(n){return new _n.y(e=>e.error(n))}class RB{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=XS(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const r=new ZS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new zd(r,t),l=new B1(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=U1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],m=Q1(e,l),E=this.processSegmentGroup(m,d,l);if(null===E)return null;r.push(...E)}const o=sF(r);return function(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return eF(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!X1(e,t,r,o))return null;let l,d=[],m=[];if("**"===e.path){const q=r.length>0?D1(r).parameters:{};l=new ZS(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uF(e),ru(e),e.component,e,oF(t),aF(t)+r.length,lF(e))}else{const q=JS(t,e,r);if(!q.matched)return null;d=q.consumedSegments,m=r.slice(q.lastChild),l=new ZS(d,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uF(e),ru(e),e.component,e,oF(t),aF(t)+d.length,lF(e))}const E=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:x}=XS(t,d,m,E.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===x.length&&b.hasChildren()){const q=this.processChildren(E,b);return null===q?null:[new zd(l,q)]}if(0===E.length&&0===x.length)return[new zd(l,[])];const R=ru(e)===o,F=this.processSegment(E,b,x,R?jt:o);return null===F?null:[new zd(l,F)]}}function PB(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sF(n){const e=[],t=new Set;for(const r of n){if(!PB(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=sF(r.children);e.push(new zd(r.value,o))}return e.filter(r=>!t.has(r))}function oF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function aF(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function uF(n){return n.data||{}}function lF(n){return n.resolve||{}}function TP(n){return Kr(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,st.U)(()=>e)):(0,rt.of)(e)})}class jB extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const DP=new f.OlP("ROUTES");class cF{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,st.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new CP(T1(d.injector.get(DP,void 0,f.XFs.Self|f.XFs.Optional)).map(bP),d)}),i_(l=>{throw t._loader$=void 0,l}));return t._loader$=new QU.c(o,()=>new sc.xQ).pipe((0,r2.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,fn.D)(this.loader.load(e)):hc(e()).pipe((0,Bs.zg)(t=>t instanceof f.YKP?(0,rt.of)(t):(0,fn.D)(this.compiler.compileModuleAsync(t))))}}class HB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aE,this.attachRef=null}}class aE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new HB,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class GB{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qB(n){throw n}function WB(n,e,t){return e.parse("/")}function dF(n,e){return(0,rt.of)(null)}const zB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Co=(()=>{class n{constructor(t,r,o,l,d,m,E,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sc.xQ,this.errorHandler=qB,this.malformedUriErrorHandler=WB,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dF,afterPreactivation:dF},this.urlHandlingStrategy=new GB,this.routeReuseStrategy=new jB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const F=d.get(f.R0b);this.isNgZoneEnabled=F instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new s_(new Zt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cF(m,E,q=>this.triggerEvent(new E1(q)),q=>this.triggerEvent(new w1(q))),this.routerState=V1(this.currentUrlTree,this.rootComponentType),this.transitions=new ol({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Uo(o=>0!==o.id),(0,st.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Kr(o=>{let l=!1,d=!1;return(0,rt.of)(o).pipe((0,ra.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Kr(m=>{const E=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ix(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,rt.of)(m).pipe(Kr(R=>{const F=this.transitions.getValue();return r.next(new cP(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),F!==this.transitions.getValue()?Yu.E:Promise.resolve(R)}),function(n,e,t,r){return Kr(o=>function(n,e,t,r,o){return new hB(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,st.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ra.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function(n,e,t,r,o){return(0,Bs.zg)(l=>function(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new RB(n,e,t,r,o,l).recognize();return null===d?iF(new SB):(0,rt.of)(d)}catch(d){return iF(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,st.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ra.b)(R=>{"eager"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(R.urlAfterRedirects,R),this.browserUrlTree=R.urlAfterRedirects);const F=new u2(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:q,source:ee,restoredState:Ae,extras:ke}=m,St=new cP(F,this.serializeUrl(q),ee,Ae);r.next(St);const Et=V1(q,this.rootComponentType).snapshot;return(0,rt.of)(Object.assign(Object.assign({},m),{targetSnapshot:Et,urlAfterRedirects:q,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),Yu.E}),TP(m=>{const{targetSnapshot:E,id:b,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:F,replaceUrl:q}}=m;return this.hooks.beforePreactivation(E,{navigationId:b,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!F,replaceUrl:!!q})}),(0,ra.b)(m=>{const E=new l2(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,st.U)(m=>Object.assign(Object.assign({},m),{guards:gB(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Bs.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?(0,rt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,fn.D)(n).pipe((0,Bs.zg)(o=>function(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,rt.of)(!0);const d=l.map(m=>{const E=rx(m,e,o);let b;if(function(n){return n&&Tp(n.canDeactivate)}(E))b=hc(E.canDeactivate(n,e,t,r));else{if(!Tp(E))throw new Error("Invalid CanDeactivate guard");b=hc(E(n,e,t,r))}return b.pipe(oc())});return(0,rt.of)(d).pipe(Lb())}(o.component,o.route,t,e,r)),oc(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Bs.zg)(m=>m&&function(n){return"boolean"==typeof n}(m)?function(n,e,t,r){return(0,fn.D)(e).pipe(Rb(o=>oo(function(n,e){return null!==n&&e&&e(new f2(n)),(0,rt.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new g2(n)),(0,rt.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>y1(()=>{const m=d.guards.map(E=>{const b=rx(E,d.node,t);let x;if(function(n){return n&&Tp(n.canActivateChild)}(b))x=hc(b.canActivateChild(r,n));else{if(!Tp(b))throw new Error("Invalid CanActivateChild guard");x=hc(b(r,n))}return x.pipe(oc())});return(0,rt.of)(m).pipe(Lb())}));return(0,rt.of)(l).pipe(Lb())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,rt.of)(!0);const o=r.map(l=>y1(()=>{const d=rx(l,e,t);let m;if(function(n){return n&&Tp(n.canActivate)}(d))m=hc(d.canActivate(e,n));else{if(!Tp(d))throw new Error("Invalid CanActivate guard");m=hc(d(e,n))}return m.pipe(oc())}));return(0,rt.of)(o).pipe(Lb())}(n,o.route,t))),oc(o=>!0!==o,!0))}(r,l,n,e):(0,rt.of)(m)),(0,st.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ra.b)(m=>{if(a_(m.guardsResult)){const b=dP(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const E=new c2(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Uo(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),TP(m=>{if(m.guards.canActivateChecks.length)return(0,rt.of)(m).pipe((0,ra.b)(E=>{const b=new d2(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}),Kr(E=>{let b=!1;return(0,rt.of)(E).pipe(function(n,e){return(0,Bs.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,rt.of)(t);let l=0;return(0,fn.D)(o).pipe(Rb(d=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,rt.of)({});const l={};return(0,fn.D)(o).pipe((0,Bs.zg)(d=>function(n,e,t,r){const o=rx(n,e,r);return hc(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,ra.b)(m=>{l[d]=m}))),lP(1),(0,Bs.zg)(()=>Object.keys(l).length===o.length?(0,rt.of)(l):Yu.E))}(n._resolve,n,e,r).pipe((0,st.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),U1(n,t).resolve),null)))}(d.route,r,n,e)),(0,ra.b)(()=>l++),lP(1),(0,Bs.zg)(d=>l===o.length?(0,rt.of)(t):Yu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ra.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,ra.b)(E=>{const b=new h2(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}))}),TP(m=>{const{targetSnapshot:E,id:b,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:F,replaceUrl:q}}=m;return this.hooks.afterPreactivation(E,{navigationId:b,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!F,replaceUrl:!!q})}),(0,st.U)(m=>{const E=function(n,e,t){const r=KS(n,e._root,t?t._root:void 0);return new L1(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,ra.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new Y2(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ra.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new s2(n))}(()=>{var m;if(!l&&!d){const E=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,E)):this.cancelNavigationTransition(o,E)}(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),i_(m=>{if(d=!0,function(n){return n&&n[b1]}(m)){const E=a_(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const b=new v1(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(b),E?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ix(o.source)};this.scheduleNavigation(x,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new a2(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Yu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:l,urlTree:d}=r,m={replaceUrl:!0};if(l){const E=Object.assign({},l);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(m.state=E)}this.scheduleNavigation(d,o,l,m)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Y1(t),this.config=t.map(bP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,b=o||this.routerState.root,x=E?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=l||null}return null!==R&&(R=this.removeEmptyProps(R)),function(n,e,t,r,o){if(0===t.length)return vP(e.root,e.root,e,r,o);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new G1(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return es(l.outlets,(E,b)=>{m[b]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new G1(t,e,r)}(t);if(l.toRoot())return vP(e.root,new Zt([],{}),e,r,o);const d=function(n,e,t){if(n.isAbsolute)return new EP(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new EP(l,l===e.root,0)}const r=YS(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new EP(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=d.processChildren?QS(d.segmentGroup,d.index,l.commands):q1(d.segmentGroup,d.index,l.commands);return vP(d.segmentGroup,m,e,r,o)}(b,this.currentUrlTree,t,R,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=a_(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},zB):!1===r?Object.assign({},ZB):r,a_(t))return S1(this.currentUrlTree,t,o);const l=this.parseUrl(t);return S1(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Nb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var m,E;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),x=ix(r)&&b&&!ix(b.source),q=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(x&&q)return Promise.resolve(!0);let ee,Ae,ke;d?(ee=d.resolve,Ae=d.reject,ke=d.promise):ke=new Promise((dn,Lt)=>{ee=dn,Ae=Lt});const St=++this.navigationId;let Et;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Et=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Et=0,this.setTransition({id:St,targetPageId:Et,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:ee,reject:Ae,promise:ke,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ke.catch(dn=>Promise.reject(dn))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new v1(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(hP),f.LFG(aE),f.LFG(qe),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ix(n){return"imperative"!==n}let xP=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=l||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new JB(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(aE),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class JB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===oE?this.route:e===aE?this.childContexts:this.parent.get(e,t)}}class hF{}class fF{preload(e,t){return(0,rt.of)(null)}}let pF=(()=>{class n{constructor(t,r,o,l,d){this.router=t,this.injector=l,this.preloadingStrategy=d,this.loader=new cF(r,o,b=>t.triggerEvent(new E1(b)),b=>t.triggerEvent(new w1(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Uo(t=>t instanceof Nb),Rb(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,fn.D)(o).pipe((0,sg.J)(),(0,st.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,rt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Bs.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Co),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(hF))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),RP=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nb&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof C1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new C1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Co),f.LFG(hu),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const u_=new f.OlP("ROUTER_CONFIGURATION"),gF=new f.OlP("ROUTER_FORROOT_GUARD"),tj=[qe,{provide:hP,useClass:M1},{provide:Co,useFactory:function(n,e,t,r,o,l,d,m={},E,b){const x=new Co(null,n,e,t,r,o,l,T1(d));return E&&(x.urlHandlingStrategy=E),b&&(x.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(m,x),m.enableTracing&&x.events.subscribe(R=>{var F,q;null===(F=console.group)||void 0===F||F.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(q=console.groupEnd)||void 0===q||q.call(console)}),x},deps:[hP,aE,qe,f.zs3,f.v3s,f.Sil,DP,u_,[class{},new f.FiY],[class{},new f.FiY]]},aE,{provide:oE,useFactory:function(n){return n.routerState.root},deps:[Co]},{provide:f.v3s,useClass:f.EAV},pF,fF,class{preload(e,t){return t().pipe(i_(()=>(0,rt.of)(null)))}},{provide:u_,useValue:{enableTracing:!1}}];function nj(){return new f.PXZ("Router",Co)}let mF=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tj,_F(t),{provide:gF,useFactory:sj,deps:[[Co,new f.FiY,new f.tp0]]},{provide:u_,useValue:r||{}},{provide:fe,useFactory:ij,deps:[Q,[new f.tBr(he),new f.FiY],u_]},{provide:RP,useFactory:rj,deps:[Co,hu,u_]},{provide:hF,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:fF},{provide:f.PXZ,multi:!0,useFactory:nj},[NP,{provide:f.ip1,multi:!0,useFactory:lj,deps:[NP]},{provide:yF,useFactory:cj,deps:[NP]},{provide:f.tb,multi:!0,useExisting:yF}]]}}static forChild(t){return{ngModule:n,providers:[_F(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gF,8),f.LFG(Co,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function rj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new RP(n,e,t)}function ij(n,e,t={}){return t.useHash?new xe(n,e):new ye(n,e)}function sj(n){return"guarded"}function _F(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:DP,multi:!0,useValue:n}]}let NP=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new sc.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(Co),d=this.injector.get(u_);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,rt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(u_),o=this.injector.get(pF),l=this.injector.get(RP),d=this.injector.get(Co),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function lj(n){return n.appInitializer.bind(n)}function cj(n){return n.bootstrapListener.bind(n)}const yF=new f.OlP("Router Initializer");let vF=(()=>{class n{constructor(t){this.sanitizer=t,this.item="",this.title="",this.description="",this.image="",this.imageTwo="",this.imageThree="",this.techs="",this.sourceCode="",this.liveSite="",this.closeModal=new f.vpe}onClick(){this.closeModal.emit(!1)}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(wa))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-modal"]],inputs:{item:"item",title:"title",description:"description",image:"image",imageTwo:"imageTwo",imageThree:"imageThree",techs:"techs",sourceCode:"sourceCode",liveSite:"liveSite"},outputs:{closeModal:"closeModal"},decls:27,vars:12,consts:[[1,"modal-background"],[1,"modal-container"],[1,"modal-image-container"],[1,"image-container-1"],[1,"image-container-2"],[1,"image-container-3"],[1,"modal-content"],[1,"modal-text"],[1,"modal-title"],[1,"modal-buttons"],[1,"link-box"],[1,"link"],["target","_blank",3,"href"],[1,"back-box"],["id","back",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f._UZ(3,"div",3),f._UZ(4,"div",4),f._UZ(5,"div",5),f.qZA(),f.TgZ(6,"div",6),f.TgZ(7,"div",7),f.TgZ(8,"h3",8),f._uU(9),f.qZA(),f.TgZ(10,"p"),f._uU(11),f.qZA(),f.TgZ(12,"p"),f._uU(13),f.qZA(),f.TgZ(14,"p"),f._uU(15),f.qZA(),f.qZA(),f.TgZ(16,"div",9),f.TgZ(17,"div",10),f.TgZ(18,"button",11),f.TgZ(19,"a",12),f._uU(20,"Live Site"),f.qZA(),f.qZA(),f.TgZ(21,"button",11),f.TgZ(22,"a",12),f._uU(23,"Source code"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(24,"div",13),f.TgZ(25,"button",14),f.NdJ("click",function(){return r.onClick()}),f._uU(26,"Back"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(3),f.Udp("background-image","url(../../../assets/images/"+r.image+")"),f.xp6(1),f.Udp("background-image","url(../../../assets/images/"+r.imageTwo+")"),f.xp6(1),f.Udp("background-image","url(../../../assets/images/"+r.imageThree+")"),f.xp6(4),f.Oqu(r.title),f.xp6(2),f.Oqu(r.techs),f.xp6(2),f.Oqu(r.description),f.xp6(2),f.Oqu(r.sourceCode),f.xp6(4),f.s9C("href",r.liveSite,f.LSH),f.xp6(3),f.s9C("href",r.sourceCode,f.LSH))},styles:[".modal-container[_ngcontent-%COMP%]{z-index:3;width:700px;background-color:#fff;padding:3px;margin-top:50px;margin-bottom:50px;color:#273444;display:flex;flex-direction:row}.modal-background[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;position:fixed;background-color:#000000b3;top:0;left:0;height:100vh;z-index:2}.modal-image-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.image-container-1[_ngcontent-%COMP%], .image-container-2[_ngcontent-%COMP%], .image-container-3[_ngcontent-%COMP%]{background-size:cover;height:33%;width:360px;background-position:center}.modal-content[_ngcontent-%COMP%]{z-index:3;margin-left:5px;display:flex;flex-direction:column;justify-content:space-between;text-align:left}.modal-title[_ngcontent-%COMP%]{text-align:left;font-size:36px}a[_ngcontent-%COMP%]{text-decoration:none;color:#e31b6d}.link-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;margin:20px}.link[_ngcontent-%COMP%]{line-height:2;border-radius:2px;cursor:pointer;border:2px solid #273444;background-color:#fff;color:#e31b6d;transition:.2s}.link[_ngcontent-%COMP%]:hover{background-color:#e31b6d;color:#fff}.back-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin-top:18px}#back[_ngcontent-%COMP%]{cursor:pointer;background-color:#e31b6d;border:2px solid #273444;color:#fff}h3[_ngcontent-%COMP%]{font-size:24px;text-align:center}@media only screen and (max-width: 426px){.modal-container[_ngcontent-%COMP%]{width:400px;margin:80px 0;flex-direction:column}.image-container-1[_ngcontent-%COMP%], .image-container-2[_ngcontent-%COMP%], .image-container-3[_ngcontent-%COMP%]{display:none}.modal-title[_ngcontent-%COMP%]{font-size:26px}p[_ngcontent-%COMP%]{font-size:16px}.link-box[_ngcontent-%COMP%]{margin:8px}.back-box[_ngcontent-%COMP%]{margin:18px 6px 0 0}}"]}),n})(),hj=(()=>{class n{constructor(){this.closeMenu=new f.vpe}onClick(){this.closeMenu.emit(!1)}scrollToAbout(){window.scroll({top:540,behavior:"smooth"}),this.closeMenu.emit(!1)}scrollToProjects(){window.scroll({top:1380,behavior:"smooth"}),this.closeMenu.emit(!1)}scrollToContact(){window.scroll({top:2700,behavior:"smooth"}),this.closeMenu.emit(!1)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-menu"]],outputs:{closeMenu:"closeMenu"},decls:11,vars:0,consts:[[1,"menu-container"],[1,"nav-container"],[3,"click"],[1,"back"],["src","../../../assets/images/icons8-double-right-30.png","alt","",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"ul"),f.TgZ(3,"li",2),f.NdJ("click",function(){return r.scrollToAbout()}),f._uU(4,"About"),f.qZA(),f.TgZ(5,"li",2),f.NdJ("click",function(){return r.scrollToProjects()}),f._uU(6,"Projects"),f.qZA(),f.TgZ(7,"li",2),f.NdJ("click",function(){return r.scrollToContact()}),f._uU(8,"Contact"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",3),f.TgZ(10,"img",4),f.NdJ("click",function(){return r.onClick()}),f.qZA(),f.qZA(),f.qZA())},styles:[".menu-container[_ngcontent-%COMP%]{z-index:300;width:60vw;height:100vh;position:fixed;background-color:#273444;right:0}ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:50vh;list-style-type:none;color:#fff;font-size:24px;text-align:center;padding-left:0;padding-top:40px}li[_ngcontent-%COMP%]{border-bottom:2px solid #fff;padding-bottom:8px;margin:0 30%}.back[_ngcontent-%COMP%]{text-align:right;margin:50px 10px 0 0}"]}),n})();function fj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"app-menu",12),f.NdJ("closeMenu",function(){return f.CHM(t),f.oxw().onNotifyClick()}),f.qZA()}}let pj=(()=>{class n{constructor(){this.check=!1,this.openMenu=!1}onNotifyClick(){this.openMenu=!this.openMenu}scrollToTop(){window.scroll({top:0,behavior:"smooth"})}scrollToAbout(){window.scroll({top:540,behavior:"smooth"})}scrollToProjects(){window.scroll({top:1460,behavior:"smooth"})}scrollToContact(){window.scroll({top:2700,behavior:"smooth"})}ngOnInit(){window.addEventListener("scroll",()=>{this.check=window.scrollY>500})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],decls:25,vars:3,consts:[["id","nav-container",1,"header-container"],[1,"header-content"],[1,"name-container"],["href","https://www.linkedin.com/in/ryan-hubbuck-61a749210/","target","_blank"],["src","../../../assets/images/icons8-linkedin-30.png","alt","Linked-in link",1,"header-link"],["href","https://github.com/rhubbuck","target","_blank"],["src","../../../assets/images/icons8-github-30.png","alt","Github link",1,"header-link"],[1,"nav-container"],[1,"nav"],[1,"navlink",3,"click"],["src","../../../assets/images/icons8-menu-24.png","alt","",1,"menu",3,"click"],[3,"closeMenu",4,"ngIf"],[3,"closeMenu"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Ryan Hubbuck"),f.qZA(),f.TgZ(5,"a",3),f._UZ(6,"img",4),f.qZA(),f.TgZ(7,"a",5),f._UZ(8,"img",6),f.qZA(),f.qZA(),f.TgZ(9,"div",7),f.TgZ(10,"ul",8),f.TgZ(11,"li"),f.TgZ(12,"a",9),f.NdJ("click",function(){return r.scrollToTop()}),f._uU(13,"HOME"),f.qZA(),f.qZA(),f.TgZ(14,"li"),f.TgZ(15,"a",9),f.NdJ("click",function(){return r.scrollToAbout()}),f._uU(16,"ABOUT"),f.qZA(),f.qZA(),f.TgZ(17,"li"),f.TgZ(18,"a",9),f.NdJ("click",function(){return r.scrollToProjects()}),f._uU(19,"PROJECTS"),f.qZA(),f.qZA(),f.TgZ(20,"li"),f.TgZ(21,"a",9),f.NdJ("click",function(){return r.scrollToContact()}),f._uU(22,"CONTACT"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(23,"img",10),f.NdJ("click",function(){return r.onNotifyClick()}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(24,fj,1,0,"app-menu",11)),2&t&&(f.ekj("dark",r.check),f.xp6(24),f.Q6J("ngIf",r.openMenu))},directives:[rs,hj],styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600&display=swap";.header-container[_ngcontent-%COMP%]{width:100%;position:fixed}.dark[_ngcontent-%COMP%]{background-color:#273444}.header-content[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;padding-top:1rem}h3[_ngcontent-%COMP%]{font-weight:500;font-family:"Baloo Bhaijaan 2",cursive;color:#fff;margin:0}.name-container[_ngcontent-%COMP%]{padding-left:4rem;display:flex;align-items:center}.header-link[_ngcontent-%COMP%]{width:30px;height:30px;margin-left:8px;cursor:pointer}.nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style-type:none;width:400px;margin-right:4rem;justify-content:space-around;font-family:"Baloo Bhaijaan 2",cursive;font-weight:400;color:#fff;font-size:14px}.menu[_ngcontent-%COMP%]{margin-right:2rem;align-self:center}.navlink[_ngcontent-%COMP%]{cursor:pointer;transition:.1s;line-height:16px}.navlink[_ngcontent-%COMP%]:hover{border-bottom:4px solid #e31b6d;font-size:16px;font-weight:600}@media only screen and (max-width: 426px){.nav[_ngcontent-%COMP%]{display:none}.header-link[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width: 426px){.menu[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 1400px){.nav[_ngcontent-%COMP%]{width:350px;margin-right:3rem}.name-container[_ngcontent-%COMP%]{padding-left:3rem}}@media only screen and (max-width: 769px){.nav[_ngcontent-%COMP%]{width:250px;margin-right:2rem}.name-container[_ngcontent-%COMP%]{padding-left:2rem}}']}),n})(),gj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-hero"]],decls:7,vars:0,consts:[[1,"hero-wrapper"],[1,"tint-wrapper"],[1,"hero-text"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h1"),f._uU(4,"Hi, I'm Ryan Hubbuck"),f.qZA(),f.TgZ(5,"h2"),f._uU(6,"Front-end web developer"),f.qZA(),f.qZA(),f.qZA(),f.qZA())},styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{font-size:58px;color:#fff;font-family:"Baloo Bhaijaan 2",cursive;font-weight:400}h2[_ngcontent-%COMP%]{font-size:38px;color:#fff;font-family:"Baloo Bhaijaan 2",cursive;font-weight:400}.hero-wrapper[_ngcontent-%COMP%]{height:100vh;overflow:hidden;background-image:url(mountain-hero.c7317ce465b4451e9eb1.jpg);background-size:cover}.tint-wrapper[_ngcontent-%COMP%]{height:100vh;background-color:#0006}.hero-text[_ngcontent-%COMP%]{z-index:49;color:#273444;padding-top:260px;text-align:center;font-family:"Baloo Bhaijaan 2",cursive}@media only screen and (max-width: 426px){.hero-text[_ngcontent-%COMP%]{padding-top:230px}h1[_ngcontent-%COMP%]{font-size:38px}h2[_ngcontent-%COMP%]{font-size:22px}}']}),n})(),mj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about"]],decls:13,vars:0,consts:[[1,"about-wrapper"],[1,"about-title"],[1,"about-headline"],[1,"about-text"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h3",2),f._uU(3,"A little about me"),f.qZA(),f.qZA(),f.TgZ(4,"div",3),f.TgZ(5,"p"),f._uU(6,"Hi!"),f.qZA(),f.TgZ(7,"p"),f._uU(8,"My name is Ryan Hubbuck, and I am a front-end developer currently living in Knoxville, Tennessee."),f.qZA(),f.TgZ(9,"p"),f._uU(10,"I am a self-taught front-end developer transitioning from the physical therapy field. I am passionate about continuing to develop my skills and learn new things."),f.qZA(),f.TgZ(11,"p"),f._uU(12,"I look forward to hearing from you!"),f.qZA(),f.qZA(),f.qZA())},styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600&display=swap";.about-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:70px 0 20px;padding:0 460px;background-color:#fff}.about-title[_ngcontent-%COMP%], .about-text[_ngcontent-%COMP%]{color:#273444;line-height:1.5}.about-title[_ngcontent-%COMP%]{text-align:center}.about-text[_ngcontent-%COMP%]{text-align:left;font-family:"Exo",sans-serif}h3[_ngcontent-%COMP%]{font-family:"Baloo Bhaijaan 2",cursive;color:#273444;font-size:44px;font-weight:400;padding-bottom:0;margin-bottom:0}p[_ngcontent-%COMP%]{font-size:18px;font-weight:300}@media only screen and (max-width: 1400px){.about-wrapper[_ngcontent-%COMP%]{padding:0 240px}h3[_ngcontent-%COMP%]{margin:0}}@media only screen and (max-width: 769px){.about-wrapper[_ngcontent-%COMP%]{padding:0 140px}h3[_ngcontent-%COMP%]{font-size:40px}}@media only screen and (max-width: 426px){.about-wrapper[_ngcontent-%COMP%]{padding:0 40px}p[_ngcontent-%COMP%]{font-size:16px}}']}),n})(),_j=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-skills"]],decls:39,vars:0,consts:[[1,"skills-wrapper"],[1,"skills-label"],[1,"skills-title"],[1,"technologies"],[1,"languages"],[1,"frameworks"],[1,"additional"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h3",2),f._uU(3,"Technologies I work with"),f.qZA(),f.qZA(),f.TgZ(4,"div",3),f.TgZ(5,"div",4),f.TgZ(6,"h4"),f._uU(7,"Languages"),f.qZA(),f.TgZ(8,"p"),f._uU(9,"Javascript"),f.qZA(),f.TgZ(10,"p"),f._uU(11,"Typescript"),f.qZA(),f.TgZ(12,"p"),f._uU(13,"HTML"),f.qZA(),f.TgZ(14,"p"),f._uU(15,"CSS"),f.qZA(),f.TgZ(16,"p"),f._uU(17,"Sass"),f.qZA(),f.qZA(),f.TgZ(18,"div",5),f.TgZ(19,"h4"),f._uU(20,"Frameworks"),f.qZA(),f.TgZ(21,"p"),f._uU(22,"React"),f.qZA(),f.TgZ(23,"p"),f._uU(24,"Angular"),f.qZA(),f.qZA(),f.TgZ(25,"div",6),f.TgZ(26,"h4"),f._uU(27,"Additional"),f.qZA(),f.TgZ(28,"p"),f._uU(29,"Git"),f.qZA(),f.TgZ(30,"p"),f._uU(31,"Bootstrap"),f.qZA(),f.TgZ(32,"p"),f._uU(33,"Material UI"),f.qZA(),f.TgZ(34,"p"),f._uU(35,"Node"),f.qZA(),f.TgZ(36,"p"),f._uU(37,"Gatsby"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._uU(38,"\n->\n"))},styles:['.skills-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;background-color:#eee;align-items:center;padding:50px 470px}.technologies[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between}.skills-title[_ngcontent-%COMP%]{color:#273444;font-family:"Baloo Bhaijaan 2",cursive;font-size:42px;font-weight:400}.logos[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}h3[_ngcontent-%COMP%]{font-size:34px;font-weight:400}@media only screen and (max-width: 1024px){.logos[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:60%;padding:0}}@media only screen and (max-width: 1400px){.skills-wrapper[_ngcontent-%COMP%]{padding:50px 240px}}@media only screen and (max-width: 769px){.skills-wrapper[_ngcontent-%COMP%]{padding:50px 140px}h3[_ngcontent-%COMP%], .skills-title[_ngcontent-%COMP%]{font-size:40px}}@media only screen and (max-width: 426px){.skills-wrapper[_ngcontent-%COMP%]{padding:50px 20px}.skills-title[_ngcontent-%COMP%]{margin:0}}']}),n})();function yj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"app-modal",9),f.NdJ("closeModal",function(){return f.CHM(t),f.oxw().onNotifyClick()}),f.qZA()}if(2&n){const t=f.oxw();f.Q6J("item",t.currentItem)("title",t.currentTitle)("techs",t.currentTechs)("description",t.currentDescription)("image",t.currentImage)("imageTwo",t.currentImageTwo)("imageThree",t.currentImageThree)("sourceCode",t.currentSourceCode)("liveSite",t.currentLiveSite)}}function vj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10),f.TgZ(1,"h4"),f._uU(2,"Pupexpress"),f.qZA(),f.TgZ(3,"p",11),f._uU(4,"E-commerce"),f.qZA(),f.TgZ(5,"button",12),f.NdJ("click",function(){return f.CHM(t),f.oxw().changeModal()}),f._uU(6,"Learn More"),f.qZA(),f.qZA()}}function Ej(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10),f.TgZ(1,"h4"),f._uU(2,"Nama Sushi"),f.qZA(),f.TgZ(3,"p",11),f._uU(4,"Restaurant landing page"),f.qZA(),f.TgZ(5,"button",12),f.NdJ("click",function(){return f.CHM(t),f.oxw().changeModalTwo()}),f._uU(6,"Learn More"),f.qZA(),f.qZA()}}function wj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10),f.TgZ(1,"h4"),f._uU(2,"Netflix Clone"),f.qZA(),f.TgZ(3,"p",11),f._uU(4,"Website clone"),f.qZA(),f.TgZ(5,"button",12),f.NdJ("click",function(){return f.CHM(t),f.oxw().changeModalThree()}),f._uU(6,"Learn More"),f.qZA(),f.qZA()}}function Cj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10),f.TgZ(1,"h4"),f._uU(2,"All Trails"),f.qZA(),f.TgZ(3,"p",11),f._uU(4,"CRUD"),f.qZA(),f.TgZ(5,"button",12),f.NdJ("click",function(){return f.CHM(t),f.oxw().changeModalFour()}),f._uU(6,"Learn More"),f.qZA(),f.qZA()}}let bj=(()=>{class n{constructor(){this.state=!1,this.stateTwo=!1,this.stateThree=!1,this.stateFour=!1,this.stateFive=!1,this.stateSix=!1,this.openModal=!1,this.currentItem="test",this.currentTitle="",this.currentTechs="",this.currentImage="",this.currentImageTwo="",this.currentImageThree="",this.currentDescription="",this.currentSourceCode="",this.currentLiveSite=""}changeState(){this.state=!this.state}changeStateTwo(){this.stateTwo=!this.stateTwo}changeStateThree(){this.stateThree=!this.stateThree}changeStateFour(){this.stateFour=!this.stateFour}changeStateFive(){this.stateFive=!this.stateFive}changeStateSix(){this.stateSix=!this.stateSix}changeModal(){this.currentTitle="PupExpress",this.currentTechs="React/Commerce.js/Stripe.js",this.currentDescription="E-commerce site created using the Angular framework. I used Commerce.js as the back-end, which stores products, tracks sales of each item, and allows for shipping options. Stripe.js was used for the final card payments/processing, although I stopped just before implementing the final pieces of code to connect this to avoid any chance at charging credit cards.",this.currentImage="Pupexpress-main.png",this.currentImageTwo="Pupexpress2.png",this.currentImageThree="Pupexpress3.png",this.currentSourceCode="https://github.com/rhubbuck/react-ecommerce",this.currentLiveSite="https://rhubbuck.github.io/react-ecommerce/",this.openModal=!this.openModal}changeModalTwo(){this.currentTitle="Nama Sushi",this.currentTechs="React / Firebase",this.currentDescription="Mock restaurant landing page with restaurant information and menus. Reservation information is saved into a backend database to be reviewed and handled by restaurant management/staff.",this.currentImage="Nama-main.png",this.currentImageTwo="Nama2.png",this.currentImageThree="Nama3.png",this.currentSourceCode="https://github.com/rhubbuck/react-restaurant",this.currentLiveSite="https://rhubbuck.github.io/react-restaurant/",this.openModal=!this.openModal}changeModalThree(){this.currentTitle="Netflix Clone",this.currentTechs="React / TMDB API",this.currentDescription="Mock site used as a display of ability to capture the styling and overall feel of a website or project. Seperate movie and TV categories are pulled from The Movie Database API. Selection of a movie opens a modal with match percentage, a description, and further options.",this.currentImage="Netflix-main.png",this.currentImageTwo="Netflix4.png",this.currentImageThree="Netflix3.png",this.currentSourceCode="https://github.com/rhubbuck/API-clone",this.currentLiveSite="https://rhubbuck.github.io/API-clone/",this.openModal=!this.openModal}changeModalFour(){this.currentTitle="Alltrails",this.currentTechs="Angular / Firebase",this.currentDescription="Firebase authentication was used to create and store user profiles. A main feed page shows all trails added by all users, while there is a seperate page to view your own trail posts. Once there, you are able to edit those posts and update the database in real-time.",this.currentImage="Alltrails2.png",this.currentImageTwo="Alltrails3.png",this.currentImageThree="Alltrails4.png",this.currentSourceCode="https://github.com/rhubbuck/angular-crud",this.currentLiveSite="https://rhubbuck.github.io/angular-crud/",this.openModal=!this.openModal}onNotifyClick(){this.openModal=!this.openModal}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-projects"]],decls:16,vars:5,consts:[[1,"projects-wrapper"],[1,"label"],["id","modal",3,"item","title","techs","description","image","imageTwo","imageThree","sourceCode","liveSite","closeModal",4,"ngIf"],[1,"project-container"],["id","project1",1,"project",3,"mouseenter","mouseleave"],["class","project-content",4,"ngIf"],["id","project2",1,"project",3,"mouseenter","mouseleave"],["id","project3",1,"project",3,"mouseenter","mouseleave"],["id","project4",1,"project",3,"mouseenter","mouseleave"],["id","modal",3,"item","title","techs","description","image","imageTwo","imageThree","sourceCode","liveSite","closeModal"],[1,"project-content"],[1,"project-subheader"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h3"),f._uU(3,"My Projects"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"My latest work"),f.qZA(),f.qZA(),f.YNc(6,yj,1,9,"app-modal",2),f.TgZ(7,"div",3),f.TgZ(8,"div",4),f.NdJ("mouseenter",function(){return r.changeState()})("mouseleave",function(){return r.changeState()}),f.YNc(9,vj,7,0,"div",5),f.qZA(),f.TgZ(10,"div",6),f.NdJ("mouseenter",function(){return r.changeStateTwo()})("mouseleave",function(){return r.changeStateTwo()}),f.YNc(11,Ej,7,0,"div",5),f.qZA(),f.TgZ(12,"div",7),f.NdJ("mouseenter",function(){return r.changeStateThree()})("mouseleave",function(){return r.changeStateThree()}),f.YNc(13,wj,7,0,"div",5),f.qZA(),f.TgZ(14,"div",8),f.NdJ("mouseenter",function(){return r.changeStateFour()})("mouseleave",function(){return r.changeStateFour()}),f.YNc(15,Cj,7,0,"div",5),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(6),f.Q6J("ngIf",r.openModal),f.xp6(3),f.Q6J("ngIf",r.state),f.xp6(2),f.Q6J("ngIf",r.stateTwo),f.xp6(2),f.Q6J("ngIf",r.stateThree),f.xp6(2),f.Q6J("ngIf",r.stateFour))},directives:[rs,vF],styles:['.projects-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fff;color:#273444;padding-top:50px;margin:0 120px}.outer[_ngcontent-%COMP%]{margin:0;padding:0}.project-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap;width:100%}.label[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.image-container[_ngcontent-%COMP%]{height:220px;width:300px}.project[_ngcontent-%COMP%]{width:50%;height:320px;background-image:url(clement-helardot-95YRwf6CNw8-unsplash.2272c4a64c8cca431c83.jpg);background-size:cover;background-position:center;text-align:center}.project-subheader[_ngcontent-%COMP%]{font-family:"Exo",sans-serif}#project1[_ngcontent-%COMP%]{background-image:url(Pupexpress-main.d0c77415f31ae6c31964.png);background-position:top}#project2[_ngcontent-%COMP%]{background-image:url(Nama-main.fbfb4a7f0f1557265dba.png);background-position:top}#project3[_ngcontent-%COMP%]{background-image:url(Netflix-main.039f81eeedf668599e43.png);background-position:top}#project4[_ngcontent-%COMP%]{background-image:url(Alltrails-main.34c1896b832cab916da9.png);background-position:top}.project-content[_ngcontent-%COMP%]{z-index:5;padding-top:40px;color:#273444;background-color:#fff;height:100%}button[_ngcontent-%COMP%]{margin-top:40px;color:#e31b6d;background-color:#fff;border:2px solid #273444;cursor:pointer;padding:8px;font-size:20px;transition:.2s}button[_ngcontent-%COMP%]:hover{background-color:#e31b6d;color:#fff}p[_ngcontent-%COMP%]{font-family:"Baloo Bhaijaan 2",cursive;color:#e31b6d;font-weight:600;font-size:22px}h3[_ngcontent-%COMP%]{font-family:"Baloo Bhaijaan 2",cursive;font-size:44px;font-weight:400;margin-bottom:0}h4[_ngcontent-%COMP%]{font-size:32px}@media only screen and (max-width: 1400px){.projects-wrapper[_ngcontent-%COMP%]{margin:0 40px}.project[_ngcontent-%COMP%]{width:48%;margin:5px;height:240px}h4[_ngcontent-%COMP%]{font-size:26px}button[_ngcontent-%COMP%]{margin-top:20px;padding:4px}h3[_ngcontent-%COMP%]{margin:0}}@media only screen and (max-width: 769px){.project[_ngcontent-%COMP%]{height:180px}h3[_ngcontent-%COMP%]{font-size:40px}p[_ngcontent-%COMP%]{font-size:20px}h4[_ngcontent-%COMP%], .project-subheader[_ngcontent-%COMP%]{margin:0}}@media only screen and (max-width: 426px){.projects-wrapper[_ngcontent-%COMP%]{padding:0;margin:0}.project-content[_ngcontent-%COMP%]{padding-top:10px}.project[_ngcontent-%COMP%]{width:80%;height:180px;margin:5px}button[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{font-size:16px}.label[_ngcontent-%COMP%]{margin:0}}']}),n})(),Ij=(()=>{class n{constructor(){this.closeResume=new f.vpe}onClick(){this.closeResume.emit(!1)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-resume"]],outputs:{closeResume:"closeResume"},decls:3,vars:0,consts:[[1,"resume-background",3,"click"],[1,"resume-container"],["src","../../../assets/images/resume-shot.png","alt","Resume",1,"resume-image"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.NdJ("click",function(){return r.onClick()}),f.TgZ(1,"div",1),f._UZ(2,"img",2),f.qZA(),f.qZA())},styles:[".resume-container[_ngcontent-%COMP%]{z-index:3;background-color:#fff;padding:3px;margin-top:50px;margin-bottom:50px;color:#273444;display:flex;flex-direction:row}.resume-background[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;position:fixed;background-color:#000000b3;top:0;left:0;height:100vh;z-index:2}"]}),n})();function Tj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"app-resume",10),f.NdJ("closeResume",function(){return f.CHM(t),f.oxw().onNotifyClick()}),f.qZA()}}let Dj=(()=>{class n{constructor(){this.openResume=!1}changeResume(){this.openResume=!this.openResume}onNotifyClick(){this.openResume=!this.openResume}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-find"]],decls:13,vars:1,consts:[[1,"find-wrapper"],[1,"find-header"],[1,"find-link-wrapper"],[1,"find-link"],["href","https://www.linkedin.com/in/ryan-hubbuck-61a749210/","target","_blank"],["src","../../../assets/images/icons8-linkedin-60.png","alt","Linked-in link"],[1,"find-resume",3,"click"],["href","https://github.com/rhubbuck","target","_blank"],["src","../../../assets/images/icons8-github-60.png","alt","Github link"],[3,"closeResume",4,"ngIf"],[3,"closeResume"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"h4",1),f._uU(2,"Trying to find me?"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"div",3),f.TgZ(5,"a",4),f._UZ(6,"img",5),f.qZA(),f.qZA(),f.TgZ(7,"button",6),f.NdJ("click",function(){return r.changeResume()}),f._uU(8,"Resume"),f.qZA(),f.TgZ(9,"div",3),f.TgZ(10,"a",7),f._UZ(11,"img",8),f.qZA(),f.qZA(),f.qZA(),f.YNc(12,Tj,1,0,"app-resume",9),f.qZA()),2&t&&(f.xp6(12),f.Q6J("ngIf",r.openResume))},directives:[rs,Ij],styles:['.find-wrapper[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;justify-content:center;padding:140px 470px 10px;text-align:center}.find-link[_ngcontent-%COMP%]{cursor:pointer}.find-resume[_ngcontent-%COMP%]{color:#e31b6d;background-color:#fff;border:2px solid #273444;cursor:pointer;font-size:20px;transition:.2s;height:54px;margin:0 16px}.find-resume[_ngcontent-%COMP%]:hover{background-color:#e31b6d;color:#fff}.find-header[_ngcontent-%COMP%]{font-family:"Baloo Bhaijaan 2",cursive;color:#e31b6d;font-size:42px;font-weight:400;margin:0}.find-link-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}@media only screen and (max-width: 1400px){.find-wrapper[_ngcontent-%COMP%]{padding:110px 240px}h3[_ngcontent-%COMP%]{margin:0}}@media only screen and (max-width: 769px){.find-wrapper[_ngcontent-%COMP%]{padding:90px 140px}h3[_ngcontent-%COMP%], .find-header[_ngcontent-%COMP%]{font-size:40px}}@media only screen and (max-width: 426px){.find-wrapper[_ngcontent-%COMP%]{padding:80px 0 60px}}']}),n})(),Aj=(()=>{class n{constructor(t){this.afs=t,this.collection=this.afs.collection("contact")}addContact(t){this.collection.add(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Sj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14),f.TgZ(1,"p"),f._uU(2,"I look forward to getting back to you!"),f.qZA(),f.TgZ(3,"p",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().onClose()}),f._uU(4,"x"),f.qZA(),f.qZA()}}let xj=(()=>{class n{constructor(t,r){this.firebaseService=t,this.fb=r,this.showDiv=!1}ngOnInit(){this.initializeForm()}initializeForm(){this.form=this.fb.group({name:["",ii.required],email:["",ii.required],message:["",ii.required]})}onSubmit(){this.firebaseService.addContact(this.form.value),this.showDiv=!0,this.form.reset()}onClose(){this.showDiv=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Aj),f.Y36(ig))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contact"]],decls:24,vars:2,consts:[[1,"contact-wrapper"],[1,"intro-wraper"],[1,"form-wrapper"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"input-pair"],["for","name"],["formControlName","name","type","text","id","name","required","",3,"ngModel"],["for","email"],["formControlName","email","type","text","id","email","required","",3,"ngModel"],["for","message"],["formControlName","message","name","message","id","message","cols","30","rows","10","required","",3,"ngModel"],[1,"button-box"],["type","submit"],["id","thankYou",4,"ngIf"],["id","thankYou"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h3"),f._uU(3,"Contact Me"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"Say hello so I can get back to you as soon as possible."),f.qZA(),f.qZA(),f.TgZ(6,"div",2),f.TgZ(7,"form",3),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(8,"div",4),f.TgZ(9,"label",5),f._uU(10,"Name:"),f.qZA(),f._UZ(11,"input",6),f.qZA(),f.TgZ(12,"div",4),f.TgZ(13,"label",7),f._uU(14,"Email:"),f.qZA(),f._UZ(15,"input",8),f.qZA(),f.TgZ(16,"div",4),f.TgZ(17,"label",9),f._uU(18,"Message:"),f.qZA(),f._UZ(19,"textarea",10),f.qZA(),f.TgZ(20,"div",11),f.TgZ(21,"button",12),f._uU(22,"Submit"),f.qZA(),f.qZA(),f.qZA(),f.YNc(23,Sj,5,0,"div",13),f.qZA(),f.qZA()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.form),f.xp6(16),f.Q6J("ngIf",r.showDiv))},directives:[Fc,Ih,Ui,Oc,Jp,$c,rs],styles:['.contact-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:80px 350px;background-color:#fff;align-items:center}.svgcolor-light[_ngcontent-%COMP%]{background-color:#000;position:absolute}h3[_ngcontent-%COMP%]{font-family:"Baloo Bhaijaan 2",cursive;color:#273444;font-size:44px;font-weight:400;margin-bottom:0;text-align:center}p[_ngcontent-%COMP%]{color:#e31b6d;font-weight:600}form[_ngcontent-%COMP%]{background-color:#fff;padding:20px 50px;border-radius:3px;color:#273444}.input-pair[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 0;font-size:20px}input[_ngcontent-%COMP%]{width:400px;border:1px solid black;margin:2px 0;border-top-style:hidden;border-right-style:hidden;border-left-style:hidden}textarea[_ngcontent-%COMP%]{border-radius:3px}#message[_ngcontent-%COMP%]{height:90px}button[_ngcontent-%COMP%]{color:#fff;background-color:#e31b6d;border:2px solid #273444;cursor:pointer;margin-top:4px;padding:8px;font-size:20px;transition:.2s}button[_ngcontent-%COMP%]:hover{background-color:#1be3d2;color:#273444}.button-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}#thankYou[_ngcontent-%COMP%]{width:100%;position:relative;color:#fff;background-color:#0dbb24;border:2px solid #273444;cursor:pointer;margin-top:4px;padding:8px;font-size:20px;transition:.2s;display:flex;flex-direction:row;justify-content:space-between}p[_ngcontent-%COMP%]{color:#fff;padding:0;margin:0}@media only screen and (max-width: 1400px){.contact-wrapper[_ngcontent-%COMP%]{padding:40px 50px 20px}h3[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]{padding:0 70px}}@media only screen and (max-width: 769px){h3[_ngcontent-%COMP%]{font-size:40px}.contact-wrapper[_ngcontent-%COMP%]{padding-top:20px}form[_ngcontent-%COMP%]{padding:0 70px}}@media only screen and (max-width: 426px){.contact-wrapper[_ngcontent-%COMP%]{padding:20px}form[_ngcontent-%COMP%]{padding:10px}input[_ngcontent-%COMP%]{width:300px}.input-pair[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{padding:4px;font-size:14px}}']}),n})(),Rj=(()=>{class n{constructor(){}scrollToTop(){window.scroll({top:0,behavior:"smooth"})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:8,vars:0,consts:[[1,"footer-wrapper"],[1,"social-links"],["href","https://www.linkedin.com/in/ryan-hubbuck-61a749210/","target","_blank"],["src","../../../assets/images/icons8-linkedin-30.png","alt","Linked-in",1,"link"],["href","https://github.com/rhubbuck","target","_blank"],["src","../../../assets/images/icons8-github-30.png","alt","Github",1,"link"],[1,"top"],["src","../../../assets/images/icons8-up-squared-50.png","alt","To top","id","top",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"a",4),f._UZ(5,"img",5),f.qZA(),f.qZA(),f.TgZ(6,"div",6),f.TgZ(7,"img",7),f.NdJ("click",function(){return r.scrollToTop()}),f.qZA(),f.qZA(),f.qZA())},styles:[".footer-wrapper[_ngcontent-%COMP%]{height:60px;background-color:#273444;display:flex;flex-direction:row;justify-content:space-between;padding:0 50px;align-items:center}.link[_ngcontent-%COMP%]{margin:0 10px}img[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (min-width: 1100px){.footer-wrapper[_ngcontent-%COMP%]{padding:0 150px}}"]}),n})();const Nj=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:8,vars:0,consts:[["id","navbar"]],template:function(t,r){1&t&&(f._UZ(0,"app-header",0),f._UZ(1,"app-hero"),f._UZ(2,"app-about"),f._UZ(3,"app-skills"),f._UZ(4,"app-projects"),f._UZ(5,"app-find"),f._UZ(6,"app-contact"),f._UZ(7,"app-footer"))},directives:[pj,gj,mj,_j,bj,Dj,xj,Rj],styles:[""]}),n})()},{path:"all-trail",component:vF}];let Mj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[mF.forRoot(Nj)],mF]}),n})(),Pj=(()=>{class n{constructor(){this.title="portfolio"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[xP],styles:[""]}),n})(),kj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Pj]}),n.\u0275inj=f.cJS({providers:[],imports:[[Pp,Mj,Fn,k_,si.hO.initializeApp(Nh_firebase),WU,Fk]]}),n})();(0,f.G48)(),Qs().bootstrapModule(kj).catch(n=>console.error(n))},3394:(ze,Ce,U)=>{"use strict";U.d(Ce,{Z:()=>Ee});var f=U(3854),ne=U(3910),L=U(8026),ce=U(5422);class ie{constructor(fe,re){this._delegate=fe,this.firebase=re,(0,L._addComponent)(fe,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(fe,re=L._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const ye=this._delegate.container.getProvider(fe);return!ye.isInitialized()&&"EXPLICIT"===(null===(he=ye.getComponent())||void 0===he?void 0:he.instantiationMode)&&ye.initialize(),ye.getImmediate({identifier:re})}_removeServiceInstance(fe,re=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(re)}_addComponent(fe){(0,L._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,L._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function X(){const _e=function(_e){const fe={},re={__esModule:!0,initializeApp:function(gt,yn={}){const mt=L.initializeApp(gt,yn);if((0,f.r3)(fe,mt.name))return fe[mt.name];const ut=new _e(mt,re);return fe[mt.name]=ut,ut},app:ye,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(gt){const yn=gt.name,mt=yn.replace("-compat","");if(L._registerComponent(gt)&&"PUBLIC"===gt.type){const ut=(Gt=ye())=>{if("function"!=typeof Gt[mt])throw ge.create("invalid-app-argument",{appName:yn});return Gt[mt]()};void 0!==gt.serviceProps&&(0,f.ZB)(ut,gt.serviceProps),re[mt]=ut,_e.prototype[mt]=function(...Gt){return this._getService.bind(this,yn).apply(this,gt.multipleInstances?Gt:[])}}return"PUBLIC"===gt.type?re[mt]:null},removeApp:function(gt){delete fe[gt]},useAsService:function(gt,yn){return"serverAuth"===yn?null:yn},modularAPIs:L}};function ye(gt){if(!(0,f.r3)(fe,gt=gt||L._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:gt});return fe[gt]}return re.default=re,Object.defineProperty(re,"apps",{get:function(){return Object.keys(fe).map(gt=>fe[gt])}}),ye.App=_e,re}(ie);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function(re){(0,f.ZB)(_e,re)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),_e}(),j=new ce.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=V;(0,L.registerVersion)("@firebase/app-compat","0.1.12",undefined)},8026:(ze,Ce,U)=>{"use strict";U.r(Ce),U.d(Ce,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>sa,_DEFAULT_ENTRY_NAME:()=>ms,_addComponent:()=>_s,_addOrOverwriteComponent:()=>Hs,_apps:()=>Vt,_clearComponents:()=>vn,_components:()=>Ut,_getProvider:()=>un,_registerComponent:()=>ts,_removeServiceInstance:()=>ia,deleteApp:()=>er,getApp:()=>ns,getApps:()=>De,initializeApp:()=>Ri,onLog:()=>Bt,registerVersion:()=>Ge,setLogLevel:()=>Ni});var f=U(8239),ne=U(3910),L=U(5422),ce=U(3854);class ie{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(Tt=>{if(function(Ye){const Xe=Ye.getComponent();return"VERSION"===(null==Xe?void 0:Xe.type)}(Tt)){const Dt=Tt.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Tt=>Tt).join(" ")}}const ge="@firebase/app",Q="0.7.11",X=new L.Yd("@firebase/app"),ms="[DEFAULT]",iu={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,Ut=new Map;function _s(Ye,Xe){try{Ye.container.addComponent(Xe)}catch(Tt){X.debug(`Component ${Xe.name} failed to register with FirebaseApp ${Ye.name}`,Tt)}}function Hs(Ye,Xe){Ye.container.addOrOverwriteComponent(Xe)}function ts(Ye){const Xe=Ye.name;if(Ut.has(Xe))return X.debug(`There were multiple attempts to register component ${Xe}.`),!1;Ut.set(Xe,Ye);for(const Tt of Vt.values())_s(Tt,Ye);return!0}function un(Ye,Xe){return Ye.container.getProvider(Xe)}function ia(Ye,Xe,Tt=ms){un(Ye,Xe).clearInstance(Tt)}function vn(){Ut.clear()}const Pt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class En{constructor(Xe,Tt,Dt){this._isDeleted=!1,this._options=Object.assign({},Xe),this._config=Object.assign({},Tt),this._name=Tt.name,this._automaticDataCollectionEnabled=Tt.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const sa="9.6.1";function Ri(Ye,Xe={}){"object"!=typeof Xe&&(Xe={name:Xe});const Tt=Object.assign({name:ms,automaticDataCollectionEnabled:!1},Xe),Dt=Tt.name;if("string"!=typeof Dt||!Dt)throw Pt.create("bad-app-name",{appName:String(Dt)});const Br=Vt.get(Dt);if(Br){if((0,ce.vZ)(Ye,Br.options)&&(0,ce.vZ)(Tt,Br.config))return Br;throw Pt.create("duplicate-app",{appName:Dt})}const Ht=new ne.H0(Dt);for(const Qe of Ut.values())Ht.addComponent(Qe);const Oe=new En(Ye,Tt,Ht);return Vt.set(Dt,Oe),Oe}function ns(Ye=ms){const Xe=Vt.get(Ye);if(!Xe)throw Pt.create("no-app",{appName:Ye});return Xe}function De(){return Array.from(Vt.values())}function er(Ye){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(Ye){const Xe=Ye.name;Vt.has(Xe)&&(Vt.delete(Xe),yield Promise.all(Ye.container.getProviders().map(Tt=>Tt.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function Ge(Ye,Xe,Tt){var Dt;let Br=null!==(Dt=iu[Ye])&&void 0!==Dt?Dt:Ye;Tt&&(Br+=`-${Tt}`);const Ht=Br.match(/\s|\//),Oe=Xe.match(/\s|\//);if(Ht||Oe){const Qe=[`Unable to register library "${Br}" with version "${Xe}":`];return Ht&&Qe.push(`library name "${Br}" contains illegal characters (whitespace or "/")`),Ht&&Oe&&Qe.push("and"),Oe&&Qe.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),void X.warn(Qe.join(" "))}ts(new ne.wA(`${Br}-version`,()=>({library:Br,version:Xe}),"VERSION"))}function Bt(Ye,Xe){if(null!==Ye&&"function"!=typeof Ye)throw Pt.create("invalid-log-argument");(0,L.Am)(Ye,Xe)}function Ni(Ye){(0,L.Ub)(Ye)}ts(new ne.wA("platform-logger",Xe=>new ie(Xe),"PRIVATE")),Ge(ge,Q,""),Ge(ge,Q,"esm2017"),Ge("fire-js","")},3910:(ze,Ce,U)=>{"use strict";U.d(Ce,{wA:()=>L,H0:()=>Q,zt:()=>ie});var f=U(8239),ne=U(3854);class L{constructor(V,j,G){this.name=V,this.instanceFactory=j,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ce="[DEFAULT]";class ie{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const G=new ne.BH;if(this.instancesDeferred.set(j,G),this.isInitialized(j)||this.shouldAutoInitialize())try{const ae=this.getOrInitializeService({instanceIdentifier:j});ae&&G.resolve(ae)}catch(ae){}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const G=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),ae=null!==(j=null==V?void 0:V.optional)&&void 0!==j&&j;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(de){if(ae)return null;throw de}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(j){}for(const[j,G]of this.instancesDeferred.entries()){const ae=this.normalizeInstanceIdentifier(j);try{const de=this.getOrInitializeService({instanceIdentifier:ae});G.resolve(de)}catch(de){}}}}clearInstance(V=ce){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,f.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...j.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ce){return this.instances.has(V)}getOptions(V=ce){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,G=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ae=this.getOrInitializeService({instanceIdentifier:G,options:j});for(const[de,Ee]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(de)&&Ee.resolve(ae);return ae}onInit(V,j){var G;const ae=this.normalizeInstanceIdentifier(j),de=null!==(G=this.onInitCallbacks.get(ae))&&void 0!==G?G:new Set;de.add(V),this.onInitCallbacks.set(ae,de);const Ee=this.instances.get(ae);return Ee&&V(Ee,ae),()=>{de.delete(V)}}invokeOnInitCallbacks(V,j){const G=this.onInitCallbacks.get(j);if(G)for(const ae of G)try{ae(V,j)}catch(de){}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let G=this.instances.get(V);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(X=V,X===ce?void 0:X),options:j}),this.instances.set(V,G),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(G,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,G)}catch(ae){}var X;return G||null}normalizeInstanceIdentifier(V=ce){return this.component?this.component.multipleInstances?V:ce:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Q{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new ie(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},5422:(ze,Ce,U)=>{"use strict";U.d(Ce,{in:()=>ne,Yd:()=>ge,Ub:()=>Q,Am:()=>X});const f=[];var ne=(()=>{return(V=ne||(ne={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",ne;var V})();const L={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ce=ne.INFO,ie={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Y=(V,j,...G)=>{if(j<V.logLevel)return;const ae=(new Date).toISOString(),de=ie[j];if(!de)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[de](`[${ae}]  ${V.name}:`,...G)};class ge{constructor(j){this.name=j,this._logLevel=ce,this._logHandler=Y,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ne))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?L[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...j),this._logHandler(this,ne.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...j),this._logHandler(this,ne.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...j),this._logHandler(this,ne.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...j),this._logHandler(this,ne.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...j),this._logHandler(this,ne.ERROR,...j)}}function Q(V){f.forEach(j=>{j.setLogLevel(V)})}function X(V,j){for(const G of f){let ae=null;j&&j.level&&(ae=L[j.level]),G.userLogHandler=null===V?null:(de,Ee,..._e)=>{const fe=_e.map(re=>{if(null==re)return null;if("string"==typeof re)return re;if("number"==typeof re||"boolean"==typeof re)return re.toString();if(re instanceof Error)return re.message;try{return JSON.stringify(re)}catch(he){return null}}).filter(re=>re).join(" ");Ee>=(null!=ae?ae:de.logLevel)&&V({level:ne[Ee].toLowerCase(),message:fe,args:_e,type:de.name})}}}},8239:(ze,Ce,U)=>{"use strict";function f(L,ce,ie,Y,ge,Q,X){try{var V=L[Q](X),j=V.value}catch(G){return void ie(G)}V.done?ce(j):Promise.resolve(j).then(Y,ge)}function ne(L){return function(){var ce=this,ie=arguments;return new Promise(function(Y,ge){var Q=L.apply(ce,ie);function X(j){f(Q,Y,ge,X,V,"next",j)}function V(j){f(Q,Y,ge,X,V,"throw",j)}X(void 0)})}}U.d(Ce,{Z:()=>ne})}},ze=>{ze(ze.s=7724)}]);